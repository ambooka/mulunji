import{_ as Wt,a5 as Mh,r as rt,a6 as Vh,a7 as jh,z as Oi,j as ft,D as mr,i as Bh,E as Ii,v as Ri,t as os,w as Pn,A as Fh,a8 as Ru,l as qh,a9 as Su,c as en,e as ss,x as Uh,y as as,aa as $h,T as Ha,ab as Pu,R as Ka,ac as zh,ad as Hh,ae as Kh,X as ii,Y as ae,af as Gh,$ as xu,U as Ga,a as Wh,a3 as Qh}from"./index-72638cd3.js";import{s as Xh,u as Yh}from"./useThemeProps-5accff98.js";import{c as ge,u as xn,a as Zh}from"./ThemeProvider-722ac2c5.js";import{S as xo,C as Jh}from"./Stack-b5e649e9.js";const td=(n,t)=>n.filter(e=>t.includes(e)),kn=(n,t,e)=>{const r=n.keys[0];Array.isArray(t)?t.forEach((i,o)=>{e((s,l)=>{o<=n.keys.length-1&&(o===0?Object.assign(s,l):s[n.up(n.keys[o])]=l)},i)}):t&&typeof t=="object"?(Object.keys(t).length>n.keys.length?n.keys:td(n.keys,Object.keys(t))).forEach(o=>{if(n.keys.indexOf(o)!==-1){const s=t[o];s!==void 0&&e((l,u)=>{r===o?Object.assign(l,u):l[n.up(o)]=u},s)}}):(typeof t=="number"||typeof t=="string")&&e((i,o)=>{Object.assign(i,o)},t)};function Ie(n){return n?`Level${n}`:""}function Ir(n){return n.unstable_level>0&&n.container}function ku(n){return function(e){return`var(--Grid-${e}Spacing${Ie(n.unstable_level)})`}}function ls(n){return function(e){return n.unstable_level===0?`var(--Grid-${e}Spacing)`:`var(--Grid-${e}Spacing${Ie(n.unstable_level-1)})`}}function us(n){return n.unstable_level===0?"var(--Grid-columns)":`var(--Grid-columns${Ie(n.unstable_level-1)})`}const ed=({theme:n,ownerState:t})=>{const e=ku(t),r={};return kn(n.breakpoints,t.gridSize,(i,o)=>{let s={};o===!0&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),o==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof o=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${o} / ${us(t)}${Ir(t)?` + ${e("column")}`:""})`}),i(r,s)}),r},nd=({theme:n,ownerState:t})=>{const e={};return kn(n.breakpoints,t.gridOffset,(r,i)=>{let o={};i==="auto"&&(o={marginLeft:"auto"}),typeof i=="number"&&(o={marginLeft:i===0?"0px":`calc(100% * ${i} / ${us(t)})`}),r(e,o)}),e},rd=({theme:n,ownerState:t})=>{if(!t.container)return{};const e=Ir(t)?{[`--Grid-columns${Ie(t.unstable_level)}`]:us(t)}:{"--Grid-columns":12};return kn(n.breakpoints,t.columns,(r,i)=>{r(e,{[`--Grid-columns${Ie(t.unstable_level)}`]:i})}),e},id=({theme:n,ownerState:t})=>{if(!t.container)return{};const e=ls(t),r=Ir(t)?{[`--Grid-rowSpacing${Ie(t.unstable_level)}`]:e("row")}:{};return kn(n.breakpoints,t.rowSpacing,(i,o)=>{var s;i(r,{[`--Grid-rowSpacing${Ie(t.unstable_level)}`]:typeof o=="string"?o:(s=n.spacing)==null?void 0:s.call(n,o)})}),r},od=({theme:n,ownerState:t})=>{if(!t.container)return{};const e=ls(t),r=Ir(t)?{[`--Grid-columnSpacing${Ie(t.unstable_level)}`]:e("column")}:{};return kn(n.breakpoints,t.columnSpacing,(i,o)=>{var s;i(r,{[`--Grid-columnSpacing${Ie(t.unstable_level)}`]:typeof o=="string"?o:(s=n.spacing)==null?void 0:s.call(n,o)})}),r},sd=({theme:n,ownerState:t})=>{if(!t.container)return{};const e={};return kn(n.breakpoints,t.direction,(r,i)=>{r(e,{flexDirection:i})}),e},ad=({ownerState:n})=>{const t=ku(n),e=ls(n);return Wt({minWidth:0,boxSizing:"border-box"},n.container&&Wt({display:"flex",flexWrap:"wrap"},n.wrap&&n.wrap!=="wrap"&&{flexWrap:n.wrap},{margin:`calc(${t("row")} / -2) calc(${t("column")} / -2)`},n.disableEqualOverflow&&{margin:`calc(${t("row")} * -1) 0px 0px calc(${t("column")} * -1)`}),(!n.container||Ir(n))&&Wt({padding:`calc(${e("row")} / 2) calc(${e("column")} / 2)`},(n.disableEqualOverflow||n.parentDisableEqualOverflow)&&{padding:`${e("row")} 0px 0px ${e("column")}`}))},ld=n=>{const t=[];return Object.entries(n).forEach(([e,r])=>{r!==!1&&r!==void 0&&t.push(`grid-${e}-${String(r)}`)}),t},ud=(n,t="xs")=>{function e(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(e(n))return[`spacing-${t}-${String(n)}`];if(typeof n=="object"&&!Array.isArray(n)){const r=[];return Object.entries(n).forEach(([i,o])=>{e(o)&&r.push(`spacing-${i}-${String(o)}`)}),r}return[]},cd=n=>n===void 0?[]:typeof n=="object"?Object.entries(n).map(([t,e])=>`direction-${t}-${e}`):[`direction-xs-${String(n)}`],fd=["className","children","columns","container","component","direction","wrap","spacing","rowSpacing","columnSpacing","disableEqualOverflow","unstable_level"],hd=Mh(),dd=Xh("div",{name:"MuiGrid",slot:"Root",overridesResolver:(n,t)=>t.root});function pd(n){return Yh({props:n,name:"MuiGrid",defaultTheme:hd})}function gd(n={}){const{createStyledComponent:t=dd,useThemeProps:e=pd,componentName:r="MuiGrid"}=n,i=rt.createContext(void 0),o=(u,c)=>{const{container:d,direction:h,spacing:f,wrap:p,gridSize:m}=u,_={root:["root",d&&"container",p!=="wrap"&&`wrap-xs-${String(p)}`,...cd(h),...ld(m),...d?ud(f,c.breakpoints.keys[0]):[]]};return Ii(_,g=>Ri(r,g),{})},s=t(rd,od,id,ed,sd,ad,nd),l=rt.forwardRef(function(c,d){var h,f,p,m,_,g,v,b;const A=Vh(),y=e(c),P=jh(y),C=rt.useContext(i),{className:I,children:E,columns:x=12,container:O=!1,component:T="div",direction:R="row",wrap:S="wrap",spacing:L=0,rowSpacing:B=L,columnSpacing:$=L,disableEqualOverflow:z,unstable_level:Y=0}=P,U=Oi(P,fd);let F=z;Y&&z!==void 0&&(F=c.disableEqualOverflow);const N={},V={},j={};Object.entries(U).forEach(([ot,ut])=>{A.breakpoints.values[ot]!==void 0?N[ot]=ut:A.breakpoints.values[ot.replace("Offset","")]!==void 0?V[ot.replace("Offset","")]=ut:j[ot]=ut});const K=(h=c.columns)!=null?h:Y?void 0:x,H=(f=c.spacing)!=null?f:Y?void 0:L,M=(p=(m=c.rowSpacing)!=null?m:c.spacing)!=null?p:Y?void 0:B,q=(_=(g=c.columnSpacing)!=null?g:c.spacing)!=null?_:Y?void 0:$,Q=Wt({},P,{level:Y,columns:K,container:O,direction:R,wrap:S,spacing:H,rowSpacing:M,columnSpacing:q,gridSize:N,gridOffset:V,disableEqualOverflow:(v=(b=F)!=null?b:C)!=null?v:!1,parentDisableEqualOverflow:C}),W=o(Q,A);let J=ft.jsx(s,Wt({ref:d,as:T,ownerState:Q,className:mr(W.root,I)},j,{children:rt.Children.map(E,ot=>{if(rt.isValidElement(ot)&&Bh(ot,["Grid"])){var ut;return rt.cloneElement(ot,{unstable_level:(ut=ot.props.unstable_level)!=null?ut:Y+1})}return ot})}));return F!==void 0&&F!==(C??!1)&&(J=ft.jsx(i.Provider,{value:F,children:J})),J});return l.muiName="Grid",l}function md(n,t){return n.classList?!!t&&n.classList.contains(t):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+t+" ")!==-1}function yd(n,t){n.classList?n.classList.add(t):md(n,t)||(typeof n.className=="string"?n.className=n.className+" "+t:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+t))}function Wa(n,t){return n.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function vd(n,t){n.classList?n.classList.remove(t):typeof n.className=="string"?n.className=Wa(n.className,t):n.setAttribute("class",Wa(n.className&&n.className.baseVal||"",t))}function _d(n){return Ri("PrivateSwitchBase",n)}os("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const bd=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ed=n=>{const{classes:t,checked:e,disabled:r,edge:i}=n,o={root:["root",e&&"checked",r&&"disabled",i&&`edge${en(i)}`],input:["input"]};return Ii(o,_d,t)},Td=Pn(Fh)(({ownerState:n})=>Wt({padding:9,borderRadius:"50%"},n.edge==="start"&&{marginLeft:n.size==="small"?-3:-12},n.edge==="end"&&{marginRight:n.size==="small"?-3:-12})),wd=Pn("input",{shouldForwardProp:Ru})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ad=rt.forwardRef(function(t,e){const{autoFocus:r,checked:i,checkedIcon:o,className:s,defaultChecked:l,disabled:u,disableFocusRipple:c=!1,edge:d=!1,icon:h,id:f,inputProps:p,inputRef:m,name:_,onBlur:g,onChange:v,onFocus:b,readOnly:A,required:y=!1,tabIndex:P,type:C,value:I}=t,E=Oi(t,bd),[x,O]=qh({controlled:i,default:!!l,name:"SwitchBase",state:"checked"}),T=Su(),R=U=>{b&&b(U),T&&T.onFocus&&T.onFocus(U)},S=U=>{g&&g(U),T&&T.onBlur&&T.onBlur(U)},L=U=>{if(U.nativeEvent.defaultPrevented)return;const F=U.target.checked;O(F),v&&v(U,F)};let B=u;T&&typeof B>"u"&&(B=T.disabled);const $=C==="checkbox"||C==="radio",z=Wt({},t,{checked:x,disabled:B,disableFocusRipple:c,edge:d}),Y=Ed(z);return ft.jsxs(Td,Wt({component:"span",className:mr(Y.root,s),centerRipple:!0,focusRipple:!c,disabled:B,tabIndex:null,role:void 0,onFocus:R,onBlur:S,ownerState:z,ref:e},E,{children:[ft.jsx(wd,Wt({autoFocus:r,checked:i,defaultChecked:l,className:Y.input,disabled:B,id:$?f:void 0,name:_,onChange:L,readOnly:A,ref:m,required:y,ownerState:z,tabIndex:P,type:C},C==="checkbox"&&I===void 0?{}:{value:I},p)),x?o:h]}))}),Od=Ad,Id=ss(ft.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Rd=ss(ft.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Sd=ss(ft.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Pd(n){return Ri("MuiCheckbox",n)}const xd=os("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),co=xd,kd=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Cd=n=>{const{classes:t,indeterminate:e,color:r,size:i}=n,o={root:["root",e&&"indeterminate",`color${en(r)}`,`size${en(i)}`]},s=Ii(o,Pd,t);return Wt({},t,s)},Nd=Pn(Od,{shouldForwardProp:n=>Ru(n)||n==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[t.root,e.indeterminate&&t.indeterminate,t[`size${en(e.size)}`],e.color!=="default"&&t[`color${en(e.color)}`]]}})(({theme:n,ownerState:t})=>Wt({color:(n.vars||n).palette.text.secondary},!t.disableRipple&&{"&:hover":{backgroundColor:n.vars?`rgba(${t.color==="default"?n.vars.palette.action.activeChannel:n.vars.palette[t.color].mainChannel} / ${n.vars.palette.action.hoverOpacity})`:Uh(t.color==="default"?n.palette.action.active:n.palette[t.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},t.color!=="default"&&{[`&.${co.checked}, &.${co.indeterminate}`]:{color:(n.vars||n).palette[t.color].main},[`&.${co.disabled}`]:{color:(n.vars||n).palette.action.disabled}})),Dd=ft.jsx(Rd,{}),Ld=ft.jsx(Id,{}),Md=ft.jsx(Sd,{}),Vd=rt.forwardRef(function(t,e){var r,i;const o=as({props:t,name:"MuiCheckbox"}),{checkedIcon:s=Dd,color:l="primary",icon:u=Ld,indeterminate:c=!1,indeterminateIcon:d=Md,inputProps:h,size:f="medium",className:p}=o,m=Oi(o,kd),_=c?d:u,g=c?d:s,v=Wt({},o,{color:l,indeterminate:c,size:f}),b=Cd(v);return ft.jsx(Nd,Wt({type:"checkbox",inputProps:Wt({"data-indeterminate":c},h),icon:rt.cloneElement(_,{fontSize:(r=_.props.fontSize)!=null?r:f}),checkedIcon:rt.cloneElement(g,{fontSize:(i=g.props.fontSize)!=null?i:f}),ownerState:v,ref:e,className:mr(b.root,p)},m,{classes:b}))}),jd=Vd;function Bd(n){return Ri("MuiFormControlLabel",n)}const Fd=os("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),ar=Fd,qd=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Ud=n=>{const{classes:t,disabled:e,labelPlacement:r,error:i,required:o}=n,s={root:["root",e&&"disabled",`labelPlacement${en(r)}`,i&&"error",o&&"required"],label:["label",e&&"disabled"],asterisk:["asterisk",i&&"error"]};return Ii(s,Bd,t)},$d=Pn("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(n,t)=>{const{ownerState:e}=n;return[{[`& .${ar.label}`]:t.label},t.root,t[`labelPlacement${en(e.labelPlacement)}`]]}})(({theme:n,ownerState:t})=>Wt({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${ar.disabled}`]:{cursor:"default"}},t.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},t.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},t.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${ar.label}`]:{[`&.${ar.disabled}`]:{color:(n.vars||n).palette.text.disabled}}})),zd=Pn("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(n,t)=>t.asterisk})(({theme:n})=>({[`&.${ar.error}`]:{color:(n.vars||n).palette.error.main}})),Hd=rt.forwardRef(function(t,e){var r,i;const o=as({props:t,name:"MuiFormControlLabel"}),{className:s,componentsProps:l={},control:u,disabled:c,disableTypography:d,label:h,labelPlacement:f="end",required:p,slotProps:m={}}=o,_=Oi(o,qd),g=Su(),v=(r=c??u.props.disabled)!=null?r:g==null?void 0:g.disabled,b=p??u.props.required,A={disabled:v,required:b};["checked","name","onChange","value","inputRef"].forEach(x=>{typeof u.props[x]>"u"&&typeof o[x]<"u"&&(A[x]=o[x])});const y=$h({props:o,muiFormControl:g,states:["error"]}),P=Wt({},o,{disabled:v,labelPlacement:f,required:b,error:y.error}),C=Ud(P),I=(i=m.typography)!=null?i:l.typography;let E=h;return E!=null&&E.type!==Ha&&!d&&(E=ft.jsx(Ha,Wt({component:"span"},I,{className:mr(C.label,I==null?void 0:I.className),children:E}))),ft.jsxs($d,Wt({className:mr(C.root,s),ownerState:P,ref:e},_,{children:[rt.cloneElement(u,A),b?ft.jsxs(xo,{display:"block",children:[E,ft.jsxs(zd,{ownerState:P,"aria-hidden":!0,className:C.asterisk,children:[" ","*"]})]}):E]}))}),Kd=Hd,Gd=gd({createStyledComponent:Pn("div",{name:"MuiGrid2",slot:"Root",overridesResolver:(n,t)=>t.root}),componentName:"MuiGrid2",useThemeProps:n=>as({props:n,name:"MuiGrid2"})}),UO=Gd;function Si(n){return n&&n.ownerDocument||document}function Wd(n){var t=Si(n);return t&&t.defaultView||window}function Qd(n,t){return Wd(n).getComputedStyle(n,t)}var Xd=/([A-Z])/g;function Yd(n){return n.replace(Xd,"-$1").toLowerCase()}var Zd=/^ms-/;function Wr(n){return Yd(n).replace(Zd,"-ms-")}var Jd=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function tp(n){return!!(n&&Jd.test(n))}function Ze(n,t){var e="",r="";if(typeof t=="string")return n.style.getPropertyValue(Wr(t))||Qd(n).getPropertyValue(Wr(t));Object.keys(t).forEach(function(i){var o=t[i];!o&&o!==0?n.style.removeProperty(Wr(i)):tp(i)?r+=i+"("+o+") ":e+=Wr(i)+": "+o+";"}),r&&(e+="transform: "+r+";"),n.style.cssText+=";"+e}const Cn=!!(typeof window<"u"&&window.document&&window.document.createElement);var ko=!1,Co=!1;try{var fo={get passive(){return ko=!0},get once(){return Co=ko=!0}};Cn&&(window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,!0))}catch{}function Cu(n,t,e,r){if(r&&typeof r!="boolean"&&!Co){var i=r.once,o=r.capture,s=e;!Co&&i&&(s=e.__once||function l(u){this.removeEventListener(t,l,o),e.call(this,u)},e.__once=s),n.addEventListener(t,s,ko?r:o)}n.addEventListener(t,e,r)}function No(n,t,e,r){var i=r&&typeof r!="boolean"?r.capture:r;n.removeEventListener(t,e,i),e.__once&&n.removeEventListener(t,e.__once,i)}function ci(n,t,e,r){return Cu(n,t,e,r),function(){No(n,t,e,r)}}function ep(n,t,e,r){if(e===void 0&&(e=!1),r===void 0&&(r=!0),n){var i=document.createEvent("HTMLEvents");i.initEvent(t,e,r),n.dispatchEvent(i)}}function np(n){var t=Ze(n,"transitionDuration")||"",e=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*e}function rp(n,t,e){e===void 0&&(e=5);var r=!1,i=setTimeout(function(){r||ep(n,"transitionend",!0)},t+e),o=ci(n,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),o()}}function Nu(n,t,e,r){e==null&&(e=np(n)||0);var i=rp(n,e,r),o=ci(n,"transitionend",t);return function(){i(),o()}}function Qa(n,t){const e=Ze(n,t)||"",r=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*r}function ip(n,t){const e=Qa(n,"transitionDuration"),r=Qa(n,"transitionDelay"),i=Nu(n,o=>{o.target===n&&(i(),t(o))},e+r)}function op(n){n.offsetHeight}const Xa=n=>!n||typeof n=="function"?n:t=>{n.current=t};function sp(n,t){const e=Xa(n),r=Xa(t);return i=>{e&&e(i),r&&r(i)}}function Rr(n,t){return rt.useMemo(()=>sp(n,t),[n,t])}function ap(n){return n&&"setState"in n?Pu.findDOMNode(n):n??null}const lp=Ka.forwardRef(({onEnter:n,onEntering:t,onEntered:e,onExit:r,onExiting:i,onExited:o,addEndListener:s,children:l,childRef:u,...c},d)=>{const h=rt.useRef(null),f=Rr(h,u),p=C=>{f(ap(C))},m=C=>I=>{C&&h.current&&C(h.current,I)},_=rt.useCallback(m(n),[n]),g=rt.useCallback(m(t),[t]),v=rt.useCallback(m(e),[e]),b=rt.useCallback(m(r),[r]),A=rt.useCallback(m(i),[i]),y=rt.useCallback(m(o),[o]),P=rt.useCallback(m(s),[s]);return ft.jsx(zh,{ref:d,...c,onEnter:_,onEntered:v,onEntering:g,onExit:b,onExited:y,onExiting:A,addEndListener:P,nodeRef:h,children:typeof l=="function"?(C,I)=>l(C,{...I,ref:p}):Ka.cloneElement(l,{ref:p})})}),up=lp;function cp(n){const t=rt.useRef(n);return rt.useEffect(()=>{t.current=n},[n]),t}function ye(n){const t=cp(n);return rt.useCallback(function(...e){return t.current&&t.current(...e)},[t])}const fp=n=>rt.forwardRef((t,e)=>ft.jsx("div",{...t,ref:e,className:ge(t.className,n)}));function hp(){return rt.useState(null)}function dp(){const n=rt.useRef(!0),t=rt.useRef(()=>n.current);return rt.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),t.current}function pp(n){const t=rt.useRef(null);return rt.useEffect(()=>{t.current=n}),t.current}const gp=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",mp=typeof document<"u",Ya=mp||gp?rt.useLayoutEffect:rt.useEffect,yp={[Hh]:"show",[Kh]:"show"},Du=rt.forwardRef(({className:n,children:t,transitionClasses:e={},onEnter:r,...i},o)=>{const s={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},l=rt.useCallback((u,c)=>{op(u),r==null||r(u,c)},[r]);return ft.jsx(up,{ref:o,addEndListener:ip,...s,onEnter:l,childRef:t.ref,children:(u,c)=>rt.cloneElement(t,{...c,className:ge("fade",n,t.props.className,yp[u],e[u])})})});Du.displayName="Fade";const Lu=Du,vp={"aria-label":ii.string,onClick:ii.func,variant:ii.oneOf(["white"])},cs=rt.forwardRef(({className:n,variant:t,"aria-label":e="Close",...r},i)=>ft.jsx("button",{ref:i,type:"button",className:ge("btn-close",t&&`btn-close-${t}`,n),"aria-label":e,...r}));cs.displayName="CloseButton";cs.propTypes=vp;const _p=cs;function bp(n){const t=rt.useRef(n);return t.current=n,t}function Mu(n){const t=bp(n);rt.useEffect(()=>()=>t.current(),[])}var Ep=Function.prototype.bind.call(Function.prototype.call,[].slice);function gn(n,t){return Ep(n.querySelectorAll(t))}function Za(n,t){if(n.contains)return n.contains(t);if(n.compareDocumentPosition)return n===t||!!(n.compareDocumentPosition(t)&16)}const Tp="data-rr-ui-";function wp(n){return`${Tp}${n}`}const Vu=rt.createContext(Cn?window:void 0);Vu.Provider;function fs(){return rt.useContext(Vu)}var Qr;function Ja(n){if((!Qr&&Qr!==0||n)&&Cn){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Qr=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Qr}function ho(n){n===void 0&&(n=Si());try{var t=n.activeElement;return!t||!t.nodeName?null:t}catch{return n.body}}function Ap(n=document){const t=n.defaultView;return Math.abs(t.innerWidth-n.documentElement.clientWidth)}const tl=wp("modal-open");class Op{constructor({ownerDocument:t,handleContainerOverflow:e=!0,isRTL:r=!1}={}){this.handleContainerOverflow=e,this.isRTL=r,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Ap(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const e={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();t.style={overflow:i.style.overflow,[r]:i.style[r]},t.scrollBarWidth&&(e[r]=`${parseInt(Ze(i,r)||"0",10)+t.scrollBarWidth}px`),i.setAttribute(tl,""),Ze(i,e)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const e=this.getElement();e.removeAttribute(tl),Object.assign(e.style,t.style)}add(t){let e=this.modals.indexOf(t);return e!==-1||(e=this.modals.length,this.modals.push(t),this.setModalAttributes(t),e!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),e}remove(t){const e=this.modals.indexOf(t);e!==-1&&(this.modals.splice(e,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const hs=Op,po=(n,t)=>Cn?n==null?(t||Si()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function Ip(n,t){const e=fs(),[r,i]=rt.useState(()=>po(n,e==null?void 0:e.document));if(!r){const o=po(n);o&&i(o)}return rt.useEffect(()=>{t&&r&&t(r)},[t,r]),rt.useEffect(()=>{const o=po(n);o!==r&&i(o)},[n,r]),r}function Rp({children:n,in:t,onExited:e,mountOnEnter:r,unmountOnExit:i}){const o=rt.useRef(null),s=rt.useRef(t),l=ye(e);rt.useEffect(()=>{t?s.current=!0:l(o.current)},[t,l]);const u=Rr(o,n.ref),c=rt.cloneElement(n,{ref:u});return t?c:i||!s.current&&r?null:c}function Sp(n){return n.code==="Escape"||n.keyCode===27}function Pp(){const n=rt.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}const xp=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function kp(n,t){if(n==null)return{};var e={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.indexOf(r)>=0)continue;e[r]=n[r]}return e}function Cp(n){let{onEnter:t,onEntering:e,onEntered:r,onExit:i,onExiting:o,onExited:s,addEndListener:l,children:u}=n,c=kp(n,xp);const{major:d}=Pp(),h=d>=19?u.props.ref:u.ref,f=rt.useRef(null),p=Rr(f,typeof u=="function"?null:h),m=C=>I=>{C&&f.current&&C(f.current,I)},_=rt.useCallback(m(t),[t]),g=rt.useCallback(m(e),[e]),v=rt.useCallback(m(r),[r]),b=rt.useCallback(m(i),[i]),A=rt.useCallback(m(o),[o]),y=rt.useCallback(m(s),[s]),P=rt.useCallback(m(l),[l]);return Object.assign({},c,{nodeRef:f},t&&{onEnter:_},e&&{onEntering:g},r&&{onEntered:v},i&&{onExit:b},o&&{onExiting:A},s&&{onExited:y},l&&{addEndListener:P},{children:typeof u=="function"?(C,I)=>u(C,Object.assign({},I,{ref:p})):rt.cloneElement(u,{ref:p})})}const Np=["component"];function Dp(n,t){if(n==null)return{};var e={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.indexOf(r)>=0)continue;e[r]=n[r]}return e}const Lp=rt.forwardRef((n,t)=>{let{component:e}=n,r=Dp(n,Np);const i=Cp(r);return ft.jsx(e,Object.assign({ref:t},i))}),Mp=Lp;function Vp({in:n,onTransition:t}){const e=rt.useRef(null),r=rt.useRef(!0),i=ye(t);return Ya(()=>{if(!e.current)return;let o=!1;return i({in:n,element:e.current,initial:r.current,isStale:()=>o}),()=>{o=!0}},[n,i]),Ya(()=>(r.current=!1,()=>{r.current=!0}),[]),e}function jp({children:n,in:t,onExited:e,onEntered:r,transition:i}){const[o,s]=rt.useState(!t);t&&o&&s(!1);const l=Vp({in:!!t,onTransition:c=>{const d=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(s(!0),e==null||e(c.element)))};Promise.resolve(i(c)).then(d,h=>{throw c.in||s(!0),h})}}),u=Rr(l,n.ref);return o&&!t?null:rt.cloneElement(n,{ref:u})}function el(n,t,e){return n?ft.jsx(Mp,Object.assign({},e,{component:n})):t?ft.jsx(jp,Object.assign({},e,{transition:t})):ft.jsx(Rp,Object.assign({},e))}const Bp=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Fp(n,t){if(n==null)return{};var e={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(t.indexOf(r)>=0)continue;e[r]=n[r]}return e}let go;function qp(n){return go||(go=new hs({ownerDocument:n==null?void 0:n.document})),go}function Up(n){const t=fs(),e=n||qp(t),r=rt.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>e.add(r.current),remove:()=>e.remove(r.current),isTopModal:()=>e.isTopModal(r.current),setDialogRef:rt.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:rt.useCallback(i=>{r.current.backdrop=i},[])})}const ju=rt.forwardRef((n,t)=>{let{show:e=!1,role:r="dialog",className:i,style:o,children:s,backdrop:l=!0,keyboard:u=!0,onBackdropClick:c,onEscapeKeyDown:d,transition:h,runTransition:f,backdropTransition:p,runBackdropTransition:m,autoFocus:_=!0,enforceFocus:g=!0,restoreFocus:v=!0,restoreFocusOptions:b,renderDialog:A,renderBackdrop:y=ht=>ft.jsx("div",Object.assign({},ht)),manager:P,container:C,onShow:I,onHide:E=()=>{},onExit:x,onExited:O,onExiting:T,onEnter:R,onEntering:S,onEntered:L}=n,B=Fp(n,Bp);const $=fs(),z=Ip(C),Y=Up(P),U=dp(),F=pp(e),[N,V]=rt.useState(!e),j=rt.useRef(null);rt.useImperativeHandle(t,()=>Y,[Y]),Cn&&!F&&e&&(j.current=ho($==null?void 0:$.document)),e&&N&&V(!1);const K=ye(()=>{if(Y.add(),J.current=ci(document,"keydown",Q),W.current=ci(document,"focus",()=>setTimeout(M),!0),I&&I(),_){var ht,Bt;const kt=ho((ht=(Bt=Y.dialog)==null?void 0:Bt.ownerDocument)!=null?ht:$==null?void 0:$.document);Y.dialog&&kt&&!Za(Y.dialog,kt)&&(j.current=kt,Y.dialog.focus())}}),H=ye(()=>{if(Y.remove(),J.current==null||J.current(),W.current==null||W.current(),v){var ht;(ht=j.current)==null||ht.focus==null||ht.focus(b),j.current=null}});rt.useEffect(()=>{!e||!z||K()},[e,z,K]),rt.useEffect(()=>{N&&H()},[N,H]),Mu(()=>{H()});const M=ye(()=>{if(!g||!U()||!Y.isTopModal())return;const ht=ho($==null?void 0:$.document);Y.dialog&&ht&&!Za(Y.dialog,ht)&&Y.dialog.focus()}),q=ye(ht=>{ht.target===ht.currentTarget&&(c==null||c(ht),l===!0&&E())}),Q=ye(ht=>{u&&Sp(ht)&&Y.isTopModal()&&(d==null||d(ht),ht.defaultPrevented||E())}),W=rt.useRef(),J=rt.useRef(),ot=(...ht)=>{V(!0),O==null||O(...ht)};if(!z)return null;const ut=Object.assign({role:r,ref:Y.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},B,{style:o,className:i,tabIndex:-1});let pt=A?A(ut):ft.jsx("div",Object.assign({},ut,{children:rt.cloneElement(s,{role:"document"})}));pt=el(h,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!e,onExit:x,onExiting:T,onExited:ot,onEnter:R,onEntering:S,onEntered:L,children:pt});let yt=null;return l&&(yt=y({ref:Y.setBackdropRef,onClick:q}),yt=el(p,m,{in:!!e,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:yt})),ft.jsx(ft.Fragment,{children:Pu.createPortal(ft.jsxs(ft.Fragment,{children:[yt,pt]}),z)})});ju.displayName="Modal";const $p=Object.assign(ju,{Manager:hs}),mn={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class zp extends hs{adjustAndStore(t,e,r){const i=e.style[t];e.dataset[t]=i,Ze(e,{[t]:`${parseFloat(Ze(e,t))+r}px`})}restore(t,e){const r=e.dataset[t];r!==void 0&&(delete e.dataset[t],Ze(e,{[t]:r}))}setContainerStyle(t){super.setContainerStyle(t);const e=this.getElement();if(yd(e,"modal-open"),!t.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";gn(e,mn.FIXED_CONTENT).forEach(o=>this.adjustAndStore(r,o,t.scrollBarWidth)),gn(e,mn.STICKY_CONTENT).forEach(o=>this.adjustAndStore(i,o,-t.scrollBarWidth)),gn(e,mn.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(i,o,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const e=this.getElement();vd(e,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";gn(e,mn.FIXED_CONTENT).forEach(o=>this.restore(r,o)),gn(e,mn.STICKY_CONTENT).forEach(o=>this.restore(i,o)),gn(e,mn.NAVBAR_TOGGLER).forEach(o=>this.restore(i,o))}}let mo;function Hp(n){return mo||(mo=new zp(n)),mo}const Bu=rt.forwardRef(({className:n,bsPrefix:t,as:e="div",...r},i)=>(t=xn(t,"modal-body"),ft.jsx(e,{ref:i,className:ge(n,t),...r})));Bu.displayName="ModalBody";const Kp=Bu,Gp=rt.createContext({onHide(){}}),Fu=Gp,qu=rt.forwardRef(({bsPrefix:n,className:t,contentClassName:e,centered:r,size:i,fullscreen:o,children:s,scrollable:l,...u},c)=>{n=xn(n,"modal");const d=`${n}-dialog`,h=typeof o=="string"?`${n}-fullscreen-${o}`:`${n}-fullscreen`;return ft.jsx("div",{...u,ref:c,className:ge(d,t,i&&`${n}-${i}`,r&&`${d}-centered`,l&&`${d}-scrollable`,o&&h),children:ft.jsx("div",{className:ge(`${n}-content`,e),children:s})})});qu.displayName="ModalDialog";const Uu=qu,$u=rt.forwardRef(({className:n,bsPrefix:t,as:e="div",...r},i)=>(t=xn(t,"modal-footer"),ft.jsx(e,{ref:i,className:ge(n,t),...r})));$u.displayName="ModalFooter";const Wp=$u,Qp=rt.forwardRef(({closeLabel:n="Close",closeVariant:t,closeButton:e=!1,onHide:r,children:i,...o},s)=>{const l=rt.useContext(Fu),u=ye(()=>{l==null||l.onHide(),r==null||r()});return ft.jsxs("div",{ref:s,...o,children:[i,e&&ft.jsx(_p,{"aria-label":n,variant:t,onClick:u})]})}),Xp=Qp,zu=rt.forwardRef(({bsPrefix:n,className:t,closeLabel:e="Close",closeButton:r=!1,...i},o)=>(n=xn(n,"modal-header"),ft.jsx(Xp,{ref:o,...i,className:ge(t,n),closeLabel:e,closeButton:r})));zu.displayName="ModalHeader";const Yp=zu,Zp=fp("h4"),Hu=rt.forwardRef(({className:n,bsPrefix:t,as:e=Zp,...r},i)=>(t=xn(t,"modal-title"),ft.jsx(e,{ref:i,className:ge(n,t),...r})));Hu.displayName="ModalTitle";const Jp=Hu;function tg(n){return ft.jsx(Lu,{...n,timeout:null})}function eg(n){return ft.jsx(Lu,{...n,timeout:null})}const Ku=rt.forwardRef(({bsPrefix:n,className:t,style:e,dialogClassName:r,contentClassName:i,children:o,dialogAs:s=Uu,"data-bs-theme":l,"aria-labelledby":u,"aria-describedby":c,"aria-label":d,show:h=!1,animation:f=!0,backdrop:p=!0,keyboard:m=!0,onEscapeKeyDown:_,onShow:g,onHide:v,container:b,autoFocus:A=!0,enforceFocus:y=!0,restoreFocus:P=!0,restoreFocusOptions:C,onEntered:I,onExit:E,onExiting:x,onEnter:O,onEntering:T,onExited:R,backdropClassName:S,manager:L,...B},$)=>{const[z,Y]=rt.useState({}),[U,F]=rt.useState(!1),N=rt.useRef(!1),V=rt.useRef(!1),j=rt.useRef(null),[K,H]=hp(),M=Rr($,H),q=ye(v),Q=Zh();n=xn(n,"modal");const W=rt.useMemo(()=>({onHide:q}),[q]);function J(){return L||Hp({isRTL:Q})}function ot(mt){if(!Cn)return;const Rt=J().getScrollbarWidth()>0,At=mt.scrollHeight>Si(mt).documentElement.clientHeight;Y({paddingRight:Rt&&!At?Ja():void 0,paddingLeft:!Rt&&At?Ja():void 0})}const ut=ye(()=>{K&&ot(K.dialog)});Mu(()=>{No(window,"resize",ut),j.current==null||j.current()});const pt=()=>{N.current=!0},yt=mt=>{N.current&&K&&mt.target===K.dialog&&(V.current=!0),N.current=!1},ht=()=>{F(!0),j.current=Nu(K.dialog,()=>{F(!1)})},Bt=mt=>{mt.target===mt.currentTarget&&ht()},kt=mt=>{if(p==="static"){Bt(mt);return}if(V.current||mt.target!==mt.currentTarget){V.current=!1;return}v==null||v()},Z=mt=>{m?_==null||_(mt):(mt.preventDefault(),p==="static"&&ht())},tt=(mt,Rt)=>{mt&&ot(mt),O==null||O(mt,Rt)},at=mt=>{j.current==null||j.current(),E==null||E(mt)},lt=(mt,Rt)=>{T==null||T(mt,Rt),Cu(window,"resize",ut)},et=mt=>{mt&&(mt.style.display=""),R==null||R(mt),No(window,"resize",ut)},wt=rt.useCallback(mt=>ft.jsx("div",{...mt,className:ge(`${n}-backdrop`,S,!f&&"show")}),[f,S,n]),_t={...e,...z};_t.display="block";const Tt=mt=>ft.jsx("div",{role:"dialog",...mt,style:_t,className:ge(t,n,U&&`${n}-static`,!f&&"show"),onClick:p?kt:void 0,onMouseUp:yt,"data-bs-theme":l,"aria-label":d,"aria-labelledby":u,"aria-describedby":c,children:ft.jsx(s,{...B,onMouseDown:pt,className:r,contentClassName:i,children:o})});return ft.jsx(Fu.Provider,{value:W,children:ft.jsx($p,{show:h,ref:M,backdrop:p,container:b,keyboard:!0,autoFocus:A,enforceFocus:y,restoreFocus:P,restoreFocusOptions:C,onEscapeKeyDown:Z,onShow:g,onHide:v,onEnter:tt,onEntering:lt,onEntered:I,onExit:at,onExiting:x,onExited:et,manager:J(),transition:f?tg:void 0,backdropTransition:f?eg:void 0,renderBackdrop:wt,renderDialog:Tt})})});Ku.displayName="Modal";const $O=Object.assign(Ku,{Body:Kp,Header:Yp,Title:Jp,Footer:Wp,Dialog:Uu,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu=function(n){const t=[];let e=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[e++]=i:i<2048?(t[e++]=i>>6|192,t[e++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[e++]=i>>18|240,t[e++]=i>>12&63|128,t[e++]=i>>6&63|128,t[e++]=i&63|128):(t[e++]=i>>12|224,t[e++]=i>>6&63|128,t[e++]=i&63|128)}return t},ng=function(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[e++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[e++],s=n[e++],l=n[e++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const o=n[e++],s=n[e++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return t.join("")},Wu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,l=s?n[i+1]:0,u=i+2<n.length,c=u?n[i+2]:0,d=o>>2,h=(o&3)<<4|l>>4;let f=(l&15)<<2|c>>6,p=c&63;u||(p=64,s||(f=64)),r.push(e[d],e[h],e[f],e[p])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Gu(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):ng(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=e[n.charAt(i++)],l=i<n.length?e[n.charAt(i)]:0;++i;const c=i<n.length?e[n.charAt(i)]:64;++i;const h=i<n.length?e[n.charAt(i)]:64;if(++i,o==null||l==null||c==null||h==null)throw new rg;const f=o<<2|l>>4;if(r.push(f),c!==64){const p=l<<4&240|c>>2;if(r.push(p),h!==64){const m=c<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class rg extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ig=function(n){const t=Gu(n);return Wu.encodeByteArray(t,!0)},fi=function(n){return ig(n).replace(/\./g,"")},og=function(n){try{return Wu.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sg(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=()=>sg().__FIREBASE_DEFAULTS__,lg=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ug=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=n&&og(n[1]);return t&&JSON.parse(t)},ds=()=>{try{return ag()||lg()||ug()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},cg=n=>{var t,e;return(e=(t=ds())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},Qu=n=>{const t=cg(n);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),r]:[t.substring(0,e),r]},Xu=()=>{var n;return(n=ds())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,r)=>{e?this.reject(e):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},r=t||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n),l="";return[fi(JSON.stringify(e)),fi(JSON.stringify(s)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dg(){var n;const t=(n=ds())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pg(){return!dg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gg(){try{return typeof indexedDB=="object"}catch{return!1}}function mg(){return new Promise((n,t)=>{try{let e=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),e||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{e=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="FirebaseError";class an extends Error{constructor(t,e,r){super(e),this.code=t,this.customData=r,this.name=yg,Object.setPrototypeOf(this,an.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zu.prototype.create)}}class Zu{constructor(t,e,r){this.service=t,this.serviceName=e,this.errors=r}create(t,...e){const r=e[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?vg(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new an(i,l,r)}}function vg(n,t){return n.replace(_g,(e,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const _g=/\{\$([^}]+)}/g;function Do(n,t){if(n===t)return!0;const e=Object.keys(n),r=Object.keys(t);for(const i of e){if(!r.includes(i))return!1;const o=n[i],s=t[i];if(nl(o)&&nl(s)){if(!Do(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!e.includes(i))return!1;return!0}function nl(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n){return n&&n._delegate?n._delegate:n}class En{constructor(t,e,r){this.name=t,this.instanceFactory=e,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const r=new fg;if(this.instancesDeferred.set(e,r),this.isInitialized(e)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:e});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Tg(t))try{this.getOrInitializeService({instanceIdentifier:Qe})}catch{}for(const[e,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Qe){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Qe){return this.instances.has(t)}getOptions(t=Qe){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:e});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(t,e){var r;const i=this.normalizeInstanceIdentifier(e),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,e){const r=this.onInitCallbacks.get(e);if(r)for(const i of r)try{i(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Eg(t),options:e}),this.instances.set(t,r),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Qe){return this.component?this.component.multipleInstances?t:Qe:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Eg(n){return n===Qe?void 0:n}function Tg(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new bg(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(St||(St={}));const Ag={debug:St.DEBUG,verbose:St.VERBOSE,info:St.INFO,warn:St.WARN,error:St.ERROR,silent:St.SILENT},Og=St.INFO,Ig={[St.DEBUG]:"log",[St.VERBOSE]:"log",[St.INFO]:"info",[St.WARN]:"warn",[St.ERROR]:"error"},Rg=(n,t,...e)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=Ig[t];if(i)console[i](`[${r}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ju{constructor(t){this.name=t,this._logLevel=Og,this._logHandler=Rg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in St))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ag[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,St.DEBUG,...t),this._logHandler(this,St.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,St.VERBOSE,...t),this._logHandler(this,St.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,St.INFO,...t),this._logHandler(this,St.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,St.WARN,...t),this._logHandler(this,St.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,St.ERROR,...t),this._logHandler(this,St.ERROR,...t)}}const Sg=(n,t)=>t.some(e=>n instanceof e);let rl,il;function Pg(){return rl||(rl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xg(){return il||(il=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tc=new WeakMap,Lo=new WeakMap,ec=new WeakMap,yo=new WeakMap,ps=new WeakMap;function kg(n){const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{e(Ve(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return t.then(e=>{e instanceof IDBCursor&&tc.set(e,n)}).catch(()=>{}),ps.set(t,n),t}function Cg(n){if(Lo.has(n))return;const t=new Promise((e,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{e(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Lo.set(n,t)}let Mo={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Lo.get(n);if(t==="objectStoreNames")return n.objectStoreNames||ec.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ve(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function Ng(n){Mo=n(Mo)}function Dg(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const r=n.call(vo(this),t,...e);return ec.set(r,t.sort?t.sort():[t]),Ve(r)}:xg().includes(n)?function(...t){return n.apply(vo(this),t),Ve(tc.get(this))}:function(...t){return Ve(n.apply(vo(this),t))}}function Lg(n){return typeof n=="function"?Dg(n):(n instanceof IDBTransaction&&Cg(n),Sg(n,Pg())?new Proxy(n,Mo):n)}function Ve(n){if(n instanceof IDBRequest)return kg(n);if(yo.has(n))return yo.get(n);const t=Lg(n);return t!==n&&(yo.set(n,t),ps.set(t,n)),t}const vo=n=>ps.get(n);function Mg(n,t,{blocked:e,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,t),l=Ve(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Ve(s.result),u.oldVersion,u.newVersion,Ve(s.transaction),u)}),e&&s.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const Vg=["get","getKey","getAll","getAllKeys","count"],jg=["put","add","delete","clear"],_o=new Map;function ol(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(_o.get(t))return _o.get(t);const e=t.replace(/FromIndex$/,""),r=t!==e,i=jg.includes(e);if(!(e in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Vg.includes(e)))return;const o=async function(s,...l){const u=this.transaction(s,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[e](...l),i&&u.done]))[0]};return _o.set(t,o),o}Ng(n=>({...n,get:(t,e,r)=>ol(t,e)||n.get(t,e,r),has:(t,e)=>!!ol(t,e)||n.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Fg(e)){const r=e.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(e=>e).join(" ")}}function Fg(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Vo="@firebase/app",sl="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se=new Ju("@firebase/app"),qg="@firebase/app-compat",Ug="@firebase/analytics-compat",$g="@firebase/analytics",zg="@firebase/app-check-compat",Hg="@firebase/app-check",Kg="@firebase/auth",Gg="@firebase/auth-compat",Wg="@firebase/database",Qg="@firebase/database-compat",Xg="@firebase/functions",Yg="@firebase/functions-compat",Zg="@firebase/installations",Jg="@firebase/installations-compat",tm="@firebase/messaging",em="@firebase/messaging-compat",nm="@firebase/performance",rm="@firebase/performance-compat",im="@firebase/remote-config",om="@firebase/remote-config-compat",sm="@firebase/storage",am="@firebase/storage-compat",lm="@firebase/firestore",um="@firebase/vertexai-preview",cm="@firebase/firestore-compat",fm="firebase",hm="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="[DEFAULT]",dm={[Vo]:"fire-core",[qg]:"fire-core-compat",[$g]:"fire-analytics",[Ug]:"fire-analytics-compat",[Hg]:"fire-app-check",[zg]:"fire-app-check-compat",[Kg]:"fire-auth",[Gg]:"fire-auth-compat",[Wg]:"fire-rtdb",[Qg]:"fire-rtdb-compat",[Xg]:"fire-fn",[Yg]:"fire-fn-compat",[Zg]:"fire-iid",[Jg]:"fire-iid-compat",[tm]:"fire-fcm",[em]:"fire-fcm-compat",[nm]:"fire-perf",[rm]:"fire-perf-compat",[im]:"fire-rc",[om]:"fire-rc-compat",[sm]:"fire-gcs",[am]:"fire-gcs-compat",[lm]:"fire-fst",[cm]:"fire-fst-compat",[um]:"fire-vertex","fire-js":"fire-js",[fm]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new Map,pm=new Map,Bo=new Map;function al(n,t){try{n.container.addComponent(t)}catch(e){Se.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function yr(n){const t=n.name;if(Bo.has(t))return Se.debug(`There were multiple attempts to register component ${t}.`),!1;Bo.set(t,n);for(const e of hi.values())al(e,n);for(const e of pm.values())al(e,n);return!0}function nc(n,t){const e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},je=new Zu("app","Firebase",gm);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t,e,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw je.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=hm;function ic(n,t={}){let e=n;typeof t!="object"&&(t={name:t});const r=Object.assign({name:jo,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw je.create("bad-app-name",{appName:String(i)});if(e||(e=Xu()),!e)throw je.create("no-options");const o=hi.get(i);if(o){if(Do(e,o.options)&&Do(r,o.config))return o;throw je.create("duplicate-app",{appName:i})}const s=new wg(i);for(const u of Bo.values())s.addComponent(u);const l=new mm(e,r,s);return hi.set(i,l),l}function oc(n=jo){const t=hi.get(n);if(!t&&n===jo&&Xu())return ic();if(!t)throw je.create("no-app",{appName:n});return t}function Be(n,t,e){var r;let i=(r=dm[n])!==null&&r!==void 0?r:n;e&&(i+=`-${e}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${t}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Se.warn(l.join(" "));return}yr(new En(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="firebase-heartbeat-database",vm=1,vr="firebase-heartbeat-store";let bo=null;function sc(){return bo||(bo=Mg(ym,vm,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(vr)}catch(e){console.warn(e)}}}}).catch(n=>{throw je.create("idb-open",{originalErrorMessage:n.message})})),bo}async function _m(n){try{const e=(await sc()).transaction(vr),r=await e.objectStore(vr).get(ac(n));return await e.done,r}catch(t){if(t instanceof an)Se.warn(t.message);else{const e=je.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Se.warn(e.message)}}}async function ll(n,t){try{const r=(await sc()).transaction(vr,"readwrite");await r.objectStore(vr).put(t,ac(n)),await r.done}catch(e){if(e instanceof an)Se.warn(e.message);else{const r=je.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Se.warn(r.message)}}}function ac(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm=1024,Em=30*24*60*60*1e3;class Tm{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Am(e),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,e;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ul();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=Em}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Se.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ul(),{heartbeatsToSend:r,unsentEntries:i}=wm(this._heartbeatsCache.heartbeats),o=fi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Se.warn(e),""}}}function ul(){return new Date().toISOString().substring(0,10)}function wm(n,t=bm){const e=[];let r=n.slice();for(const i of n){const o=e.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),cl(e)>t){o.dates.pop();break}}else if(e.push({agent:i.agent,dates:[i.date]}),cl(e)>t){e.pop();break}r=r.slice(1)}return{heartbeatsToSend:e,unsentEntries:r}}class Am{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gg()?mg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await _m(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return ll(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const i=await this.read();return ll(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function cl(n){return fi(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(n){yr(new En("platform-logger",t=>new Bg(t),"PRIVATE")),yr(new En("heartbeat",t=>new Tm(t),"PRIVATE")),Be(Vo,sl,n),Be(Vo,sl,"esm2017"),Be("fire-js","")}Om("");var fl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Je,lc;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,E){function x(){}x.prototype=E.prototype,I.D=E.prototype,I.prototype=new x,I.prototype.constructor=I,I.C=function(O,T,R){for(var S=Array(arguments.length-2),L=2;L<arguments.length;L++)S[L-2]=arguments[L];return E.prototype[T].apply(O,S)}}function e(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,e),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,E,x){x||(x=0);var O=Array(16);if(typeof E=="string")for(var T=0;16>T;++T)O[T]=E.charCodeAt(x++)|E.charCodeAt(x++)<<8|E.charCodeAt(x++)<<16|E.charCodeAt(x++)<<24;else for(T=0;16>T;++T)O[T]=E[x++]|E[x++]<<8|E[x++]<<16|E[x++]<<24;E=I.g[0],x=I.g[1],T=I.g[2];var R=I.g[3],S=E+(R^x&(T^R))+O[0]+3614090360&4294967295;E=x+(S<<7&4294967295|S>>>25),S=R+(T^E&(x^T))+O[1]+3905402710&4294967295,R=E+(S<<12&4294967295|S>>>20),S=T+(x^R&(E^x))+O[2]+606105819&4294967295,T=R+(S<<17&4294967295|S>>>15),S=x+(E^T&(R^E))+O[3]+3250441966&4294967295,x=T+(S<<22&4294967295|S>>>10),S=E+(R^x&(T^R))+O[4]+4118548399&4294967295,E=x+(S<<7&4294967295|S>>>25),S=R+(T^E&(x^T))+O[5]+1200080426&4294967295,R=E+(S<<12&4294967295|S>>>20),S=T+(x^R&(E^x))+O[6]+2821735955&4294967295,T=R+(S<<17&4294967295|S>>>15),S=x+(E^T&(R^E))+O[7]+4249261313&4294967295,x=T+(S<<22&4294967295|S>>>10),S=E+(R^x&(T^R))+O[8]+1770035416&4294967295,E=x+(S<<7&4294967295|S>>>25),S=R+(T^E&(x^T))+O[9]+2336552879&4294967295,R=E+(S<<12&4294967295|S>>>20),S=T+(x^R&(E^x))+O[10]+4294925233&4294967295,T=R+(S<<17&4294967295|S>>>15),S=x+(E^T&(R^E))+O[11]+2304563134&4294967295,x=T+(S<<22&4294967295|S>>>10),S=E+(R^x&(T^R))+O[12]+1804603682&4294967295,E=x+(S<<7&4294967295|S>>>25),S=R+(T^E&(x^T))+O[13]+4254626195&4294967295,R=E+(S<<12&4294967295|S>>>20),S=T+(x^R&(E^x))+O[14]+2792965006&4294967295,T=R+(S<<17&4294967295|S>>>15),S=x+(E^T&(R^E))+O[15]+1236535329&4294967295,x=T+(S<<22&4294967295|S>>>10),S=E+(T^R&(x^T))+O[1]+4129170786&4294967295,E=x+(S<<5&4294967295|S>>>27),S=R+(x^T&(E^x))+O[6]+3225465664&4294967295,R=E+(S<<9&4294967295|S>>>23),S=T+(E^x&(R^E))+O[11]+643717713&4294967295,T=R+(S<<14&4294967295|S>>>18),S=x+(R^E&(T^R))+O[0]+3921069994&4294967295,x=T+(S<<20&4294967295|S>>>12),S=E+(T^R&(x^T))+O[5]+3593408605&4294967295,E=x+(S<<5&4294967295|S>>>27),S=R+(x^T&(E^x))+O[10]+38016083&4294967295,R=E+(S<<9&4294967295|S>>>23),S=T+(E^x&(R^E))+O[15]+3634488961&4294967295,T=R+(S<<14&4294967295|S>>>18),S=x+(R^E&(T^R))+O[4]+3889429448&4294967295,x=T+(S<<20&4294967295|S>>>12),S=E+(T^R&(x^T))+O[9]+568446438&4294967295,E=x+(S<<5&4294967295|S>>>27),S=R+(x^T&(E^x))+O[14]+3275163606&4294967295,R=E+(S<<9&4294967295|S>>>23),S=T+(E^x&(R^E))+O[3]+4107603335&4294967295,T=R+(S<<14&4294967295|S>>>18),S=x+(R^E&(T^R))+O[8]+1163531501&4294967295,x=T+(S<<20&4294967295|S>>>12),S=E+(T^R&(x^T))+O[13]+2850285829&4294967295,E=x+(S<<5&4294967295|S>>>27),S=R+(x^T&(E^x))+O[2]+4243563512&4294967295,R=E+(S<<9&4294967295|S>>>23),S=T+(E^x&(R^E))+O[7]+1735328473&4294967295,T=R+(S<<14&4294967295|S>>>18),S=x+(R^E&(T^R))+O[12]+2368359562&4294967295,x=T+(S<<20&4294967295|S>>>12),S=E+(x^T^R)+O[5]+4294588738&4294967295,E=x+(S<<4&4294967295|S>>>28),S=R+(E^x^T)+O[8]+2272392833&4294967295,R=E+(S<<11&4294967295|S>>>21),S=T+(R^E^x)+O[11]+1839030562&4294967295,T=R+(S<<16&4294967295|S>>>16),S=x+(T^R^E)+O[14]+4259657740&4294967295,x=T+(S<<23&4294967295|S>>>9),S=E+(x^T^R)+O[1]+2763975236&4294967295,E=x+(S<<4&4294967295|S>>>28),S=R+(E^x^T)+O[4]+1272893353&4294967295,R=E+(S<<11&4294967295|S>>>21),S=T+(R^E^x)+O[7]+4139469664&4294967295,T=R+(S<<16&4294967295|S>>>16),S=x+(T^R^E)+O[10]+3200236656&4294967295,x=T+(S<<23&4294967295|S>>>9),S=E+(x^T^R)+O[13]+681279174&4294967295,E=x+(S<<4&4294967295|S>>>28),S=R+(E^x^T)+O[0]+3936430074&4294967295,R=E+(S<<11&4294967295|S>>>21),S=T+(R^E^x)+O[3]+3572445317&4294967295,T=R+(S<<16&4294967295|S>>>16),S=x+(T^R^E)+O[6]+76029189&4294967295,x=T+(S<<23&4294967295|S>>>9),S=E+(x^T^R)+O[9]+3654602809&4294967295,E=x+(S<<4&4294967295|S>>>28),S=R+(E^x^T)+O[12]+3873151461&4294967295,R=E+(S<<11&4294967295|S>>>21),S=T+(R^E^x)+O[15]+530742520&4294967295,T=R+(S<<16&4294967295|S>>>16),S=x+(T^R^E)+O[2]+3299628645&4294967295,x=T+(S<<23&4294967295|S>>>9),S=E+(T^(x|~R))+O[0]+4096336452&4294967295,E=x+(S<<6&4294967295|S>>>26),S=R+(x^(E|~T))+O[7]+1126891415&4294967295,R=E+(S<<10&4294967295|S>>>22),S=T+(E^(R|~x))+O[14]+2878612391&4294967295,T=R+(S<<15&4294967295|S>>>17),S=x+(R^(T|~E))+O[5]+4237533241&4294967295,x=T+(S<<21&4294967295|S>>>11),S=E+(T^(x|~R))+O[12]+1700485571&4294967295,E=x+(S<<6&4294967295|S>>>26),S=R+(x^(E|~T))+O[3]+2399980690&4294967295,R=E+(S<<10&4294967295|S>>>22),S=T+(E^(R|~x))+O[10]+4293915773&4294967295,T=R+(S<<15&4294967295|S>>>17),S=x+(R^(T|~E))+O[1]+2240044497&4294967295,x=T+(S<<21&4294967295|S>>>11),S=E+(T^(x|~R))+O[8]+1873313359&4294967295,E=x+(S<<6&4294967295|S>>>26),S=R+(x^(E|~T))+O[15]+4264355552&4294967295,R=E+(S<<10&4294967295|S>>>22),S=T+(E^(R|~x))+O[6]+2734768916&4294967295,T=R+(S<<15&4294967295|S>>>17),S=x+(R^(T|~E))+O[13]+1309151649&4294967295,x=T+(S<<21&4294967295|S>>>11),S=E+(T^(x|~R))+O[4]+4149444226&4294967295,E=x+(S<<6&4294967295|S>>>26),S=R+(x^(E|~T))+O[11]+3174756917&4294967295,R=E+(S<<10&4294967295|S>>>22),S=T+(E^(R|~x))+O[2]+718787259&4294967295,T=R+(S<<15&4294967295|S>>>17),S=x+(R^(T|~E))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(T+(S<<21&4294967295|S>>>11))&4294967295,I.g[2]=I.g[2]+T&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.u=function(I,E){E===void 0&&(E=I.length);for(var x=E-this.blockSize,O=this.B,T=this.h,R=0;R<E;){if(T==0)for(;R<=x;)i(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<E;)if(O[T++]=I.charCodeAt(R++),T==this.blockSize){i(this,O),T=0;break}}else for(;R<E;)if(O[T++]=I[R++],T==this.blockSize){i(this,O),T=0;break}}this.h=T,this.o+=E},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;var x=8*this.o;for(E=I.length-8;E<I.length;++E)I[E]=x&255,x/=256;for(this.u(I),I=Array(16),E=x=0;4>E;++E)for(var O=0;32>O;O+=8)I[x++]=this.g[E]>>>O&255;return I};function o(I,E){var x=l;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=E(I)}function s(I,E){this.h=E;for(var x=[],O=!0,T=I.length-1;0<=T;T--){var R=I[T]|0;O&&R==E||(x[T]=R,O=!1)}this.g=x}var l={};function u(I){return-128<=I&&128>I?o(I,function(E){return new s([E|0],0>E?-1:0)}):new s([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return g(c(-I));for(var E=[],x=1,O=0;I>=x;O++)E[O]=I/x|0,x*=4294967296;return new s(E,0)}function d(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return g(d(I.substring(1),E));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(E,8)),O=h,T=0;T<I.length;T+=8){var R=Math.min(8,I.length-T),S=parseInt(I.substring(T,T+R),E);8>R?(R=c(Math.pow(E,R)),O=O.j(R).add(c(S))):(O=O.j(x),O=O.add(c(S)))}return O}var h=u(0),f=u(1),p=u(16777216);n=s.prototype,n.m=function(){if(_(this))return-g(this).m();for(var I=0,E=1,x=0;x<this.g.length;x++){var O=this.i(x);I+=(0<=O?O:4294967296+O)*E,E*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(m(this))return"0";if(_(this))return"-"+g(this).toString(I);for(var E=c(Math.pow(I,6)),x=this,O="";;){var T=y(x,E).g;x=v(x,T.j(E));var R=((0<x.g.length?x.g[0]:x.h)>>>0).toString(I);if(x=T,m(x))return R+O;for(;6>R.length;)R="0"+R;O=R+O}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function m(I){if(I.h!=0)return!1;for(var E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function _(I){return I.h==-1}n.l=function(I){return I=v(this,I),_(I)?-1:m(I)?0:1};function g(I){for(var E=I.g.length,x=[],O=0;O<E;O++)x[O]=~I.g[O];return new s(x,~I.h).add(f)}n.abs=function(){return _(this)?g(this):this},n.add=function(I){for(var E=Math.max(this.g.length,I.g.length),x=[],O=0,T=0;T<=E;T++){var R=O+(this.i(T)&65535)+(I.i(T)&65535),S=(R>>>16)+(this.i(T)>>>16)+(I.i(T)>>>16);O=S>>>16,R&=65535,S&=65535,x[T]=S<<16|R}return new s(x,x[x.length-1]&-2147483648?-1:0)};function v(I,E){return I.add(g(E))}n.j=function(I){if(m(this)||m(I))return h;if(_(this))return _(I)?g(this).j(g(I)):g(g(this).j(I));if(_(I))return g(this.j(g(I)));if(0>this.l(p)&&0>I.l(p))return c(this.m()*I.m());for(var E=this.g.length+I.g.length,x=[],O=0;O<2*E;O++)x[O]=0;for(O=0;O<this.g.length;O++)for(var T=0;T<I.g.length;T++){var R=this.i(O)>>>16,S=this.i(O)&65535,L=I.i(T)>>>16,B=I.i(T)&65535;x[2*O+2*T]+=S*B,b(x,2*O+2*T),x[2*O+2*T+1]+=R*B,b(x,2*O+2*T+1),x[2*O+2*T+1]+=S*L,b(x,2*O+2*T+1),x[2*O+2*T+2]+=R*L,b(x,2*O+2*T+2)}for(O=0;O<E;O++)x[O]=x[2*O+1]<<16|x[2*O];for(O=E;O<2*E;O++)x[O]=0;return new s(x,0)};function b(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function A(I,E){this.g=I,this.h=E}function y(I,E){if(m(E))throw Error("division by zero");if(m(I))return new A(h,h);if(_(I))return E=y(g(I),E),new A(g(E.g),g(E.h));if(_(E))return E=y(I,g(E)),new A(g(E.g),E.h);if(30<I.g.length){if(_(I)||_(E))throw Error("slowDivide_ only works with positive integers.");for(var x=f,O=E;0>=O.l(I);)x=P(x),O=P(O);var T=C(x,1),R=C(O,1);for(O=C(O,2),x=C(x,2);!m(O);){var S=R.add(O);0>=S.l(I)&&(T=T.add(x),R=S),O=C(O,1),x=C(x,1)}return E=v(I,T.j(E)),new A(T,E)}for(T=h;0<=I.l(E);){for(x=Math.max(1,Math.floor(I.m()/E.m())),O=Math.ceil(Math.log(x)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),R=c(x),S=R.j(E);_(S)||0<S.l(I);)x-=O,R=c(x),S=R.j(E);m(R)&&(R=f),T=T.add(R),I=v(I,S)}return new A(T,I)}n.A=function(I){return y(this,I).h},n.and=function(I){for(var E=Math.max(this.g.length,I.g.length),x=[],O=0;O<E;O++)x[O]=this.i(O)&I.i(O);return new s(x,this.h&I.h)},n.or=function(I){for(var E=Math.max(this.g.length,I.g.length),x=[],O=0;O<E;O++)x[O]=this.i(O)|I.i(O);return new s(x,this.h|I.h)},n.xor=function(I){for(var E=Math.max(this.g.length,I.g.length),x=[],O=0;O<E;O++)x[O]=this.i(O)^I.i(O);return new s(x,this.h^I.h)};function P(I){for(var E=I.g.length+1,x=[],O=0;O<E;O++)x[O]=I.i(O)<<1|I.i(O-1)>>>31;return new s(x,I.h)}function C(I,E){var x=E>>5;E%=32;for(var O=I.g.length-x,T=[],R=0;R<O;R++)T[R]=0<E?I.i(R+x)>>>E|I.i(R+x+1)<<32-E:I.i(R+x);return new s(T,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lc=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=d,Je=s}).apply(typeof fl<"u"?fl:typeof self<"u"?self:typeof window<"u"?window:{});var Xr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var uc,cc,lr,fc,oi,Fo,hc,dc,pc;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,w,k){return a==Array.prototype||a==Object.prototype||(a[w]=k.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xr=="object"&&Xr];for(var w=0;w<a.length;++w){var k=a[w];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=e(this);function i(a,w){if(w)t:{var k=r;a=a.split(".");for(var D=0;D<a.length-1;D++){var G=a[D];if(!(G in k))break t;k=k[G]}a=a[a.length-1],D=k[a],w=w(D),w!=D&&w!=null&&t(k,a,{configurable:!0,writable:!0,value:w})}}function o(a,w){a instanceof String&&(a+="");var k=0,D=!1,G={next:function(){if(!D&&k<a.length){var X=k++;return{value:w(X,a[X]),done:!1}}return D=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(a){return a||function(){return o(this,function(w,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function u(a){var w=typeof a;return w=w!="object"?w:a?Array.isArray(a)?"array":w:"null",w=="array"||w=="object"&&typeof a.length=="number"}function c(a){var w=typeof a;return w=="object"&&a!=null||w=="function"}function d(a,w,k){return a.call.apply(a.bind,arguments)}function h(a,w,k){if(!a)throw Error();if(2<arguments.length){var D=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,D),a.apply(w,G)}}return function(){return a.apply(w,arguments)}}function f(a,w,k){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function p(a,w){var k=Array.prototype.slice.call(arguments,1);return function(){var D=k.slice();return D.push.apply(D,arguments),a.apply(this,D)}}function m(a,w){function k(){}k.prototype=w.prototype,a.aa=w.prototype,a.prototype=new k,a.prototype.constructor=a,a.Qb=function(D,G,X){for(var st=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)st[Ct-2]=arguments[Ct];return w.prototype[G].apply(D,st)}}function _(a){const w=a.length;if(0<w){const k=Array(w);for(let D=0;D<w;D++)k[D]=a[D];return k}return[]}function g(a,w){for(let k=1;k<arguments.length;k++){const D=arguments[k];if(u(D)){const G=a.length||0,X=D.length||0;a.length=G+X;for(let st=0;st<X;st++)a[G+st]=D[st]}else a.push(D)}}class v{constructor(w,k){this.i=w,this.j=k,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function b(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function y(a){return y[" "](a),a}y[" "]=function(){};var P=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function C(a,w,k){for(const D in a)w.call(k,a[D],D,a)}function I(a,w){for(const k in a)w.call(void 0,a[k],k,a)}function E(a){const w={};for(const k in a)w[k]=a[k];return w}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(a,w){let k,D;for(let G=1;G<arguments.length;G++){D=arguments[G];for(k in D)a[k]=D[k];for(let X=0;X<x.length;X++)k=x[X],Object.prototype.hasOwnProperty.call(D,k)&&(a[k]=D[k])}}function T(a){var w=1;a=a.split(":");const k=[];for(;0<w&&a.length;)k.push(a.shift()),w--;return a.length&&k.push(a.join(":")),k}function R(a){l.setTimeout(()=>{throw a},0)}function S(){var a=U;let w=null;return a.g&&(w=a.g,a.g=a.g.next,a.g||(a.h=null),w.next=null),w}class L{constructor(){this.h=this.g=null}add(w,k){const D=B.get();D.set(w,k),this.h?this.h.next=D:this.g=D,this.h=D}}var B=new v(()=>new $,a=>a.reset());class ${constructor(){this.next=this.g=this.h=null}set(w,k){this.h=w,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let z,Y=!1,U=new L,F=()=>{const a=l.Promise.resolve(void 0);z=()=>{a.then(N)}};var N=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(k){R(k)}var w=B;w.j(a),100>w.h&&(w.h++,a.next=w.g,w.g=a)}Y=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(a,w){this.type=a,this.g=this.target=w,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,w=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const k=()=>{};l.addEventListener("test",k,w),l.removeEventListener("test",k,w)}catch{}return a}();function H(a,w){if(j.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var k=this.type=a.type,D=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=w,w=a.relatedTarget){if(P){t:{try{y(w.nodeName);var G=!0;break t}catch{}G=!1}G||(w=null)}}else k=="mouseover"?w=a.fromElement:k=="mouseout"&&(w=a.toElement);this.relatedTarget=w,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:M[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&H.aa.h.call(this)}}m(H,j);var M={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var q="closure_listenable_"+(1e6*Math.random()|0),Q=0;function W(a,w,k,D,G){this.listener=a,this.proxy=null,this.src=w,this.type=k,this.capture=!!D,this.ha=G,this.key=++Q,this.da=this.fa=!1}function J(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ot(a){this.src=a,this.g={},this.h=0}ot.prototype.add=function(a,w,k,D,G){var X=a.toString();a=this.g[X],a||(a=this.g[X]=[],this.h++);var st=pt(a,w,D,G);return-1<st?(w=a[st],k||(w.fa=!1)):(w=new W(w,this.src,X,!!D,G),w.fa=k,a.push(w)),w};function ut(a,w){var k=w.type;if(k in a.g){var D=a.g[k],G=Array.prototype.indexOf.call(D,w,void 0),X;(X=0<=G)&&Array.prototype.splice.call(D,G,1),X&&(J(w),a.g[k].length==0&&(delete a.g[k],a.h--))}}function pt(a,w,k,D){for(var G=0;G<a.length;++G){var X=a[G];if(!X.da&&X.listener==w&&X.capture==!!k&&X.ha==D)return G}return-1}var yt="closure_lm_"+(1e6*Math.random()|0),ht={};function Bt(a,w,k,D,G){if(D&&D.once)return tt(a,w,k,D,G);if(Array.isArray(w)){for(var X=0;X<w.length;X++)Bt(a,w[X],k,D,G);return null}return k=mt(k),a&&a[q]?a.K(w,k,c(D)?!!D.capture:!!D,G):kt(a,w,k,!1,D,G)}function kt(a,w,k,D,G,X){if(!w)throw Error("Invalid event type");var st=c(G)?!!G.capture:!!G,Ct=_t(a);if(Ct||(a[yt]=Ct=new ot(a)),k=Ct.add(w,k,D,st,X),k.proxy)return k;if(D=Z(),k.proxy=D,D.src=a,D.listener=k,a.addEventListener)K||(G=st),G===void 0&&(G=!1),a.addEventListener(w.toString(),D,G);else if(a.attachEvent)a.attachEvent(et(w.toString()),D);else if(a.addListener&&a.removeListener)a.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return k}function Z(){function a(k){return w.call(a.src,a.listener,k)}const w=wt;return a}function tt(a,w,k,D,G){if(Array.isArray(w)){for(var X=0;X<w.length;X++)tt(a,w[X],k,D,G);return null}return k=mt(k),a&&a[q]?a.L(w,k,c(D)?!!D.capture:!!D,G):kt(a,w,k,!0,D,G)}function at(a,w,k,D,G){if(Array.isArray(w))for(var X=0;X<w.length;X++)at(a,w[X],k,D,G);else D=c(D)?!!D.capture:!!D,k=mt(k),a&&a[q]?(a=a.i,w=String(w).toString(),w in a.g&&(X=a.g[w],k=pt(X,k,D,G),-1<k&&(J(X[k]),Array.prototype.splice.call(X,k,1),X.length==0&&(delete a.g[w],a.h--)))):a&&(a=_t(a))&&(w=a.g[w.toString()],a=-1,w&&(a=pt(w,k,D,G)),(k=-1<a?w[a]:null)&&lt(k))}function lt(a){if(typeof a!="number"&&a&&!a.da){var w=a.src;if(w&&w[q])ut(w.i,a);else{var k=a.type,D=a.proxy;w.removeEventListener?w.removeEventListener(k,D,a.capture):w.detachEvent?w.detachEvent(et(k),D):w.addListener&&w.removeListener&&w.removeListener(D),(k=_t(w))?(ut(k,a),k.h==0&&(k.src=null,w[yt]=null)):J(a)}}}function et(a){return a in ht?ht[a]:ht[a]="on"+a}function wt(a,w){if(a.da)a=!0;else{w=new H(w,this);var k=a.listener,D=a.ha||a.src;a.fa&&lt(a),a=k.call(D,w)}return a}function _t(a){return a=a[yt],a instanceof ot?a:null}var Tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function mt(a){return typeof a=="function"?a:(a[Tt]||(a[Tt]=function(w){return a.handleEvent(w)}),a[Tt])}function Rt(){V.call(this),this.i=new ot(this),this.M=this,this.F=null}m(Rt,V),Rt.prototype[q]=!0,Rt.prototype.removeEventListener=function(a,w,k,D){at(this,a,w,k,D)};function At(a,w){var k,D=a.F;if(D)for(k=[];D;D=D.F)k.push(D);if(a=a.M,D=w.type||w,typeof w=="string")w=new j(w,a);else if(w instanceof j)w.target=w.target||a;else{var G=w;w=new j(D,a),O(w,G)}if(G=!0,k)for(var X=k.length-1;0<=X;X--){var st=w.g=k[X];G=cn(st,D,!0,w)&&G}if(st=w.g=a,G=cn(st,D,!0,w)&&G,G=cn(st,D,!1,w)&&G,k)for(X=0;X<k.length;X++)st=w.g=k[X],G=cn(st,D,!1,w)&&G}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var a=this.i,w;for(w in a.g){for(var k=a.g[w],D=0;D<k.length;D++)J(k[D]);delete a.g[w],a.h--}}this.F=null},Rt.prototype.K=function(a,w,k,D){return this.i.add(String(a),w,!1,k,D)},Rt.prototype.L=function(a,w,k,D){return this.i.add(String(a),w,!0,k,D)};function cn(a,w,k,D){if(w=a.i.g[String(w)],!w)return!0;w=w.concat();for(var G=!0,X=0;X<w.length;++X){var st=w[X];if(st&&!st.da&&st.capture==k){var Ct=st.listener,Qt=st.ha||st.src;st.fa&&ut(a.i,st),G=Ct.call(Qt,D)!==!1&&G}}return G&&!D.defaultPrevented}function Vt(a,w,k){if(typeof a=="function")k&&(a=f(a,k));else if(a&&typeof a.handleEvent=="function")a=f(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:l.setTimeout(a,w||0)}function he(a){a.g=Vt(()=>{a.g=null,a.i&&(a.i=!1,he(a))},a.l);const w=a.h;a.h=null,a.m.apply(null,w)}class ch extends V{constructor(w,k){super(),this.m=w,this.l=k,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:he(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $n(a){V.call(this),this.h=a,this.g={}}m($n,V);var Zs=[];function Js(a){C(a.g,function(w,k){this.g.hasOwnProperty(k)&&lt(w)},a),a.g={}}$n.prototype.N=function(){$n.aa.N.call(this),Js(this)},$n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wi=l.JSON.stringify,fh=l.JSON.parse,hh=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Qi(){}Qi.prototype.h=null;function ta(a){return a.h||(a.h=a.i())}function ea(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xi(){j.call(this,"d")}m(Xi,j);function Yi(){j.call(this,"c")}m(Yi,j);var He={},na=null;function Dr(){return na=na||new Rt}He.La="serverreachability";function ra(a){j.call(this,He.La,a)}m(ra,j);function Hn(a){const w=Dr();At(w,new ra(w))}He.STAT_EVENT="statevent";function ia(a,w){j.call(this,He.STAT_EVENT,a),this.stat=w}m(ia,j);function oe(a){const w=Dr();At(w,new ia(w,a))}He.Ma="timingevent";function oa(a,w){j.call(this,He.Ma,a),this.size=w}m(oa,j);function Kn(a,w){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},w)}function Gn(){this.g=!0}Gn.prototype.xa=function(){this.g=!1};function dh(a,w,k,D,G,X){a.info(function(){if(a.g)if(X)for(var st="",Ct=X.split("&"),Qt=0;Qt<Ct.length;Qt++){var Pt=Ct[Qt].split("=");if(1<Pt.length){var te=Pt[0];Pt=Pt[1];var ee=te.split("_");st=2<=ee.length&&ee[1]=="type"?st+(te+"="+Pt+"&"):st+(te+"=redacted&")}}else st=null;else st=X;return"XMLHTTP REQ ("+D+") [attempt "+G+"]: "+w+`
`+k+`
`+st})}function ph(a,w,k,D,G,X,st){a.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+G+"]: "+w+`
`+k+`
`+X+" "+st})}function fn(a,w,k,D){a.info(function(){return"XMLHTTP TEXT ("+w+"): "+mh(a,k)+(D?" "+D:"")})}function gh(a,w){a.info(function(){return"TIMEOUT: "+w})}Gn.prototype.info=function(){};function mh(a,w){if(!a.g)return w;if(!w)return null;try{var k=JSON.parse(w);if(k){for(a=0;a<k.length;a++)if(Array.isArray(k[a])){var D=k[a];if(!(2>D.length)){var G=D[1];if(Array.isArray(G)&&!(1>G.length)){var X=G[0];if(X!="noop"&&X!="stop"&&X!="close")for(var st=1;st<G.length;st++)G[st]=""}}}}return Wi(k)}catch{return w}}var Lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function Mr(){}m(Mr,Qi),Mr.prototype.g=function(){return new XMLHttpRequest},Mr.prototype.i=function(){return{}},Zi=new Mr;function Ce(a,w,k,D){this.j=a,this.i=w,this.l=k,this.R=D||1,this.U=new $n(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new aa}function aa(){this.i=null,this.g="",this.h=!1}var la={},Ji={};function to(a,w,k){a.L=1,a.v=Fr(we(w)),a.m=k,a.P=!0,ua(a,null)}function ua(a,w){a.F=Date.now(),Vr(a),a.A=we(a.v);var k=a.A,D=a.R;Array.isArray(D)||(D=[String(D)]),wa(k.i,"t",D),a.C=0,k=a.j.J,a.h=new aa,a.g=qa(a.j,k?w:null,!a.m),0<a.O&&(a.M=new ch(f(a.Y,a,a.g),a.O)),w=a.U,k=a.g,D=a.ca;var G="readystatechange";Array.isArray(G)||(G&&(Zs[0]=G.toString()),G=Zs);for(var X=0;X<G.length;X++){var st=Bt(k,G[X],D||w.handleEvent,!1,w.h||w);if(!st)break;w.g[st.key]=st}w=a.H?E(a.H):{},a.m?(a.u||(a.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,w)):(a.u="GET",a.g.ea(a.A,a.u,null,w)),Hn(),dh(a.i,a.u,a.A,a.l,a.R,a.m)}Ce.prototype.ca=function(a){a=a.target;const w=this.M;w&&Ae(a)==3?w.j():this.Y(a)},Ce.prototype.Y=function(a){try{if(a==this.g)t:{const ee=Ae(this.g);var w=this.g.Ba();const pn=this.g.Z();if(!(3>ee)&&(ee!=3||this.g&&(this.h.h||this.g.oa()||xa(this.g)))){this.J||ee!=4||w==7||(w==8||0>=pn?Hn(3):Hn(2)),eo(this);var k=this.g.Z();this.X=k;e:if(ca(this)){var D=xa(this.g);a="";var G=D.length,X=Ae(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ke(this),Wn(this);var st="";break e}this.h.i=new l.TextDecoder}for(w=0;w<G;w++)this.h.h=!0,a+=this.h.i.decode(D[w],{stream:!(X&&w==G-1)});D.length=0,this.h.g+=a,this.C=0,st=this.h.g}else st=this.g.oa();if(this.o=k==200,ph(this.i,this.u,this.A,this.l,this.R,ee,k),this.o){if(this.T&&!this.K){e:{if(this.g){var Ct,Qt=this.g;if((Ct=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Ct)){var Pt=Ct;break e}}Pt=null}if(k=Pt)fn(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,no(this,k);else{this.o=!1,this.s=3,oe(12),Ke(this),Wn(this);break t}}if(this.P){k=!0;let de;for(;!this.J&&this.C<st.length;)if(de=yh(this,st),de==Ji){ee==4&&(this.s=4,oe(14),k=!1),fn(this.i,this.l,null,"[Incomplete Response]");break}else if(de==la){this.s=4,oe(15),fn(this.i,this.l,st,"[Invalid Chunk]"),k=!1;break}else fn(this.i,this.l,de,null),no(this,de);if(ca(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||st.length!=0||this.h.h||(this.s=1,oe(16),k=!1),this.o=this.o&&k,!k)fn(this.i,this.l,st,"[Invalid Chunked Response]"),Ke(this),Wn(this);else if(0<st.length&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.ba&&!te.M&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+st.length),lo(te),te.M=!0,oe(11))}}else fn(this.i,this.l,st,null),no(this,st);ee==4&&Ke(this),this.o&&!this.J&&(ee==4?Va(this.j,this):(this.o=!1,Vr(this)))}else Dh(this.g),k==400&&0<st.indexOf("Unknown SID")?(this.s=3,oe(12)):(this.s=0,oe(13)),Ke(this),Wn(this)}}}catch{}finally{}};function ca(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function yh(a,w){var k=a.C,D=w.indexOf(`
`,k);return D==-1?Ji:(k=Number(w.substring(k,D)),isNaN(k)?la:(D+=1,D+k>w.length?Ji:(w=w.slice(D,D+k),a.C=D+k,w)))}Ce.prototype.cancel=function(){this.J=!0,Ke(this)};function Vr(a){a.S=Date.now()+a.I,fa(a,a.I)}function fa(a,w){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Kn(f(a.ba,a),w)}function eo(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Ce.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(gh(this.i,this.A),this.L!=2&&(Hn(),oe(17)),Ke(this),this.s=2,Wn(this)):fa(this,this.S-a)};function Wn(a){a.j.G==0||a.J||Va(a.j,a)}function Ke(a){eo(a);var w=a.M;w&&typeof w.ma=="function"&&w.ma(),a.M=null,Js(a.U),a.g&&(w=a.g,a.g=null,w.abort(),w.ma())}function no(a,w){try{var k=a.j;if(k.G!=0&&(k.g==a||ro(k.h,a))){if(!a.K&&ro(k.h,a)&&k.G==3){try{var D=k.Da.g.parse(w)}catch{D=null}if(Array.isArray(D)&&D.length==3){var G=D;if(G[0]==0){t:if(!k.u){if(k.g)if(k.g.F+3e3<a.F)Hr(k),$r(k);else break t;ao(k),oe(18)}}else k.za=G[1],0<k.za-k.T&&37500>G[2]&&k.F&&k.v==0&&!k.C&&(k.C=Kn(f(k.Za,k),6e3));if(1>=pa(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else We(k,11)}else if((a.K||k.g==a)&&Hr(k),!b(w))for(G=k.Da.g.parse(w),w=0;w<G.length;w++){let Pt=G[w];if(k.T=Pt[0],Pt=Pt[1],k.G==2)if(Pt[0]=="c"){k.K=Pt[1],k.ia=Pt[2];const te=Pt[3];te!=null&&(k.la=te,k.j.info("VER="+k.la));const ee=Pt[4];ee!=null&&(k.Aa=ee,k.j.info("SVER="+k.Aa));const pn=Pt[5];pn!=null&&typeof pn=="number"&&0<pn&&(D=1.5*pn,k.L=D,k.j.info("backChannelRequestTimeoutMs_="+D)),D=k;const de=a.g;if(de){const Gr=de.g?de.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gr){var X=D.h;X.g||Gr.indexOf("spdy")==-1&&Gr.indexOf("quic")==-1&&Gr.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(io(X,X.h),X.h=null))}if(D.D){const uo=de.g?de.g.getResponseHeader("X-HTTP-Session-Id"):null;uo&&(D.ya=uo,Dt(D.I,D.D,uo))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-a.F,k.j.info("Handshake RTT: "+k.R+"ms")),D=k;var st=a;if(D.qa=Fa(D,D.J?D.ia:null,D.W),st.K){ga(D.h,st);var Ct=st,Qt=D.L;Qt&&(Ct.I=Qt),Ct.B&&(eo(Ct),Vr(Ct)),D.g=st}else La(D);0<k.i.length&&zr(k)}else Pt[0]!="stop"&&Pt[0]!="close"||We(k,7);else k.G==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?We(k,7):so(k):Pt[0]!="noop"&&k.l&&k.l.ta(Pt),k.v=0)}}Hn(4)}catch{}}var vh=class{constructor(a,w){this.g=a,this.map=w}};function ha(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function da(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function pa(a){return a.h?1:a.g?a.g.size:0}function ro(a,w){return a.h?a.h==w:a.g?a.g.has(w):!1}function io(a,w){a.g?a.g.add(w):a.h=w}function ga(a,w){a.h&&a.h==w?a.h=null:a.g&&a.g.has(w)&&a.g.delete(w)}ha.prototype.cancel=function(){if(this.i=ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ma(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let w=a.i;for(const k of a.g.values())w=w.concat(k.D);return w}return _(a.i)}function _h(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var w=[],k=a.length,D=0;D<k;D++)w.push(a[D]);return w}w=[],k=0;for(D in a)w[k++]=a[D];return w}function bh(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var w=[];a=a.length;for(var k=0;k<a;k++)w.push(k);return w}w=[],k=0;for(const D in a)w[k++]=D;return w}}}function ya(a,w){if(a.forEach&&typeof a.forEach=="function")a.forEach(w,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,w,void 0);else for(var k=bh(a),D=_h(a),G=D.length,X=0;X<G;X++)w.call(void 0,D[X],k&&k[X],a)}var va=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eh(a,w){if(a){a=a.split("&");for(var k=0;k<a.length;k++){var D=a[k].indexOf("="),G=null;if(0<=D){var X=a[k].substring(0,D);G=a[k].substring(D+1)}else X=a[k];w(X,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Ge(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Ge){this.h=a.h,jr(this,a.j),this.o=a.o,this.g=a.g,Br(this,a.s),this.l=a.l;var w=a.i,k=new Yn;k.i=w.i,w.g&&(k.g=new Map(w.g),k.h=w.h),_a(this,k),this.m=a.m}else a&&(w=String(a).match(va))?(this.h=!1,jr(this,w[1]||"",!0),this.o=Qn(w[2]||""),this.g=Qn(w[3]||"",!0),Br(this,w[4]),this.l=Qn(w[5]||"",!0),_a(this,w[6]||"",!0),this.m=Qn(w[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}Ge.prototype.toString=function(){var a=[],w=this.j;w&&a.push(Xn(w,ba,!0),":");var k=this.g;return(k||w=="file")&&(a.push("//"),(w=this.o)&&a.push(Xn(w,ba,!0),"@"),a.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&a.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&a.push("/"),a.push(Xn(k,k.charAt(0)=="/"?Ah:wh,!0))),(k=this.i.toString())&&a.push("?",k),(k=this.m)&&a.push("#",Xn(k,Ih)),a.join("")};function we(a){return new Ge(a)}function jr(a,w,k){a.j=k?Qn(w,!0):w,a.j&&(a.j=a.j.replace(/:$/,""))}function Br(a,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);a.s=w}else a.s=null}function _a(a,w,k){w instanceof Yn?(a.i=w,Rh(a.i,a.h)):(k||(w=Xn(w,Oh)),a.i=new Yn(w,a.h))}function Dt(a,w,k){a.i.set(w,k)}function Fr(a){return Dt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Qn(a,w){return a?w?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Xn(a,w,k){return typeof a=="string"?(a=encodeURI(a).replace(w,Th),k&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Th(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ba=/[#\/\?@]/g,wh=/[#\?:]/g,Ah=/[#\?]/g,Oh=/[#\?@]/g,Ih=/#/g;function Yn(a,w){this.h=this.g=null,this.i=a||null,this.j=!!w}function Ne(a){a.g||(a.g=new Map,a.h=0,a.i&&Eh(a.i,function(w,k){a.add(decodeURIComponent(w.replace(/\+/g," ")),k)}))}n=Yn.prototype,n.add=function(a,w){Ne(this),this.i=null,a=hn(this,a);var k=this.g.get(a);return k||this.g.set(a,k=[]),k.push(w),this.h+=1,this};function Ea(a,w){Ne(a),w=hn(a,w),a.g.has(w)&&(a.i=null,a.h-=a.g.get(w).length,a.g.delete(w))}function Ta(a,w){return Ne(a),w=hn(a,w),a.g.has(w)}n.forEach=function(a,w){Ne(this),this.g.forEach(function(k,D){k.forEach(function(G){a.call(w,G,D,this)},this)},this)},n.na=function(){Ne(this);const a=Array.from(this.g.values()),w=Array.from(this.g.keys()),k=[];for(let D=0;D<w.length;D++){const G=a[D];for(let X=0;X<G.length;X++)k.push(w[D])}return k},n.V=function(a){Ne(this);let w=[];if(typeof a=="string")Ta(this,a)&&(w=w.concat(this.g.get(hn(this,a))));else{a=Array.from(this.g.values());for(let k=0;k<a.length;k++)w=w.concat(a[k])}return w},n.set=function(a,w){return Ne(this),this.i=null,a=hn(this,a),Ta(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[w]),this.h+=1,this},n.get=function(a,w){return a?(a=this.V(a),0<a.length?String(a[0]):w):w};function wa(a,w,k){Ea(a,w),0<k.length&&(a.i=null,a.g.set(hn(a,w),_(k)),a.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],w=Array.from(this.g.keys());for(var k=0;k<w.length;k++){var D=w[k];const X=encodeURIComponent(String(D)),st=this.V(D);for(D=0;D<st.length;D++){var G=X;st[D]!==""&&(G+="="+encodeURIComponent(String(st[D]))),a.push(G)}}return this.i=a.join("&")};function hn(a,w){return w=String(w),a.j&&(w=w.toLowerCase()),w}function Rh(a,w){w&&!a.j&&(Ne(a),a.i=null,a.g.forEach(function(k,D){var G=D.toLowerCase();D!=G&&(Ea(this,D),wa(this,G,k))},a)),a.j=w}function Sh(a,w){const k=new Gn;if(l.Image){const D=new Image;D.onload=p(De,k,"TestLoadImage: loaded",!0,w,D),D.onerror=p(De,k,"TestLoadImage: error",!1,w,D),D.onabort=p(De,k,"TestLoadImage: abort",!1,w,D),D.ontimeout=p(De,k,"TestLoadImage: timeout",!1,w,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=a}else w(!1)}function Ph(a,w){const k=new Gn,D=new AbortController,G=setTimeout(()=>{D.abort(),De(k,"TestPingServer: timeout",!1,w)},1e4);fetch(a,{signal:D.signal}).then(X=>{clearTimeout(G),X.ok?De(k,"TestPingServer: ok",!0,w):De(k,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(G),De(k,"TestPingServer: error",!1,w)})}function De(a,w,k,D,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),D(k)}catch{}}function xh(){this.g=new hh}function kh(a,w,k){const D=k||"";try{ya(a,function(G,X){let st=G;c(G)&&(st=Wi(G)),w.push(D+X+"="+encodeURIComponent(st))})}catch(G){throw w.push(D+"type="+encodeURIComponent("_badmap")),G}}function Zn(a){this.l=a.Ub||null,this.j=a.eb||!1}m(Zn,Qi),Zn.prototype.g=function(){return new qr(this.l,this.j)},Zn.prototype.i=function(a){return function(){return a}}({});function qr(a,w){Rt.call(this),this.D=a,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(qr,Rt),n=qr.prototype,n.open=function(a,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=w,this.readyState=1,tr(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(w.body=a),(this.D||l).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,tr(this)),this.g&&(this.readyState=3,tr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Aa(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Aa(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var w=a.value?a.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!a.done}))&&(this.response=this.responseText+=w)}a.done?Jn(this):tr(this),this.readyState==3&&Aa(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Jn(this))},n.Qa=function(a){this.g&&(this.response=a,Jn(this))},n.ga=function(){this.g&&Jn(this)};function Jn(a){a.readyState=4,a.l=null,a.j=null,a.v=null,tr(a)}n.setRequestHeader=function(a,w){this.u.append(a,w)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],w=this.h.entries();for(var k=w.next();!k.done;)k=k.value,a.push(k[0]+": "+k[1]),k=w.next();return a.join(`\r
`)};function tr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Oa(a){let w="";return C(a,function(k,D){w+=D,w+=":",w+=k,w+=`\r
`}),w}function oo(a,w,k){t:{for(D in k){var D=!1;break t}D=!0}D||(k=Oa(k),typeof a=="string"?k!=null&&encodeURIComponent(String(k)):Dt(a,w,k))}function Ft(a){Rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(Ft,Rt);var Ch=/^https?$/i,Nh=["POST","PUT"];n=Ft.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,w,k,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);w=w?w.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?ta(this.o):ta(Zi),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(w,String(a),!0),this.B=!1}catch(X){Ia(this,X);return}if(a=k||"",k=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var G in D)k.set(G,D[G]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const X of D.keys())k.set(X,D.get(X));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(k.keys()).find(X=>X.toLowerCase()=="content-type"),G=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Nh,w,void 0))||D||G||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,st]of k)this.g.setRequestHeader(X,st);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pa(this),this.u=!0,this.g.send(a),this.u=!1}catch(X){Ia(this,X)}};function Ia(a,w){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=w,a.m=5,Ra(a),Ur(a)}function Ra(a){a.A||(a.A=!0,At(a,"complete"),At(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,At(this,"complete"),At(this,"abort"),Ur(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ur(this,!0)),Ft.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sa(this):this.bb())},n.bb=function(){Sa(this)};function Sa(a){if(a.h&&typeof s<"u"&&(!a.v[1]||Ae(a)!=4||a.Z()!=2)){if(a.u&&Ae(a)==4)Vt(a.Ea,0,a);else if(At(a,"readystatechange"),Ae(a)==4){a.h=!1;try{const st=a.Z();t:switch(st){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break t;default:w=!1}var k;if(!(k=w)){var D;if(D=st===0){var G=String(a.D).match(va)[1]||null;!G&&l.self&&l.self.location&&(G=l.self.location.protocol.slice(0,-1)),D=!Ch.test(G?G.toLowerCase():"")}k=D}if(k)At(a,"complete"),At(a,"success");else{a.m=6;try{var X=2<Ae(a)?a.g.statusText:""}catch{X=""}a.l=X+" ["+a.Z()+"]",Ra(a)}}finally{Ur(a)}}}}function Ur(a,w){if(a.g){Pa(a);const k=a.g,D=a.v[0]?()=>{}:null;a.g=null,a.v=null,w||At(a,"ready");try{k.onreadystatechange=D}catch{}}}function Pa(a){a.I&&(l.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function Ae(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<Ae(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var w=this.g.responseText;return a&&w.indexOf(a)==0&&(w=w.substring(a.length)),fh(w)}};function xa(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Dh(a){const w={};a=(a.g&&2<=Ae(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<a.length;D++){if(b(a[D]))continue;var k=T(a[D]);const G=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const X=w[G]||[];w[G]=X,X.push(k)}I(w,function(D){return D.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function er(a,w,k){return k&&k.internalChannelParams&&k.internalChannelParams[a]||w}function ka(a){this.Aa=0,this.i=[],this.j=new Gn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=er("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=er("baseRetryDelayMs",5e3,a),this.cb=er("retryDelaySeedMs",1e4,a),this.Wa=er("forwardChannelMaxRetries",2,a),this.wa=er("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ha(a&&a.concurrentRequestLimit),this.Da=new xh,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ka.prototype,n.la=8,n.G=1,n.connect=function(a,w,k,D){oe(0),this.W=a,this.H=w||{},k&&D!==void 0&&(this.H.OSID=k,this.H.OAID=D),this.F=this.X,this.I=Fa(this,null,this.W),zr(this)};function so(a){if(Ca(a),a.G==3){var w=a.U++,k=we(a.I);if(Dt(k,"SID",a.K),Dt(k,"RID",w),Dt(k,"TYPE","terminate"),nr(a,k),w=new Ce(a,a.j,w),w.L=2,w.v=Fr(we(k)),k=!1,l.navigator&&l.navigator.sendBeacon)try{k=l.navigator.sendBeacon(w.v.toString(),"")}catch{}!k&&l.Image&&(new Image().src=w.v,k=!0),k||(w.g=qa(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Vr(w)}Ba(a)}function $r(a){a.g&&(lo(a),a.g.cancel(),a.g=null)}function Ca(a){$r(a),a.u&&(l.clearTimeout(a.u),a.u=null),Hr(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function zr(a){if(!da(a.h)&&!a.s){a.s=!0;var w=a.Ga;z||F(),Y||(z(),Y=!0),U.add(w,a),a.B=0}}function Lh(a,w){return pa(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=w.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Kn(f(a.Ga,a,w),ja(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const G=new Ce(this,this.j,a);let X=this.o;if(this.S&&(X?(X=E(X),O(X,this.S)):X=this.S),this.m!==null||this.O||(G.H=X,X=null),this.P)t:{for(var w=0,k=0;k<this.i.length;k++){e:{var D=this.i[k];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break e}D=void 0}if(D===void 0)break;if(w+=D,4096<w){w=k;break t}if(w===4096||k===this.i.length-1){w=k+1;break t}}w=1e3}else w=1e3;w=Da(this,G,w),k=we(this.I),Dt(k,"RID",a),Dt(k,"CVER",22),this.D&&Dt(k,"X-HTTP-Session-Id",this.D),nr(this,k),X&&(this.O?w="headers="+encodeURIComponent(String(Oa(X)))+"&"+w:this.m&&oo(k,this.m,X)),io(this.h,G),this.Ua&&Dt(k,"TYPE","init"),this.P?(Dt(k,"$req",w),Dt(k,"SID","null"),G.T=!0,to(G,k,null)):to(G,k,w),this.G=2}}else this.G==3&&(a?Na(this,a):this.i.length==0||da(this.h)||Na(this))};function Na(a,w){var k;w?k=w.l:k=a.U++;const D=we(a.I);Dt(D,"SID",a.K),Dt(D,"RID",k),Dt(D,"AID",a.T),nr(a,D),a.m&&a.o&&oo(D,a.m,a.o),k=new Ce(a,a.j,k,a.B+1),a.m===null&&(k.H=a.o),w&&(a.i=w.D.concat(a.i)),w=Da(a,k,1e3),k.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),io(a.h,k),to(k,D,w)}function nr(a,w){a.H&&C(a.H,function(k,D){Dt(w,D,k)}),a.l&&ya({},function(k,D){Dt(w,D,k)})}function Da(a,w,k){k=Math.min(a.i.length,k);var D=a.l?f(a.l.Na,a.l,a):null;t:{var G=a.i;let X=-1;for(;;){const st=["count="+k];X==-1?0<k?(X=G[0].g,st.push("ofs="+X)):X=0:st.push("ofs="+X);let Ct=!0;for(let Qt=0;Qt<k;Qt++){let Pt=G[Qt].g;const te=G[Qt].map;if(Pt-=X,0>Pt)X=Math.max(0,G[Qt].g-100),Ct=!1;else try{kh(te,st,"req"+Pt+"_")}catch{D&&D(te)}}if(Ct){D=st.join("&");break t}}}return a=a.i.splice(0,k),w.D=a,D}function La(a){if(!a.g&&!a.u){a.Y=1;var w=a.Fa;z||F(),Y||(z(),Y=!0),U.add(w,a),a.v=0}}function ao(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Kn(f(a.Fa,a),ja(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Ma(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Kn(f(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oe(10),$r(this),Ma(this))};function lo(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Ma(a){a.g=new Ce(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var w=we(a.qa);Dt(w,"RID","rpc"),Dt(w,"SID",a.K),Dt(w,"AID",a.T),Dt(w,"CI",a.F?"0":"1"),!a.F&&a.ja&&Dt(w,"TO",a.ja),Dt(w,"TYPE","xmlhttp"),nr(a,w),a.m&&a.o&&oo(w,a.m,a.o),a.L&&(a.g.I=a.L);var k=a.g;a=a.ia,k.L=1,k.v=Fr(we(w)),k.m=null,k.P=!0,ua(k,a)}n.Za=function(){this.C!=null&&(this.C=null,$r(this),ao(this),oe(19))};function Hr(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Va(a,w){var k=null;if(a.g==w){Hr(a),lo(a),a.g=null;var D=2}else if(ro(a.h,w))k=w.D,ga(a.h,w),D=1;else return;if(a.G!=0){if(w.o)if(D==1){k=w.m?w.m.length:0,w=Date.now()-w.F;var G=a.B;D=Dr(),At(D,new oa(D,k)),zr(a)}else La(a);else if(G=w.s,G==3||G==0&&0<w.X||!(D==1&&Lh(a,w)||D==2&&ao(a)))switch(k&&0<k.length&&(w=a.h,w.i=w.i.concat(k)),G){case 1:We(a,5);break;case 4:We(a,10);break;case 3:We(a,6);break;default:We(a,2)}}}function ja(a,w){let k=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(k*=2),k*w}function We(a,w){if(a.j.info("Error code "+w),w==2){var k=f(a.fb,a),D=a.Xa;const G=!D;D=new Ge(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||jr(D,"https"),Fr(D),G?Sh(D.toString(),k):Ph(D.toString(),k)}else oe(2);a.G=0,a.l&&a.l.sa(w),Ba(a),Ca(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),oe(2)):(this.j.info("Failed to ping google.com"),oe(1))};function Ba(a){if(a.G=0,a.ka=[],a.l){const w=ma(a.h);(w.length!=0||a.i.length!=0)&&(g(a.ka,w),g(a.ka,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.ra()}}function Fa(a,w,k){var D=k instanceof Ge?we(k):new Ge(k);if(D.g!="")w&&(D.g=w+"."+D.g),Br(D,D.s);else{var G=l.location;D=G.protocol,w=w?w+"."+G.hostname:G.hostname,G=+G.port;var X=new Ge(null);D&&jr(X,D),w&&(X.g=w),G&&Br(X,G),k&&(X.l=k),D=X}return k=a.D,w=a.ya,k&&w&&Dt(D,k,w),Dt(D,"VER",a.la),nr(a,D),D}function qa(a,w,k){if(w&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=a.Ca&&!a.pa?new Ft(new Zn({eb:k})):new Ft(a.pa),w.Ha(a.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ua(){}n=Ua.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Kr(){}Kr.prototype.g=function(a,w){return new le(a,w)};function le(a,w){Rt.call(this),this.g=new ka(w),this.l=a,this.h=w&&w.messageUrlParams||null,a=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(a?a["X-WebChannel-Content-Type"]=w.messageContentType:a={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(a?a["X-WebChannel-Client-Profile"]=w.va:a={"X-WebChannel-Client-Profile":w.va}),this.g.S=a,(a=w&&w.Sb)&&!b(a)&&(this.g.m=a),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!b(w)&&(this.g.D=w,a=this.h,a!==null&&w in a&&(a=this.h,w in a&&delete a[w])),this.j=new dn(this)}m(le,Rt),le.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},le.prototype.close=function(){so(this.g)},le.prototype.o=function(a){var w=this.g;if(typeof a=="string"){var k={};k.__data__=a,a=k}else this.u&&(k={},k.__data__=Wi(a),a=k);w.i.push(new vh(w.Ya++,a)),w.G==3&&zr(w)},le.prototype.N=function(){this.g.l=null,delete this.j,so(this.g),delete this.g,le.aa.N.call(this)};function $a(a){Xi.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var w=a.__sm__;if(w){t:{for(const k in w){a=k;break t}a=void 0}(this.i=a)&&(a=this.i,w=w!==null&&a in w?w[a]:void 0),this.data=w}else this.data=a}m($a,Xi);function za(){Yi.call(this),this.status=1}m(za,Yi);function dn(a){this.g=a}m(dn,Ua),dn.prototype.ua=function(){At(this.g,"a")},dn.prototype.ta=function(a){At(this.g,new $a(a))},dn.prototype.sa=function(a){At(this.g,new za)},dn.prototype.ra=function(){At(this.g,"b")},Kr.prototype.createWebChannel=Kr.prototype.g,le.prototype.send=le.prototype.o,le.prototype.open=le.prototype.m,le.prototype.close=le.prototype.close,pc=function(){return new Kr},dc=function(){return Dr()},hc=He,Fo={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lr.NO_ERROR=0,Lr.TIMEOUT=8,Lr.HTTP_ERROR=6,oi=Lr,sa.COMPLETE="complete",fc=sa,ea.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,lr=ea,cc=Zn,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,uc=Ft}).apply(typeof Xr<"u"?Xr:typeof self<"u"?self:typeof window<"u"?window:{});const hl="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}re.UNAUTHENTICATED=new re(null),re.GOOGLE_CREDENTIALS=new re("google-credentials-uid"),re.FIRST_PARTY=new re("first-party-uid"),re.MOCK_USER=new re("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nn="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=new Ju("@firebase/firestore");function rr(){return nn.logLevel}function ct(n,...t){if(nn.logLevel<=St.DEBUG){const e=t.map(gs);nn.debug(`Firestore (${Nn}): ${n}`,...e)}}function Pe(n,...t){if(nn.logLevel<=St.ERROR){const e=t.map(gs);nn.error(`Firestore (${Nn}): ${n}`,...e)}}function Tn(n,...t){if(nn.logLevel<=St.WARN){const e=t.map(gs);nn.warn(`Firestore (${Nn}): ${n}`,...e)}}function gs(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(n="Unexpected state"){const t=`FIRESTORE (${Nn}) INTERNAL ASSERTION FAILED: `+n;throw Pe(t),new Error(t)}function Nt(n,t){n||vt()}function Et(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends an{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Im{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(re.UNAUTHENTICATED))}shutdown(){}}class Rm{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Sm{constructor(t){this.t=t,this.currentUser=re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let r=this.i;const i=u=>this.i!==r?(r=this.i,e(u)):Promise.resolve();let o=new Fe;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Fe,t.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Fe)}},0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(r=>this.i!==t?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt(typeof r.accessToken=="string"),new gc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Nt(t===null||typeof t=="string"),new re(t)}}class Pm{constructor(t,e,r){this.l=t,this.h=e,this.P=r,this.type="FirstParty",this.user=re.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class xm{constructor(t,e,r){this.l=t,this.h=e,this.P=r}getToken(){return Promise.resolve(new Pm(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(re.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class km{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Cm{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const r=o=>{o.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,ct("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Nt(typeof e.token=="string"),this.R=e.token,new km(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let r=0;r<n;r++)e[r]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Nm(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<e&&(r+=t.charAt(i[o]%t.length))}return r}}function xt(n,t){return n<t?-1:n>t?1:0}function wn(n,t,e){return n.length===t.length&&n.every((r,i)=>e(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new dt(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new dt(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new dt(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new dt(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Kt.fromMillis(Date.now())}static fromDate(t){return Kt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*e));return new Kt(e,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(t){this.timestamp=t}static fromTimestamp(t){return new bt(t)}static min(){return new bt(new Kt(0,0))}static max(){return new bt(new Kt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(t,e,r){e===void 0?e=0:e>t.length&&vt(),r===void 0?r=t.length-e:r>t.length-e&&vt(),this.segments=t,this.offset=e,this.len=r}get length(){return this.len}isEqual(t){return _r.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof _r?t.forEach(r=>{e.push(r)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,r=this.limit();e<r;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const r=Math.min(t.length,e.length);for(let i=0;i<r;i++){const o=t.get(i),s=e.get(i);if(o<s)return-1;if(o>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Mt extends _r{construct(t,e,r){return new Mt(t,e,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const r of t){if(r.indexOf("//")>=0)throw new dt(it.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);e.push(...r.split("/").filter(i=>i.length>0))}return new Mt(e)}static emptyPath(){return new Mt([])}}const Dm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends _r{construct(t,e,r){return new Yt(t,e,r)}static isValidIdentifier(t){return Dm.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Yt(["__name__"])}static fromServerFormat(t){const e=[];let r="",i=0;const o=()=>{if(r.length===0)throw new dt(it.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(r),r=""};let s=!1;for(;i<t.length;){const l=t[i];if(l==="\\"){if(i+1===t.length)throw new dt(it.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new dt(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new dt(it.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Yt(e)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(t){this.path=t}static fromPath(t){return new gt(Mt.fromString(t))}static fromName(t){return new gt(Mt.fromString(t).popFirst(5))}static empty(){return new gt(Mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Mt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Mt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gt(new Mt(t.slice()))}}function Lm(n,t){const e=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(r===1e9?new Kt(e+1,0):new Kt(e,r));return new Ue(i,gt.empty(),t)}function Mm(n){return new Ue(n.readTime,n.key,-1)}class Ue{constructor(t,e,r){this.readTime=t,this.documentKey=e,this.largestBatchId=r}static min(){return new Ue(bt.min(),gt.empty(),-1)}static max(){return new Ue(bt.max(),gt.empty(),-1)}}function Vm(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=gt.comparator(n.documentKey,t.documentKey),e!==0?e:xt(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sr(n){if(n.code!==it.FAILED_PRECONDITION||n.message!==jm)throw n;ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new nt((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(e,o).next(r,i)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof nt?e:nt.resolve(e)}catch(e){return nt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.reject(e)}static resolve(t){return new nt((e,r)=>{e(t)})}static reject(t){return new nt((e,r)=>{r(t)})}static waitFor(t){return new nt((e,r)=>{let i=0,o=0,s=!1;t.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&e()},u=>r(u))}),s=!0,o===i&&e()})}static or(t){let e=nt.resolve(!1);for(const r of t)e=e.next(i=>i?nt.resolve(i):r());return e}static forEach(t,e){const r=[];return t.forEach((i,o)=>{r.push(e.call(this,i,o))}),this.waitFor(r)}static mapArray(t,e){return new nt((r,i)=>{const o=t.length,s=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;e(t[c]).next(d=>{s[c]=d,++l,l===o&&r(s)},d=>i(d))}})}static doWhile(t,e){return new nt((r,i)=>{const o=()=>{t()===!0?e().next(()=>{o()},i):r()};o()})}}function Fm(n){const t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Pr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=r=>this.ie(r),this.se=r=>e.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}ms.oe=-1;function Pi(n){return n==null}function di(n){return n===0&&1/n==-1/0}function qm(n){return typeof n=="number"&&Number.isInteger(n)&&!di(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function Dn(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function yc(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(t,e){this.comparator=t,this.root=e||Xt.EMPTY}insert(t,e){return new jt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(t){return new jt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const r=this.comparator(t,e.key);if(r===0)return e.value;r<0?e=e.left:r>0&&(e=e.right)}return null}indexOf(t){let e=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return e+r.left.size;i<0?r=r.left:(e+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,r)=>(t(e,r),!1))}toString(){const t=[];return this.inorderTraversal((e,r)=>(t.push(`${e}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Yr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Yr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Yr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Yr(this.root,t,this.comparator,!0)}}class Yr{constructor(t,e,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?r(t.key,e):1,e&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Xt{constructor(t,e,r,i,o){this.key=t,this.value=e,this.color=r??Xt.RED,this.left=i??Xt.EMPTY,this.right=o??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,r,i,o){return new Xt(t??this.key,e??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,e,r),null):o===0?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let r,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),e(t,i.key)===0){if(i.right.isEmpty())return Xt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const t=this.left.check();if(t!==this.right.check())throw vt();return t+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(t,e,r,i,o){return this}insert(t,e,r){return new Xt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.comparator=t,this.data=new jt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,r)=>(t(e),!1))}forEachInRange(t,e){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let r;for(r=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new pl(this.data.getIterator())}getIteratorFrom(t){return new pl(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(r=>{e=e.add(r)}),e}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const e=this.data.getIterator(),r=t.data.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Zt(this.comparator);return e.data=t,e}}class pl{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.fields=t,t.sort(Yt.comparator)}static empty(){return new pe([])}unionWith(t){let e=new Zt(Yt.comparator);for(const r of this.fields)e=e.add(r);for(const r of t)e=e.add(r);return new pe(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return wn(this.fields,t.fields,(e,r)=>e.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vc("Invalid base64 string: "+o):o}}(t);return new Jt(e)}static fromUint8Array(t){const e=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(t);return new Jt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const Um=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $e(n){if(Nt(!!n),typeof n=="string"){let t=0;const e=Um.exec(n);if(Nt(!!e),e[1]){let i=e[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:$t(n.seconds),nanos:$t(n.nanos)}}function $t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rn(n){return typeof n=="string"?Jt.fromBase64String(n):Jt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function vs(n){const t=n.mapValue.fields.__previous_value__;return ys(t)?vs(t):t}function br(n){const t=$e(n.mapValue.fields.__local_write_time__.timestampValue);return new Kt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(t,e,r,i,o,s,l,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Er{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Er("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Er&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function on(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ys(n)?4:Hm(n)?9007199254740991:zm(n)?10:11:vt()}function Ee(n,t){if(n===t)return!0;const e=on(n);if(e!==on(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return br(n).isEqual(br(t));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=$e(i.timestampValue),l=$e(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(i,o){return rn(i.bytesValue).isEqual(rn(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,o){return $t(i.geoPointValue.latitude)===$t(o.geoPointValue.latitude)&&$t(i.geoPointValue.longitude)===$t(o.geoPointValue.longitude)}(n,t);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return $t(i.integerValue)===$t(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=$t(i.doubleValue),l=$t(o.doubleValue);return s===l?di(s)===di(l):isNaN(s)&&isNaN(l)}return!1}(n,t);case 9:return wn(n.arrayValue.values||[],t.arrayValue.values||[],Ee);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(dl(s)!==dl(l))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(l[u]===void 0||!Ee(s[u],l[u])))return!1;return!0}(n,t);default:return vt()}}function Tr(n,t){return(n.values||[]).find(e=>Ee(e,t))!==void 0}function An(n,t){if(n===t)return 0;const e=on(n),r=on(t);if(e!==r)return xt(e,r);switch(e){case 0:case 9007199254740991:return 0;case 1:return xt(n.booleanValue,t.booleanValue);case 2:return function(o,s){const l=$t(o.integerValue||o.doubleValue),u=$t(s.integerValue||s.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(n,t);case 3:return gl(n.timestampValue,t.timestampValue);case 4:return gl(br(n),br(t));case 5:return xt(n.stringValue,t.stringValue);case 6:return function(o,s){const l=rn(o),u=rn(s);return l.compareTo(u)}(n.bytesValue,t.bytesValue);case 7:return function(o,s){const l=o.split("/"),u=s.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=xt(l[c],u[c]);if(d!==0)return d}return xt(l.length,u.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,s){const l=xt($t(o.latitude),$t(s.latitude));return l!==0?l:xt($t(o.longitude),$t(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return ml(n.arrayValue,t.arrayValue);case 10:return function(o,s){var l,u,c,d;const h=o.fields||{},f=s.fields||{},p=(l=h.value)===null||l===void 0?void 0:l.arrayValue,m=(u=f.value)===null||u===void 0?void 0:u.arrayValue,_=xt(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((d=m==null?void 0:m.values)===null||d===void 0?void 0:d.length)||0);return _!==0?_:ml(p,m)}(n.mapValue,t.mapValue);case 11:return function(o,s){if(o===Zr.mapValue&&s===Zr.mapValue)return 0;if(o===Zr.mapValue)return 1;if(s===Zr.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=s.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const f=xt(u[h],d[h]);if(f!==0)return f;const p=An(l[u[h]],c[d[h]]);if(p!==0)return p}return xt(u.length,d.length)}(n.mapValue,t.mapValue);default:throw vt()}}function gl(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return xt(n,t);const e=$e(n),r=$e(t),i=xt(e.seconds,r.seconds);return i!==0?i:xt(e.nanos,r.nanos)}function ml(n,t){const e=n.values||[],r=t.values||[];for(let i=0;i<e.length&&i<r.length;++i){const o=An(e[i],r[i]);if(o)return o}return xt(e.length,r.length)}function On(n){return qo(n)}function qo(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){const r=$e(e);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return rn(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return gt.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let r="[",i=!0;for(const o of e.values||[])i?i=!1:r+=",",r+=qo(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(e){const r=Object.keys(e.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${qo(e.fields[s])}`;return i+"}"}(n.mapValue):vt()}function Uo(n){return!!n&&"integerValue"in n}function _s(n){return!!n&&"arrayValue"in n}function yl(n){return!!n&&"nullValue"in n}function vl(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function si(n){return!!n&&"mapValue"in n}function zm(n){var t,e;return((e=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="__vector__"}function fr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return Dn(n.mapValue.fields,(e,r)=>t.mapValue.fields[e]=fr(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=fr(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Hm(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.value=t}static empty(){return new ce({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let r=0;r<t.length-1;++r)if(e=(e.mapValue.fields||{})[t.get(r)],!si(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=fr(e)}setAll(t){let e=Yt.emptyPath(),r={},i=[];t.forEach((s,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,r,i),r={},i=[],e=l.popLast()}s?r[l.lastSegment()]=fr(s):i.push(l.lastSegment())});const o=this.getFieldsMap(e);this.applyChanges(o,r,i)}delete(t){const e=this.field(t.popLast());si(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ee(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=e.mapValue.fields[t.get(r)];si(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(r)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,r){Dn(e,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new ce(fr(this.value))}}function _c(n){const t=[];return Dn(n.fields,(e,r)=>{const i=new Yt([e]);if(si(r)){const o=_c(r.mapValue).fields;if(o.length===0)t.push(i);else for(const s of o)t.push(i.child(s))}else t.push(i)}),new pe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,e,r,i,o,s,l){this.key=t,this.documentType=e,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(t){return new ie(t,0,bt.min(),bt.min(),bt.min(),ce.empty(),0)}static newFoundDocument(t,e,r,i){return new ie(t,1,e,bt.min(),r,i,0)}static newNoDocument(t,e){return new ie(t,2,e,bt.min(),bt.min(),ce.empty(),0)}static newUnknownDocument(t,e){return new ie(t,3,e,bt.min(),bt.min(),ce.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(bt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ce.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ce.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=bt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(t,e){this.position=t,this.inclusive=e}}function _l(n,t,e){let r=0;for(let i=0;i<n.position.length;i++){const o=t[i],s=n.position[i];if(o.field.isKeyField()?r=gt.comparator(gt.fromName(s.referenceValue),e.key):r=An(s,e.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function bl(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Ee(n.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t,e="asc"){this.field=t,this.dir=e}}function Km(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{}class Ht extends bc{constructor(t,e,r){super(),this.field=t,this.op=e,this.value=r}static create(t,e,r){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,r):new Wm(t,e,r):e==="array-contains"?new Ym(t,r):e==="in"?new Zm(t,r):e==="not-in"?new Jm(t,r):e==="array-contains-any"?new ty(t,r):new Ht(t,e,r)}static createKeyFieldInFilter(t,e,r){return e==="in"?new Qm(t,r):new Xm(t,r)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(An(e,this.value)):e!==null&&on(this.value)===on(e)&&this.matchesComparison(An(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return vt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Te extends bc{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new Te(t,e)}matches(t){return Ec(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ec(n){return n.op==="and"}function Tc(n){return Gm(n)&&Ec(n)}function Gm(n){for(const t of n.filters)if(t instanceof Te)return!1;return!0}function $o(n){if(n instanceof Ht)return n.field.canonicalString()+n.op.toString()+On(n.value);if(Tc(n))return n.filters.map(t=>$o(t)).join(",");{const t=n.filters.map(e=>$o(e)).join(",");return`${n.op}(${t})`}}function wc(n,t){return n instanceof Ht?function(r,i){return i instanceof Ht&&r.op===i.op&&r.field.isEqual(i.field)&&Ee(r.value,i.value)}(n,t):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&wc(s,i.filters[l]),!0):!1}(n,t):void vt()}function Ac(n){return n instanceof Ht?function(e){return`${e.field.canonicalString()} ${e.op} ${On(e.value)}`}(n):n instanceof Te?function(e){return e.op.toString()+" {"+e.getFilters().map(Ac).join(" ,")+"}"}(n):"Filter"}class Wm extends Ht{constructor(t,e,r){super(t,e,r),this.key=gt.fromName(r.referenceValue)}matches(t){const e=gt.comparator(t.key,this.key);return this.matchesComparison(e)}}class Qm extends Ht{constructor(t,e){super(t,"in",e),this.keys=Oc("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Xm extends Ht{constructor(t,e){super(t,"not-in",e),this.keys=Oc("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Oc(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(r=>gt.fromName(r.referenceValue))}class Ym extends Ht{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return _s(e)&&Tr(e.arrayValue,this.value)}}class Zm extends Ht{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Tr(this.value.arrayValue,e)}}class Jm extends Ht{constructor(t,e){super(t,"not-in",e)}matches(t){if(Tr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Tr(this.value.arrayValue,e)}}class ty extends Ht{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!_s(e)||!e.arrayValue.values)&&e.arrayValue.values.some(r=>Tr(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(t,e=null,r=[],i=[],o=null,s=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function El(n,t=null,e=[],r=[],i=null,o=null,s=null){return new ey(n,t,e,r,i,o,s)}function bs(n){const t=Et(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(r=>$o(r)).join(","),e+="|ob:",e+=t.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Pi(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(r=>On(r)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(r=>On(r)).join(",")),t.ue=e}return t.ue}function Es(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!Km(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!wc(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!bl(n.startAt,t.startAt)&&bl(n.endAt,t.endAt)}function zo(n){return gt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,e=null,r=[],i=[],o=null,s="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ny(n,t,e,r,i,o,s,l){return new xi(n,t,e,r,i,o,s,l)}function Ic(n){return new xi(n)}function Tl(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ry(n){return n.collectionGroup!==null}function hr(n){const t=Et(n);if(t.ce===null){t.ce=[];const e=new Set;for(const o of t.explicitOrderBy)t.ce.push(o),e.add(o.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Zt(Yt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.ce.push(new gi(o,r))}),e.has(Yt.keyField().canonicalString())||t.ce.push(new gi(Yt.keyField(),r))}return t.ce}function _e(n){const t=Et(n);return t.le||(t.le=iy(t,hr(n))),t.le}function iy(n,t){if(n.limitType==="F")return El(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new gi(i.field,o)});const e=n.endAt?new pi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pi(n.startAt.position,n.startAt.inclusive):null;return El(n.path,n.collectionGroup,t,n.filters,n.limit,e,r)}}function Ho(n,t,e){return new xi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function ki(n,t){return Es(_e(n),_e(t))&&n.limitType===t.limitType}function Rc(n){return`${bs(_e(n))}|lt:${n.limitType}`}function yn(n){return`Query(target=${function(e){let r=e.path.canonicalString();return e.collectionGroup!==null&&(r+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(r+=`, filters: [${e.filters.map(i=>Ac(i)).join(", ")}]`),Pi(e.limit)||(r+=", limit: "+e.limit),e.orderBy.length>0&&(r+=`, orderBy: [${e.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),e.startAt&&(r+=", startAt: ",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>On(i)).join(",")),e.endAt&&(r+=", endAt: ",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>On(i)).join(",")),`Target(${r})`}(_e(n))}; limitType=${n.limitType})`}function Ci(n,t){return t.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):gt.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,t)&&function(r,i){for(const o of hr(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,t)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,t)&&function(r,i){return!(r.startAt&&!function(s,l,u){const c=_l(s,l,u);return s.inclusive?c<=0:c<0}(r.startAt,hr(r),i)||r.endAt&&!function(s,l,u){const c=_l(s,l,u);return s.inclusive?c>=0:c>0}(r.endAt,hr(r),i))}(n,t)}function oy(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Sc(n){return(t,e)=>{let r=!1;for(const i of hr(n)){const o=sy(i,t,e);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function sy(n,t,e){const r=n.field.isKeyField()?gt.comparator(t.key,e.key):function(o,s,l){const u=s.data.field(o),c=l.data.field(o);return u!==null&&c!==null?An(u,c):vt()}(n.field,t,e);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,e]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),r=this.inner[e];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[e]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Dn(this.inner,(e,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return yc(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay=new jt(gt.comparator);function xe(){return ay}const Pc=new jt(gt.comparator);function ur(...n){let t=Pc;for(const e of n)t=t.insert(e.key,e);return t}function xc(n){let t=Pc;return n.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function Ye(){return dr()}function kc(){return dr()}function dr(){return new Ln(n=>n.toString(),(n,t)=>n.isEqual(t))}const ly=new jt(gt.comparator),uy=new Zt(gt.comparator);function Ot(...n){let t=uy;for(const e of n)t=t.add(e);return t}const cy=new Zt(xt);function fy(){return cy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:di(t)?"-0":t}}function Cc(n){return{integerValue:""+n}}function hy(n,t){return qm(t)?Cc(t):Ts(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this._=void 0}}function dy(n,t,e){return n instanceof mi?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ys(o)&&(o=vs(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,t):n instanceof wr?Dc(n,t):n instanceof Ar?Lc(n,t):function(i,o){const s=Nc(i,o),l=wl(s)+wl(i.Pe);return Uo(s)&&Uo(i.Pe)?Cc(l):Ts(i.serializer,l)}(n,t)}function py(n,t,e){return n instanceof wr?Dc(n,t):n instanceof Ar?Lc(n,t):e}function Nc(n,t){return n instanceof yi?function(r){return Uo(r)||function(o){return!!o&&"doubleValue"in o}(r)}(t)?t:{integerValue:0}:null}class mi extends Ni{}class wr extends Ni{constructor(t){super(),this.elements=t}}function Dc(n,t){const e=Mc(t);for(const r of n.elements)e.some(i=>Ee(i,r))||e.push(r);return{arrayValue:{values:e}}}class Ar extends Ni{constructor(t){super(),this.elements=t}}function Lc(n,t){let e=Mc(t);for(const r of n.elements)e=e.filter(i=>!Ee(i,r));return{arrayValue:{values:e}}}class yi extends Ni{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function wl(n){return $t(n.integerValue||n.doubleValue)}function Mc(n){return _s(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function gy(n,t){return n.field.isEqual(t.field)&&function(r,i){return r instanceof wr&&i instanceof wr||r instanceof Ar&&i instanceof Ar?wn(r.elements,i.elements,Ee):r instanceof yi&&i instanceof yi?Ee(r.Pe,i.Pe):r instanceof mi&&i instanceof mi}(n.transform,t.transform)}class my{constructor(t,e){this.version=t,this.transformResults=e}}class Oe{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Oe}static exists(t){return new Oe(void 0,t)}static updateTime(t){return new Oe(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ai(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class Di{}function Vc(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new Bc(n.key,Oe.none()):new xr(n.key,n.data,Oe.none());{const e=n.data,r=ce.empty();let i=new Zt(Yt.comparator);for(let o of t.fields)if(!i.has(o)){let s=e.field(o);s===null&&o.length>1&&(o=o.popLast(),s=e.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ln(n.key,r,new pe(i.toArray()),Oe.none())}}function yy(n,t,e){n instanceof xr?function(i,o,s){const l=i.value.clone(),u=Ol(i.fieldTransforms,o,s.transformResults);l.setAll(u),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,t,e):n instanceof ln?function(i,o,s){if(!ai(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=Ol(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(jc(i)),u.setAll(l),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,t,e):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function pr(n,t,e,r){return n instanceof xr?function(o,s,l,u){if(!ai(o.precondition,s))return l;const c=o.value.clone(),d=Il(o.fieldTransforms,u,s);return c.setAll(d),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,t,e,r):n instanceof ln?function(o,s,l,u){if(!ai(o.precondition,s))return l;const c=Il(o.fieldTransforms,u,s),d=s.data;return d.setAll(jc(o)),d.setAll(c),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,t,e,r):function(o,s,l){return ai(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(n,t,e)}function vy(n,t){let e=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),o=Nc(r.transform,i||null);o!=null&&(e===null&&(e=ce.empty()),e.set(r.field,o))}return e||null}function Al(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&wn(r,i,(o,s)=>gy(o,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}class xr extends Di{constructor(t,e,r,i=[]){super(),this.key=t,this.value=e,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ln extends Di{constructor(t,e,r,i,o=[]){super(),this.key=t,this.data=e,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function jc(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const r=n.data.field(e);t.set(e,r)}}),t}function Ol(n,t,e){const r=new Map;Nt(n.length===e.length);for(let i=0;i<e.length;i++){const o=n[i],s=o.transform,l=t.data.field(o.field);r.set(o.field,py(s,l,e[i]))}return r}function Il(n,t,e){const r=new Map;for(const i of n){const o=i.transform,s=e.data.field(i.field);r.set(i.field,dy(o,s,t))}return r}class Bc extends Di{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _y extends Di{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(t,e,r,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,e){const r=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&yy(o,t,r[i])}}applyToLocalView(t,e){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(e=pr(r,t,e,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(e=pr(r,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const r=kc();return this.mutations.forEach(i=>{const o=t.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=e.has(i.key)?null:l;const u=Vc(s,l);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(bt.min())}),r}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ot())}isEqual(t){return this.batchId===t.batchId&&wn(this.mutations,t.mutations,(e,r)=>Al(e,r))&&wn(this.baseMutations,t.baseMutations,(e,r)=>Al(e,r))}}class ws{constructor(t,e,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=r,this.docVersions=i}static from(t,e,r){Nt(t.mutations.length===r.length);let i=function(){return ly}();const o=t.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new ws(t,e,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,It;function wy(n){switch(n){default:return vt();case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0}}function Fc(n){if(n===void 0)return Pe("GRPC error has no .code"),it.UNKNOWN;switch(n){case zt.OK:return it.OK;case zt.CANCELLED:return it.CANCELLED;case zt.UNKNOWN:return it.UNKNOWN;case zt.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case zt.INTERNAL:return it.INTERNAL;case zt.UNAVAILABLE:return it.UNAVAILABLE;case zt.UNAUTHENTICATED:return it.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case zt.NOT_FOUND:return it.NOT_FOUND;case zt.ALREADY_EXISTS:return it.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return it.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case zt.ABORTED:return it.ABORTED;case zt.OUT_OF_RANGE:return it.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return it.UNIMPLEMENTED;case zt.DATA_LOSS:return it.DATA_LOSS;default:return vt()}}(It=zt||(zt={}))[It.OK=0]="OK",It[It.CANCELLED=1]="CANCELLED",It[It.UNKNOWN=2]="UNKNOWN",It[It.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",It[It.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",It[It.NOT_FOUND=5]="NOT_FOUND",It[It.ALREADY_EXISTS=6]="ALREADY_EXISTS",It[It.PERMISSION_DENIED=7]="PERMISSION_DENIED",It[It.UNAUTHENTICATED=16]="UNAUTHENTICATED",It[It.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",It[It.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",It[It.ABORTED=10]="ABORTED",It[It.OUT_OF_RANGE=11]="OUT_OF_RANGE",It[It.UNIMPLEMENTED=12]="UNIMPLEMENTED",It[It.INTERNAL=13]="INTERNAL",It[It.UNAVAILABLE=14]="UNAVAILABLE",It[It.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy=new Je([4294967295,4294967295],0);function Rl(n){const t=Ay().encode(n),e=new lc;return e.update(t),new Uint8Array(e.digest())}function Sl(n){const t=new DataView(n.buffer),e=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Je([e,r],0),new Je([i,o],0)]}class As{constructor(t,e,r){if(this.bitmap=t,this.padding=e,this.hashCount=r,e<0||e>=8)throw new cr(`Invalid padding: ${e}`);if(r<0)throw new cr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new cr(`Invalid hash count: ${r}`);if(t.length===0&&e!==0)throw new cr(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Je.fromNumber(this.Ie)}Ee(t,e,r){let i=t.add(e.multiply(Je.fromNumber(r)));return i.compare(Oy)===1&&(i=new Je([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=Rl(t),[r,i]=Sl(e);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(t,e,r){const i=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new As(o,i,e);return r.forEach(l=>s.insert(l)),s}insert(t){if(this.Ie===0)return;const e=Rl(t),[r,i]=Sl(e);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(t){const e=Math.floor(t/8),r=t%8;this.bitmap[e]|=1<<r}}class cr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,e,r,i,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,r){const i=new Map;return i.set(t,kr.createSynthesizedTargetChangeForCurrentChange(t,e,r)),new Li(bt.min(),i,new jt(xt),xe(),Ot())}}class kr{constructor(t,e,r,i,o){this.resumeToken=t,this.current=e,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,r){return new kr(r,e,Ot(),Ot(),Ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(t,e,r,i){this.Re=t,this.removedTargetIds=e,this.key=r,this.Ve=i}}class qc{constructor(t,e){this.targetId=t,this.me=e}}class Uc{constructor(t,e,r=Jt.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=r,this.cause=i}}class Pl{constructor(){this.fe=0,this.ge=kl(),this.pe=Jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Ot(),e=Ot(),r=Ot();return this.ge.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:r=r.add(i);break;default:vt()}}),new kr(this.pe,this.ye,t,e,r)}Ce(){this.we=!1,this.ge=kl()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Iy{constructor(t){this.Le=t,this.Be=new Map,this.ke=xe(),this.qe=xl(),this.Qe=new jt(xt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const r=this.Ge(e);switch(t.state){case 0:this.ze(e)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),r.De(t.resumeToken));break;default:vt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((r,i)=>{this.ze(i)&&e(i)})}He(t){const e=t.targetId,r=t.me.count,i=this.Je(e);if(i){const o=i.target;if(zo(o))if(r===0){const s=new gt(o.path);this.Ue(e,s,ie.newNoDocument(s,bt.min()))}else Nt(r===1);else{const s=this.Ye(e);if(s!==r){const l=this.Ze(t),u=l?this.Xe(l,t,s):1;if(u!==0){this.je(e);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=e;let s,l;try{s=rn(r).toUint8Array()}catch(u){if(u instanceof vc)return Tn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new As(s,i,o)}catch(u){return Tn(u instanceof cr?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(t,e,r){return e.me.count===r-this.nt(t,e.targetId)?0:2}nt(t,e){const r=this.Le.getRemoteKeysForTarget(e);let i=0;return r.forEach(o=>{const s=this.Le.tt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(l)||(this.Ue(e,o,null),i++)}),i}rt(t){const e=new Map;this.Be.forEach((o,s)=>{const l=this.Je(s);if(l){if(o.current&&zo(l.target)){const u=new gt(l.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,ie.newNoDocument(u,t))}o.be&&(e.set(s,o.ve()),o.Ce())}});let r=Ot();this.qe.forEach((o,s)=>{let l=!0;s.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));const i=new Li(t,e,this.Qe,this.ke,r);return this.ke=xe(),this.qe=xl(),this.Qe=new jt(xt),i}$e(t,e){if(!this.ze(t))return;const r=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,r),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,e)?i.Fe(e,1):i.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),r&&(this.ke=this.ke.insert(e,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Pl,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Zt(xt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||ct("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Pl),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function xl(){return new jt(gt.comparator)}function kl(){return new jt(gt.comparator)}const Ry=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Sy=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Py=(()=>({and:"AND",or:"OR"}))();class xy{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Ko(n,t){return n.useProto3Json||Pi(t)?t:{value:t}}function vi(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function $c(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function ky(n,t){return vi(n,t.toTimestamp())}function be(n){return Nt(!!n),bt.fromTimestamp(function(e){const r=$e(e);return new Kt(r.seconds,r.nanos)}(n))}function Os(n,t){return Go(n,t).canonicalString()}function Go(n,t){const e=function(i){return new Mt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return t===void 0?e:e.child(t)}function zc(n){const t=Mt.fromString(n);return Nt(Qc(t)),t}function Wo(n,t){return Os(n.databaseId,t.path)}function Eo(n,t){const e=zc(t);if(e.get(1)!==n.databaseId.projectId)throw new dt(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new dt(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new gt(Kc(e))}function Hc(n,t){return Os(n.databaseId,t)}function Cy(n){const t=zc(n);return t.length===4?Mt.emptyPath():Kc(t)}function Qo(n){return new Mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Kc(n){return Nt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Cl(n,t,e){return{name:Wo(n,t),fields:e.value.mapValue.fields}}function Ny(n,t){let e;if("targetChange"in t){t.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:vt()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(c,d){return c.useProto3Json?(Nt(d===void 0||typeof d=="string"),Jt.fromBase64String(d||"")):(Nt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Jt.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,l=s&&function(c){const d=c.code===void 0?it.UNKNOWN:Fc(c.code);return new dt(d,c.message||"")}(s);e=new Uc(r,i,o,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Eo(n,r.document.name),o=be(r.document.updateTime),s=r.document.createTime?be(r.document.createTime):bt.min(),l=new ce({mapValue:{fields:r.document.fields}}),u=ie.newFoundDocument(i,o,s,l),c=r.targetIds||[],d=r.removedTargetIds||[];e=new li(c,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Eo(n,r.document),o=r.readTime?be(r.readTime):bt.min(),s=ie.newNoDocument(i,o),l=r.removedTargetIds||[];e=new li([],l,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Eo(n,r.document),o=r.removedTargetIds||[];e=new li([],o,i,null)}else{if(!("filter"in t))return vt();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Ty(i,o),l=r.targetId;e=new qc(l,s)}}return e}function Dy(n,t){let e;if(t instanceof xr)e={update:Cl(n,t.key,t.value)};else if(t instanceof Bc)e={delete:Wo(n,t.key)};else if(t instanceof ln)e={update:Cl(n,t.key,t.data),updateMask:$y(t.fieldMask)};else{if(!(t instanceof _y))return vt();e={verify:Wo(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof mi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof wr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ar)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yi)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw vt()}(0,r))),t.precondition.isNone||(e.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ky(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:vt()}(n,t.precondition)),e}function Ly(n,t){return n&&n.length>0?(Nt(t!==void 0),n.map(e=>function(i,o){let s=i.updateTime?be(i.updateTime):be(o);return s.isEqual(bt.min())&&(s=be(o)),new my(s,i.transformResults||[])}(e,t))):[]}function My(n,t){return{documents:[Hc(n,t.path)]}}function Vy(n,t){const e={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),e.structuredQuery.from=[{collectionId:r.lastSegment()}]),e.parent=Hc(n,i);const o=function(c){if(c.length!==0)return Wc(Te.create(c,"and"))}(t.filters);o&&(e.structuredQuery.where=o);const s=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:vn(f.field),direction:Fy(f.dir)}}(d))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const l=Ko(n,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:i}}function jy(n){let t=Cy(n.parent);const e=n.structuredQuery,r=e.from?e.from.length:0;let i=null;if(r>0){Nt(r===1);const d=e.from[0];d.allDescendants?i=d.collectionId:t=t.child(d.collectionId)}let o=[];e.where&&(o=function(h){const f=Gc(h);return f instanceof Te&&Tc(f)?f.getFilters():[f]}(e.where));let s=[];e.orderBy&&(s=function(h){return h.map(f=>function(m){return new gi(_n(m.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(f))}(e.orderBy));let l=null;e.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,Pi(f)?null:f}(e.limit));let u=null;e.startAt&&(u=function(h){const f=!!h.before,p=h.values||[];return new pi(p,f)}(e.startAt));let c=null;return e.endAt&&(c=function(h){const f=!h.before,p=h.values||[];return new pi(p,f)}(e.endAt)),ny(t,i,s,o,l,"F",u,c)}function By(n,t){const e=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Gc(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const r=_n(e.unaryFilter.field);return Ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=_n(e.unaryFilter.field);return Ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=_n(e.unaryFilter.field);return Ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=_n(e.unaryFilter.field);return Ht.create(s,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}(n):n.fieldFilter!==void 0?function(e){return Ht.create(_n(e.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Te.create(e.compositeFilter.filters.map(r=>Gc(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return vt()}}(e.compositeFilter.op))}(n):vt()}function Fy(n){return Ry[n]}function qy(n){return Sy[n]}function Uy(n){return Py[n]}function vn(n){return{fieldPath:n.canonicalString()}}function _n(n){return Yt.fromServerFormat(n.fieldPath)}function Wc(n){return n instanceof Ht?function(e){if(e.op==="=="){if(vl(e.value))return{unaryFilter:{field:vn(e.field),op:"IS_NAN"}};if(yl(e.value))return{unaryFilter:{field:vn(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(vl(e.value))return{unaryFilter:{field:vn(e.field),op:"IS_NOT_NAN"}};if(yl(e.value))return{unaryFilter:{field:vn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vn(e.field),op:qy(e.op),value:e.value}}}(n):n instanceof Te?function(e){const r=e.getFilters().map(i=>Wc(i));return r.length===1?r[0]:{compositeFilter:{op:Uy(e.op),filters:r}}}(n):vt()}function $y(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Qc(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t,e,r,i,o=bt.min(),s=bt.min(),l=Jt.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Me(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Me(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Me(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Me(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(t){this.ct=t}}function Hy(n){const t=jy({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ho(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.un=new Gy}addToCollectionParentIndex(t,e){return this.un.add(e),nt.resolve()}getCollectionParents(t,e){return nt.resolve(this.un.getEntries(e))}addFieldIndex(t,e){return nt.resolve()}deleteFieldIndex(t,e){return nt.resolve()}deleteAllFieldIndexes(t){return nt.resolve()}createTargetIndexes(t,e){return nt.resolve()}getDocumentsMatchingTarget(t,e){return nt.resolve(null)}getIndexType(t,e){return nt.resolve(0)}getFieldIndexes(t,e){return nt.resolve([])}getNextCollectionGroupToUpdate(t){return nt.resolve(null)}getMinOffset(t,e){return nt.resolve(Ue.min())}getMinOffsetFromCollectionGroup(t,e){return nt.resolve(Ue.min())}updateCollectionGroup(t,e,r){return nt.resolve()}updateIndexEntries(t,e){return nt.resolve()}}class Gy{constructor(){this.index={}}add(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e]||new Zt(Mt.comparator),o=!i.has(r);return this.index[e]=i.add(r),o}has(t){const e=t.lastSegment(),r=t.popLast(),i=this.index[e];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Zt(Mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new In(0)}static kn(){return new In(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(){this.changes=new Ln(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const r=this.changes.get(e);return r!==void 0?nt.resolve(r):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(t,e,r,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,e){let r=null;return this.documentOverlayCache.getOverlay(t,e).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,e))).next(i=>(r!==null&&pr(r.mutation,i,pe.empty(),Kt.now()),i))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.getLocalViewOfDocuments(t,r,Ot()).next(()=>r))}getLocalViewOfDocuments(t,e,r=Ot()){const i=Ye();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,r).next(o=>{let s=ur();return o.forEach((l,u)=>{s=s.insert(l,u.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){const r=Ye();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,Ot()))}populateOverlays(t,e,r){const i=[];return r.forEach(o=>{e.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(t,i).next(o=>{o.forEach((s,l)=>{e.set(s,l)})})}computeViews(t,e,r,i){let o=xe();const s=dr(),l=function(){return dr()}();return e.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ln)?o=o.insert(c.key,c):d!==void 0?(s.set(c.key,d.mutation.getFieldMask()),pr(d.mutation,c,d.mutation.getFieldMask(),Kt.now())):s.set(c.key,pe.empty())}),this.recalculateAndSaveOverlays(t,o).next(u=>(u.forEach((c,d)=>s.set(c,d)),e.forEach((c,d)=>{var h;return l.set(c,new Qy(d,(h=s.get(c))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(t,e){const r=dr();let i=new jt((s,l)=>s-l),o=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(const l of s)l.keys().forEach(u=>{const c=e.get(u);if(c===null)return;let d=r.get(u)||pe.empty();d=l.applyToLocalView(c,d),r.set(u,d);const h=(i.get(l.batchId)||Ot()).add(u);i=i.insert(l.batchId,h)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,h=kc();d.forEach(f=>{if(!o.has(f)){const p=Vc(e.get(f),r.get(f));p!==null&&h.set(f,p),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(t,c,h))}return nt.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,e,r,i){return function(s){return gt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):ry(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,r,i):this.getDocumentsMatchingCollectionQuery(t,e,r,i)}getNextDocuments(t,e,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,r.largestBatchId,i-o.size):nt.resolve(Ye());let l=-1,u=o;return s.next(c=>nt.forEach(c,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),o.get(d)?nt.resolve():this.remoteDocumentCache.getEntry(t,d).next(f=>{u=u.insert(d,f)}))).next(()=>this.populateOverlays(t,c,o)).next(()=>this.computeViews(t,u,c,Ot())).next(d=>({batchId:l,changes:xc(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new gt(e)).next(r=>{let i=ur();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,e,r,i){const o=e.collectionGroup;let s=ur();return this.indexManager.getCollectionParents(t,o).next(l=>nt.forEach(l,u=>{const c=function(h,f){return new xi(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(e,u.child(o));return this.getDocumentsMatchingCollectionQuery(t,c,r,i).next(d=>{d.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,r,o,i))).next(s=>{o.forEach((u,c)=>{const d=c.getKey();s.get(d)===null&&(s=s.insert(d,ie.newInvalidDocument(d)))});let l=ur();return s.forEach((u,c)=>{const d=o.get(u);d!==void 0&&pr(d.mutation,c,pe.empty(),Kt.now()),Ci(e,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,e){return nt.resolve(this.hr.get(e))}saveBundleMetadata(t,e){return this.hr.set(e.id,function(i){return{id:i.id,version:i.version,createTime:be(i.createTime)}}(e)),nt.resolve()}getNamedQuery(t,e){return nt.resolve(this.Pr.get(e))}saveNamedQuery(t,e){return this.Pr.set(e.name,function(i){return{name:i.name,query:Hy(i.bundledQuery),readTime:be(i.readTime)}}(e)),nt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.overlays=new jt(gt.comparator),this.Ir=new Map}getOverlay(t,e){return nt.resolve(this.overlays.get(e))}getOverlays(t,e){const r=Ye();return nt.forEach(e,i=>this.getOverlay(t,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(t,e,r){return r.forEach((i,o)=>{this.ht(t,e,o)}),nt.resolve()}removeOverlaysForBatchId(t,e,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),nt.resolve()}getOverlaysForCollection(t,e,r){const i=Ye(),o=e.length+1,s=new gt(e.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return nt.resolve(i)}getOverlaysForCollectionGroup(t,e,r,i){let o=new jt((c,d)=>c-d);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>r){let d=o.get(c.largestBatchId);d===null&&(d=Ye(),o=o.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=Ye(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=i)););return nt.resolve(l)}ht(t,e,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ey(e,r));let o=this.Ir.get(e);o===void 0&&(o=Ot(),this.Ir.set(e,o)),this.Ir.set(e,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(t){return nt.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,nt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.Tr=new Zt(Gt.Er),this.dr=new Zt(Gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,e){const r=new Gt(t,e);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(t,e){t.forEach(r=>this.addReference(r,e))}removeReference(t,e){this.Vr(new Gt(t,e))}mr(t,e){t.forEach(r=>this.removeReference(r,e))}gr(t){const e=new gt(new Mt([])),r=new Gt(e,t),i=new Gt(e,t+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){const e=new gt(new Mt([])),r=new Gt(e,t),i=new Gt(e,t+1);let o=Ot();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(t){const e=new Gt(t,0),r=this.Tr.firstAfterOrEqual(e);return r!==null&&t.isEqual(r.key)}}class Gt{constructor(t,e){this.key=t,this.wr=e}static Er(t,e){return gt.comparator(t.key,e.key)||xt(t.wr,e.wr)}static Ar(t,e){return xt(t.wr,e.wr)||gt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.Sr=1,this.br=new Zt(Gt.Er)}checkEmpty(t){return nt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new by(o,e,r,i);this.mutationQueue.push(s);for(const l of i)this.br=this.br.add(new Gt(l.key,o)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return nt.resolve(s)}lookupMutationBatch(t,e){return nt.resolve(this.Dr(e))}getNextMutationBatchAfterBatchId(t,e){const r=e+1,i=this.vr(r),o=i<0?0:i;return nt.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const r=new Gt(e,0),i=new Gt(e,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const l=this.Dr(s.wr);o.push(l)}),nt.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let r=new Zt(xt);return e.forEach(i=>{const o=new Gt(i,0),s=new Gt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],l=>{r=r.add(l.wr)})}),nt.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(t,e){const r=e.path,i=r.length+1;let o=r;gt.isDocumentKey(o)||(o=o.child(""));const s=new Gt(new gt(o),0);let l=new Zt(xt);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},s),nt.resolve(this.Cr(l))}Cr(t){const e=[];return t.forEach(r=>{const i=this.Dr(r);i!==null&&e.push(i)}),e}removeMutationBatch(t,e){Nt(this.Fr(e.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return nt.forEach(e.mutations,i=>{const o=new Gt(i.key,e.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.br=r})}On(t){}containsKey(t,e){const r=new Gt(e,0),i=this.br.firstAfterOrEqual(r);return nt.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,nt.resolve()}Fr(t,e){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){const e=this.vr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(t){this.Mr=t,this.docs=function(){return new jt(gt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(e);return this.docs=this.docs.insert(r,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const r=this.docs.get(e);return nt.resolve(r?r.document.mutableCopy():ie.newInvalidDocument(e))}getEntries(t,e){let r=xe();return e.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ie.newInvalidDocument(i))}),nt.resolve(r)}getDocumentsMatchingQuery(t,e,r,i){let o=xe();const s=e.path,l=new gt(s.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||Vm(Mm(d),r)<=0||(i.has(d.key)||Ci(e,d))&&(o=o.insert(d.key,d.mutableCopy()))}return nt.resolve(o)}getAllFromCollectionGroup(t,e,r,i){vt()}Or(t,e){return nt.forEach(this.docs,r=>e(r))}newChangeBuffer(t){return new nv(this)}getSize(t){return nt.resolve(this.size)}}class nv extends Wy{constructor(t){super(),this.cr=t}applyChanges(t){const e=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?e.push(this.cr.addEntry(t,i)):this.cr.removeEntry(r)}),nt.waitFor(e)}getFromCache(t,e){return this.cr.getEntry(t,e)}getAllFromCache(t,e){return this.cr.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(t){this.persistence=t,this.Nr=new Ln(e=>bs(e),Es),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Is,this.targetCount=0,this.kr=In.Bn()}forEachTarget(t,e){return this.Nr.forEach((r,i)=>e(i)),nt.resolve()}getLastRemoteSnapshotVersion(t){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nt.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,r){return r&&(this.lastRemoteSnapshotVersion=r),e>this.Lr&&(this.Lr=e),nt.resolve()}Kn(t){this.Nr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.kr=new In(e),this.highestTargetId=e),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,e){return this.Kn(e),this.targetCount+=1,nt.resolve()}updateTargetData(t,e){return this.Kn(e),nt.resolve()}removeTargetData(t,e){return this.Nr.delete(e.target),this.Br.gr(e.targetId),this.targetCount-=1,nt.resolve()}removeTargets(t,e,r){let i=0;const o=[];return this.Nr.forEach((s,l)=>{l.sequenceNumber<=e&&r.get(l.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,l.targetId)),i++)}),nt.waitFor(o).next(()=>i)}getTargetCount(t){return nt.resolve(this.targetCount)}getTargetData(t,e){const r=this.Nr.get(e)||null;return nt.resolve(r)}addMatchingKeys(t,e,r){return this.Br.Rr(e,r),nt.resolve()}removeMatchingKeys(t,e,r){this.Br.mr(e,r);const i=this.persistence.referenceDelegate,o=[];return i&&e.forEach(s=>{o.push(i.markPotentiallyOrphaned(t,s))}),nt.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Br.gr(e),nt.resolve()}getMatchingKeysForTargetId(t,e){const r=this.Br.yr(e);return nt.resolve(r)}containsKey(t,e){return nt.resolve(this.Br.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,e){this.qr={},this.overlays={},this.Qr=new ms(0),this.Kr=!1,this.Kr=!0,this.$r=new Jy,this.referenceDelegate=t(this),this.Ur=new rv(this),this.indexManager=new Ky,this.remoteDocumentCache=function(i){return new ev(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zy(e),this.Gr=new Yy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Zy,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let r=this.qr[t.toKey()];return r||(r=new tv(e,this.referenceDelegate),this.qr[t.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,e,r){ct("MemoryPersistence","Starting transaction:",t);const i=new ov(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(t,e){return nt.or(Object.values(this.qr).map(r=>()=>r.containsKey(t,e)))}}class ov extends Bm{constructor(t){super(),this.currentSequenceNumber=t}}class Rs{constructor(t){this.persistence=t,this.Jr=new Is,this.Yr=null}static Zr(t){return new Rs(t)}get Xr(){if(this.Yr)return this.Yr;throw vt()}addReference(t,e,r){return this.Jr.addReference(r,e),this.Xr.delete(r.toString()),nt.resolve()}removeReference(t,e,r){return this.Jr.removeReference(r,e),this.Xr.add(r.toString()),nt.resolve()}markPotentiallyOrphaned(t,e){return this.Xr.add(e.toString()),nt.resolve()}removeTarget(t,e){this.Jr.gr(e.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(t,e))}zr(){this.Yr=new Set}jr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.Xr,r=>{const i=gt.fromPath(r);return this.ei(t,i).next(o=>{o||e.removeEntry(i,bt.min())})}).next(()=>(this.Yr=null,e.apply(t)))}updateLimboDocument(t,e){return this.ei(t,e).next(r=>{r?this.Xr.delete(e.toString()):this.Xr.add(e.toString())})}Wr(t){return 0}ei(t,e){return nt.or([()=>nt.resolve(this.Jr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Hr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,e,r,i){this.targetId=t,this.fromCache=e,this.$i=r,this.Ui=i}static Wi(t,e){let r=Ot(),i=Ot();for(const o of e.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Ss(t,e.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return pg()?8:Fm(hg())>0?6:4}()}initialize(t,e){this.Ji=t,this.indexManager=e,this.Gi=!0}getDocumentsMatchingQuery(t,e,r,i){const o={result:null};return this.Yi(t,e).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(t,e,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new sv;return this.Xi(t,e,s).next(l=>{if(o.result=l,this.zi)return this.es(t,e,s,l.size)})}).next(()=>o.result)}es(t,e,r,i){return r.documentReadCount<this.ji?(rr()<=St.DEBUG&&ct("QueryEngine","SDK will not create cache indexes for query:",yn(e),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),nt.resolve()):(rr()<=St.DEBUG&&ct("QueryEngine","Query:",yn(e),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(rr()<=St.DEBUG&&ct("QueryEngine","The SDK decides to create cache indexes for query:",yn(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,_e(e))):nt.resolve())}Yi(t,e){if(Tl(e))return nt.resolve(null);let r=_e(e);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(e.limit!==null&&i===1&&(e=Ho(e,null,"F"),r=_e(e)),this.indexManager.getDocumentsMatchingTarget(t,r).next(o=>{const s=Ot(...o);return this.Ji.getDocuments(t,s).next(l=>this.indexManager.getMinOffset(t,r).next(u=>{const c=this.ts(e,l);return this.ns(e,c,s,u.readTime)?this.Yi(t,Ho(e,null,"F")):this.rs(t,c,e,u)}))})))}Zi(t,e,r,i){return Tl(e)||i.isEqual(bt.min())?nt.resolve(null):this.Ji.getDocuments(t,r).next(o=>{const s=this.ts(e,o);return this.ns(e,s,r,i)?nt.resolve(null):(rr()<=St.DEBUG&&ct("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yn(e)),this.rs(t,s,e,Lm(i,-1)).next(l=>l))})}ts(t,e){let r=new Zt(Sc(t));return e.forEach((i,o)=>{Ci(t,o)&&(r=r.add(o))}),r}ns(t,e,r,i){if(t.limit===null)return!1;if(r.size!==e.size)return!0;const o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(t,e,r){return rr()<=St.DEBUG&&ct("QueryEngine","Using full collection scan to execute query:",yn(e)),this.Ji.getDocumentsMatchingQuery(t,e,Ue.min(),r)}rs(t,e,r,i){return this.Ji.getDocumentsMatchingQuery(t,r,i).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(t,e,r,i){this.persistence=t,this.ss=e,this.serializer=i,this.os=new jt(xt),this._s=new Ln(o=>bs(o),Es),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(r)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Xy(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.os))}}function uv(n,t,e,r){return new lv(n,t,e,r)}async function Xc(n,t){const e=Et(n);return await e.persistence.runTransaction("Handle user change","readonly",r=>{let i;return e.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,e.ls(t),e.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let u=Ot();for(const c of i){s.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of o){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return e.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:l}))})})}function cv(n,t){const e=Et(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=e.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const h=c.batch,f=h.keys();let p=nt.resolve();return f.forEach(m=>{p=p.next(()=>d.getEntry(u,m)).next(_=>{const g=c.docVersions.get(m);Nt(g!==null),_.version.compareTo(g)<0&&(h.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(u,h))}(e,r,t,o).next(()=>o.apply(r)).next(()=>e.mutationQueue.performConsistencyCheck(r)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Ot();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(t))).next(()=>e.localDocuments.getDocuments(r,i))})}function Yc(n){const t=Et(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Ur.getLastRemoteSnapshotVersion(e))}function fv(n,t){const e=Et(n),r=t.snapshotVersion;let i=e.os;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=e.cs.newChangeBuffer({trackRemovals:!0});i=e.os;const l=[];t.targetChanges.forEach((d,h)=>{const f=i.get(h);if(!f)return;l.push(e.Ur.removeMatchingKeys(o,d.removedDocuments,h).next(()=>e.Ur.addMatchingKeys(o,d.addedDocuments,h)));let p=f.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(h)!==null?p=p.withResumeToken(Jt.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,r)),i=i.insert(h,p),function(_,g,v){return _.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,p,d)&&l.push(e.Ur.updateTargetData(o,p))});let u=xe(),c=Ot();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(o,d))}),l.push(hv(o,s,t.documentUpdates).next(d=>{u=d.Ps,c=d.Is})),!r.isEqual(bt.min())){const d=e.Ur.getLastRemoteSnapshotVersion(o).next(h=>e.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(d)}return nt.waitFor(l).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(e.os=i,o))}function hv(n,t,e){let r=Ot(),i=Ot();return e.forEach(o=>r=r.add(o)),t.getEntries(n,r).next(o=>{let s=xe();return e.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(bt.min())?(t.removeEntry(l,u.readTime),s=s.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),s=s.insert(l,u)):ct("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function dv(n,t){const e=Et(n);return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function pv(n,t){const e=Et(n);return e.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return e.Ur.getTargetData(r,t).next(o=>o?(i=o,nt.resolve(i)):e.Ur.allocateTargetId(r).next(s=>(i=new Me(t,s,"TargetPurposeListen",r.currentSequenceNumber),e.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=e.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(e.os=e.os.insert(r.targetId,r),e._s.set(t,r.targetId)),r})}async function Xo(n,t,e){const r=Et(n),i=r.os.get(t),o=e?"readwrite":"readwrite-primary";try{e||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Pr(s))throw s;ct("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}r.os=r.os.remove(t),r._s.delete(i.target)}function Nl(n,t,e){const r=Et(n);let i=bt.min(),o=Ot();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,d){const h=Et(u),f=h._s.get(d);return f!==void 0?nt.resolve(h.os.get(f)):h.Ur.getTargetData(c,d)}(r,s,_e(t)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,l.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,t,e?i:bt.min(),e?o:Ot())).next(l=>(gv(r,oy(t),l),{documents:l,Ts:o})))}function gv(n,t,e){let r=n.us.get(t)||bt.min();e.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(t,r)}class Dl{constructor(){this.activeTargetIds=fy()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mv{constructor(){this.so=new Dl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,r){}addLocalQueryTarget(t){return this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,e,r){this.oo[t]=e}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Dl,Promise.resolve()}handleUserChange(t,e,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{_o(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ct("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.ho)t(0)}lo(){ct("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jr=null;function To(){return Jr===null?Jr=function(){return 268435456+Math.round(2147483648*Math.random())}():Jr++,"0x"+Jr.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne="WebChannelConnection";class bv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+e.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(e,r,i,o,s){const l=To(),u=this.xo(e,r.toUriEncodedString());ct("RestConnection",`Sending RPC '${e}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(e,u,c,i).then(d=>(ct("RestConnection",`Received RPC '${e}' ${l}: `,d),d),d=>{throw Tn("RestConnection",`RPC '${e}' ${l} failed with error: `,d,"url: ",u,"request:",i),d})}Lo(e,r,i,o,s,l){return this.Mo(e,r,i,o,s)}Oo(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nn}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>e[s]=o),i&&i.headers.forEach((o,s)=>e[s]=o)}xo(e,r){const i=vv[e];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,e,r,i){const o=To();return new Promise((s,l)=>{const u=new uc;u.setWithCredentials(!0),u.listenOnce(fc.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case oi.NO_ERROR:const d=u.getResponseJson();ct(ne,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),s(d);break;case oi.TIMEOUT:ct(ne,`RPC '${t}' ${o} timed out`),l(new dt(it.DEADLINE_EXCEEDED,"Request time out"));break;case oi.HTTP_ERROR:const h=u.getStatus();if(ct(ne,`RPC '${t}' ${o} failed with status:`,h,"response text:",u.getResponseText()),h>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const m=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(v)>=0?v:it.UNKNOWN}(p.status);l(new dt(m,p.message))}else l(new dt(it.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new dt(it.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{ct(ne,`RPC '${t}' ${o} completed.`)}});const c=JSON.stringify(i);ct(ne,`RPC '${t}' ${o} sending request:`,i),u.send(e,"POST",c,r,15)})}Bo(t,e,r){const i=To(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=pc(),l=dc(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new cc({})),this.Oo(u.initMessageHeaders,e,r),u.encodeInitMessageHeaders=!0;const d=o.join("");ct(ne,`Creating RPC '${t}' stream ${i}: ${d}`,u);const h=s.createWebChannel(d,u);let f=!1,p=!1;const m=new _v({Io:g=>{p?ct(ne,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(f||(ct(ne,`Opening RPC '${t}' stream ${i} transport.`),h.open(),f=!0),ct(ne,`RPC '${t}' stream ${i} sending:`,g),h.send(g))},To:()=>h.close()}),_=(g,v,b)=>{g.listen(v,A=>{try{b(A)}catch(y){setTimeout(()=>{throw y},0)}})};return _(h,lr.EventType.OPEN,()=>{p||(ct(ne,`RPC '${t}' stream ${i} transport opened.`),m.yo())}),_(h,lr.EventType.CLOSE,()=>{p||(p=!0,ct(ne,`RPC '${t}' stream ${i} transport closed`),m.So())}),_(h,lr.EventType.ERROR,g=>{p||(p=!0,Tn(ne,`RPC '${t}' stream ${i} transport errored:`,g),m.So(new dt(it.UNAVAILABLE,"The operation could not be completed")))}),_(h,lr.EventType.MESSAGE,g=>{var v;if(!p){const b=g.data[0];Nt(!!b);const A=b,y=A.error||((v=A[0])===null||v===void 0?void 0:v.error);if(y){ct(ne,`RPC '${t}' stream ${i} received error:`,y);const P=y.status;let C=function(x){const O=zt[x];if(O!==void 0)return Fc(O)}(P),I=y.message;C===void 0&&(C=it.INTERNAL,I="Unknown error status: "+P+" with message "+y.message),p=!0,m.So(new dt(C,I)),h.close()}else ct(ne,`RPC '${t}' stream ${i} received:`,b),m.bo(b)}}),_(l,hc.STAT_EVENT,g=>{g.stat===Fo.PROXY?ct(ne,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===Fo.NOPROXY&&ct(ne,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.wo()},0),m}}function wo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(n){return new xy(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(t,e,r=1e3,i=1.5,o=6e4){this.ui=t,this.timerId=e,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();const e=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,e-r);i>0&&ct("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${e} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,e,r,i,o,s,l,u){this.ui=t,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zc(t,e)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(t,e){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():e&&e.code===it.RESOURCE_EXHAUSTED?(Pe(e.toString()),Pe("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):e&&e.code===it.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.mo(e)}l_(){}auth(){this.state=1;const t=this.h_(this.Yo),e=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===e&&this.P_(r,i)},r=>{t(()=>{const i=new dt(it.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(t,e){const r=this.h_(this.Yo);this.stream=this.T_(t,e),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(t){return ct("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return e=>{this.ui.enqueueAndForget(()=>this.Yo===t?e():(ct("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ev extends Jc{constructor(t,e,r,i,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,r,i,s),this.serializer=o}T_(t,e){return this.connection.Bo("Listen",t,e)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();const e=Ny(this.serializer,t),r=function(o){if(!("targetChange"in o))return bt.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?bt.min():s.readTime?be(s.readTime):bt.min()}(t);return this.listener.d_(e,r)}A_(t){const e={};e.database=Qo(this.serializer),e.addTarget=function(o,s){let l;const u=s.target;if(l=zo(u)?{documents:My(o,u)}:{query:Vy(o,u)._t},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=$c(o,s.resumeToken);const c=Ko(o,s.expectedCount);c!==null&&(l.expectedCount=c)}else if(s.snapshotVersion.compareTo(bt.min())>0){l.readTime=vi(o,s.snapshotVersion.toTimestamp());const c=Ko(o,s.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,t);const r=By(this.serializer,t);r&&(e.labels=r),this.a_(e)}R_(t){const e={};e.database=Qo(this.serializer),e.removeTarget=t,this.a_(e)}}class Tv extends Jc{constructor(t,e,r,i,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,e){return this.connection.Bo("Write",t,e)}E_(t){return Nt(!!t.streamToken),this.lastStreamToken=t.streamToken,Nt(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Nt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();const e=Ly(t.writeResults,t.commitTime),r=be(t.commitTime);return this.listener.g_(r,e)}p_(){const t={};t.database=Qo(this.serializer),this.a_(t)}m_(t){const e={streamToken:this.lastStreamToken,writes:t.map(r=>Dy(this.serializer,r))};this.a_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends class{}{constructor(t,e,r,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new dt(it.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,e,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(t,Go(e,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new dt(it.UNKNOWN,o.toString())})}Lo(t,e,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.Lo(t,Go(e,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new dt(it.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Av{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pe(e),this.D_=!1):ct("OnlineStateTracker",e)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(t,e,r,i,o){this.localStore=t,this.datastore=e,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{un(this)&&(ct("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=Et(u);c.L_.add(4),await Cr(c),c.q_.set("Unknown"),c.L_.delete(4),await Vi(c)}(this))})}),this.q_=new Av(r,i)}}async function Vi(n){if(un(n))for(const t of n.B_)await t(!0)}async function Cr(n){for(const t of n.B_)await t(!1)}function tf(n,t){const e=Et(n);e.N_.has(t.targetId)||(e.N_.set(t.targetId,t),Cs(e)?ks(e):Mn(e).r_()&&xs(e,t))}function Ps(n,t){const e=Et(n),r=Mn(e);e.N_.delete(t),r.r_()&&ef(e,t),e.N_.size===0&&(r.r_()?r.o_():un(e)&&e.q_.set("Unknown"))}function xs(n,t){if(n.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(bt.min())>0){const e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Mn(n).A_(t)}function ef(n,t){n.Q_.xe(t),Mn(n).R_(t)}function ks(n){n.Q_=new Iy({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.N_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),Mn(n).start(),n.q_.v_()}function Cs(n){return un(n)&&!Mn(n).n_()&&n.N_.size>0}function un(n){return Et(n).L_.size===0}function nf(n){n.Q_=void 0}async function Iv(n){n.q_.set("Online")}async function Rv(n){n.N_.forEach((t,e)=>{xs(n,t)})}async function Sv(n,t){nf(n),Cs(n)?(n.q_.M_(t),ks(n)):n.q_.set("Unknown")}async function Pv(n,t,e){if(n.q_.set("Online"),t instanceof Uc&&t.state===2&&t.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.N_.delete(l),i.Q_.removeTarget(l))}(n,t)}catch(r){ct("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await _i(n,r)}else if(t instanceof li?n.Q_.Ke(t):t instanceof qc?n.Q_.He(t):n.Q_.We(t),!e.isEqual(bt.min()))try{const r=await Yc(n.localStore);e.compareTo(r)>=0&&await function(o,s){const l=o.Q_.rt(s);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=o.N_.get(c);d&&o.N_.set(c,d.withResumeToken(u.resumeToken,s))}}),l.targetMismatches.forEach((u,c)=>{const d=o.N_.get(u);if(!d)return;o.N_.set(u,d.withResumeToken(Jt.EMPTY_BYTE_STRING,d.snapshotVersion)),ef(o,u);const h=new Me(d.target,u,c,d.sequenceNumber);xs(o,h)}),o.remoteSyncer.applyRemoteEvent(l)}(n,e)}catch(r){ct("RemoteStore","Failed to raise snapshot:",r),await _i(n,r)}}async function _i(n,t,e){if(!Pr(t))throw t;n.L_.add(1),await Cr(n),n.q_.set("Offline"),e||(e=()=>Yc(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ct("RemoteStore","Retrying IndexedDB access"),await e(),n.L_.delete(1),await Vi(n)})}function rf(n,t){return t().catch(e=>_i(n,e,t))}async function ji(n){const t=Et(n),e=ze(t);let r=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;xv(t);)try{const i=await dv(t.localStore,r);if(i===null){t.O_.length===0&&e.o_();break}r=i.batchId,kv(t,i)}catch(i){await _i(t,i)}of(t)&&sf(t)}function xv(n){return un(n)&&n.O_.length<10}function kv(n,t){n.O_.push(t);const e=ze(n);e.r_()&&e.V_&&e.m_(t.mutations)}function of(n){return un(n)&&!ze(n).n_()&&n.O_.length>0}function sf(n){ze(n).start()}async function Cv(n){ze(n).p_()}async function Nv(n){const t=ze(n);for(const e of n.O_)t.m_(e.mutations)}async function Dv(n,t,e){const r=n.O_.shift(),i=ws.from(r,t,e);await rf(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await ji(n)}async function Lv(n,t){t&&ze(n).V_&&await async function(r,i){if(function(s){return wy(s)&&s!==it.ABORTED}(i.code)){const o=r.O_.shift();ze(r).s_(),await rf(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await ji(r)}}(n,t),of(n)&&sf(n)}async function Ml(n,t){const e=Et(n);e.asyncQueue.verifyOperationInProgress(),ct("RemoteStore","RemoteStore received new credentials");const r=un(e);e.L_.add(3),await Cr(e),r&&e.q_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.L_.delete(3),await Vi(e)}async function Mv(n,t){const e=Et(n);t?(e.L_.delete(2),await Vi(e)):t||(e.L_.add(2),await Cr(e),e.q_.set("Unknown"))}function Mn(n){return n.K_||(n.K_=function(e,r,i){const o=Et(e);return o.w_(),new Ev(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Iv.bind(null,n),Ro:Rv.bind(null,n),mo:Sv.bind(null,n),d_:Pv.bind(null,n)}),n.B_.push(async t=>{t?(n.K_.s_(),Cs(n)?ks(n):n.q_.set("Unknown")):(await n.K_.stop(),nf(n))})),n.K_}function ze(n){return n.U_||(n.U_=function(e,r,i){const o=Et(e);return o.w_(),new Tv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Cv.bind(null,n),mo:Lv.bind(null,n),f_:Nv.bind(null,n),g_:Dv.bind(null,n)}),n.B_.push(async t=>{t?(n.U_.s_(),await ji(n)):(await n.U_.stop(),n.O_.length>0&&(ct("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,e,r,i,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Fe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,r,i,o){const s=Date.now()+r,l=new Ns(t,e,s,i,o);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dt(it.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ds(n,t){if(Pe("AsyncQueue",`${t}: ${n}`),Pr(n))return new dt(it.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t){this.comparator=t?(e,r)=>t(e,r)||gt.comparator(e.key,r.key):(e,r)=>gt.comparator(e.key,r.key),this.keyedMap=ur(),this.sortedSet=new jt(this.comparator)}static emptySet(t){return new bn(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,r)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof bn)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;e.hasNext();){const i=e.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const r=new bn;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=e,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.W_=new jt(gt.comparator)}track(t){const e=t.doc.key,r=this.W_.get(e);r?t.type!==0&&r.type===3?this.W_=this.W_.insert(e,t):t.type===3&&r.type!==1?this.W_=this.W_.insert(e,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.W_=this.W_.insert(e,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.W_=this.W_.remove(e):t.type===1&&r.type===2?this.W_=this.W_.insert(e,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.W_=this.W_.insert(e,{type:2,doc:t.doc}):vt():this.W_=this.W_.insert(e,t)}G_(){const t=[];return this.W_.inorderTraversal((e,r)=>{t.push(r)}),t}}class Rn{constructor(t,e,r,i,o,s,l,u,c){this.query=t,this.docs=e,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,e,r,i,o){const s=[];return e.forEach(l=>{s.push({type:0,doc:l})}),new Rn(t,e,bn.emptySet(e),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ki(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,r=t.docChanges;if(e.length!==r.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==r[i].type||!e[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}}class jv{constructor(){this.queries=jl(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(e,r){const i=Et(e),o=i.queries;i.queries=jl(),o.forEach((s,l)=>{for(const u of l.j_)u.onError(r)})})(this,new dt(it.ABORTED,"Firestore shutting down"))}}function jl(){return new Ln(n=>Rc(n),ki)}async function Bv(n,t){const e=Et(n);let r=3;const i=t.query;let o=e.queries.get(i);o?!o.H_()&&t.J_()&&(r=2):(o=new Vv,r=t.J_()?0:1);try{switch(r){case 0:o.z_=await e.onListen(i,!0);break;case 1:o.z_=await e.onListen(i,!1);break;case 2:await e.onFirstRemoteStoreListen(i)}}catch(s){const l=Ds(s,`Initialization of query '${yn(t.query)}' failed`);return void t.onError(l)}e.queries.set(i,o),o.j_.push(t),t.Z_(e.onlineState),o.z_&&t.X_(o.z_)&&Ls(e)}async function Fv(n,t){const e=Et(n),r=t.query;let i=3;const o=e.queries.get(r);if(o){const s=o.j_.indexOf(t);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=t.J_()?0:1:!o.H_()&&t.J_()&&(i=2))}switch(i){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function qv(n,t){const e=Et(n);let r=!1;for(const i of t){const o=i.query,s=e.queries.get(o);if(s){for(const l of s.j_)l.X_(i)&&(r=!0);s.z_=i}}r&&Ls(e)}function Uv(n,t,e){const r=Et(n),i=r.queries.get(t);if(i)for(const o of i.j_)o.onError(e);r.queries.delete(t)}function Ls(n){n.Y_.forEach(t=>{t.next()})}var Yo,Bl;(Bl=Yo||(Yo={})).ea="default",Bl.Cache="cache";class $v{constructor(t,e,r){this.query=t,this.ta=e,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Rn(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.na?this.ia(t)&&(this.ta.next(t),e=!0):this.sa(t,this.onlineState)&&(this.oa(t),e=!0),this.ra=t,e}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let e=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),e=!0),e}sa(t,e){if(!t.fromCache||!this.J_())return!0;const r=e!=="Offline";return(!this.options._a||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ia(t){if(t.docChanges.length>0)return!0;const e=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}oa(t){t=Rn.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==Yo.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(t){this.key=t}}class lf{constructor(t){this.key=t}}class zv{constructor(t,e){this.query=t,this.Ta=e,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ot(),this.mutatedKeys=Ot(),this.Aa=Sc(t),this.Ra=new bn(this.Aa)}get Va(){return this.Ta}ma(t,e){const r=e?e.fa:new Vl,i=e?e.Ra:this.Ra;let o=e?e.mutatedKeys:this.mutatedKeys,s=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((d,h)=>{const f=i.get(d),p=Ci(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let g=!1;f&&p?f.data.isEqual(p.data)?m!==_&&(r.track({type:3,doc:p}),g=!0):this.ga(f,p)||(r.track({type:2,doc:p}),g=!0,(u&&this.Aa(p,u)>0||c&&this.Aa(p,c)<0)&&(l=!0)):!f&&p?(r.track({type:0,doc:p}),g=!0):f&&!p&&(r.track({type:1,doc:f}),g=!0,(u||c)&&(l=!0)),g&&(p?(s=s.add(p),o=_?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:l,mutatedKeys:o}}ga(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,r,i){const o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;const s=t.fa.G_();s.sort((d,h)=>function(p,m){const _=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return _(p)-_(m)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;const l=e&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,s.length!==0||c?{snapshot:new Rn(this.query,t.Ra,o,s,t.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vl,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(e=>this.Ta=this.Ta.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ta=this.Ta.delete(e)),this.current=t.current)}ya(){if(!this.current)return[];const t=this.da;this.da=Ot(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const e=[];return t.forEach(r=>{this.da.has(r)||e.push(new lf(r))}),this.da.forEach(r=>{t.has(r)||e.push(new af(r))}),e}ba(t){this.Ta=t.Ts,this.da=Ot();const e=this.ma(t.documents);return this.applyChanges(e,!0)}Da(){return Rn.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Hv{constructor(t,e,r){this.query=t,this.targetId=e,this.view=r}}class Kv{constructor(t){this.key=t,this.va=!1}}class Gv{constructor(t,e,r,i,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Ln(l=>Rc(l),ki),this.Ma=new Map,this.xa=new Set,this.Oa=new jt(gt.comparator),this.Na=new Map,this.La=new Is,this.Ba={},this.ka=new Map,this.qa=In.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Wv(n,t,e=!0){const r=pf(n);let i;const o=r.Fa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await uf(r,t,e,!0),i}async function Qv(n,t){const e=pf(n);await uf(e,t,!0,!1)}async function uf(n,t,e,r){const i=await pv(n.localStore,_e(t)),o=i.targetId,s=e?n.sharedClientState.addLocalQueryTarget(o):"not-current";let l;return r&&(l=await Xv(n,t,o,s==="current",i.resumeToken)),n.isPrimaryClient&&e&&tf(n.remoteStore,i),l}async function Xv(n,t,e,r,i){n.Ka=(h,f,p)=>async function(_,g,v,b){let A=g.view.ma(v);A.ns&&(A=await Nl(_.localStore,g.query,!1).then(({documents:I})=>g.view.ma(I,A)));const y=b&&b.targetChanges.get(g.targetId),P=b&&b.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(A,_.isPrimaryClient,y,P);return ql(_,g.targetId,C.wa),C.snapshot}(n,h,f,p);const o=await Nl(n.localStore,t,!0),s=new zv(t,o.Ts),l=s.ma(o.documents),u=kr.createSynthesizedTargetChangeForCurrentChange(e,r&&n.onlineState!=="Offline",i),c=s.applyChanges(l,n.isPrimaryClient,u);ql(n,e,c.wa);const d=new Hv(t,e,s);return n.Fa.set(t,d),n.Ma.has(e)?n.Ma.get(e).push(t):n.Ma.set(e,[t]),c.snapshot}async function Yv(n,t,e){const r=Et(n),i=r.Fa.get(t),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!ki(s,t))),void r.Fa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Xo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),e&&Ps(r.remoteStore,i.targetId),Zo(r,i.targetId)}).catch(Sr)):(Zo(r,i.targetId),await Xo(r.localStore,i.targetId,!0))}async function Zv(n,t){const e=Et(n),r=e.Fa.get(t),i=e.Ma.get(r.targetId);e.isPrimaryClient&&i.length===1&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),Ps(e.remoteStore,r.targetId))}async function Jv(n,t,e){const r=s_(n);try{const i=await function(s,l){const u=Et(s),c=Kt.now(),d=l.reduce((p,m)=>p.add(m.key),Ot());let h,f;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=xe(),_=Ot();return u.cs.getEntries(p,d).next(g=>{m=g,m.forEach((v,b)=>{b.isValidDocument()||(_=_.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,m)).next(g=>{h=g;const v=[];for(const b of l){const A=vy(b,h.get(b.key).overlayedDocument);A!=null&&v.push(new ln(b.key,A,_c(A.value.mapValue),Oe.exists(!0)))}return u.mutationQueue.addMutationBatch(p,c,v,l)}).next(g=>{f=g;const v=g.applyToLocalDocumentSet(h,_);return u.documentOverlayCache.saveOverlays(p,g.batchId,v)})}).then(()=>({batchId:f.batchId,changes:xc(h)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,u){let c=s.Ba[s.currentUser.toKey()];c||(c=new jt(xt)),c=c.insert(l,u),s.Ba[s.currentUser.toKey()]=c}(r,i.batchId,e),await Nr(r,i.changes),await ji(r.remoteStore)}catch(i){const o=Ds(i,"Failed to persist write");e.reject(o)}}async function cf(n,t){const e=Et(n);try{const r=await fv(e.localStore,t);t.targetChanges.forEach((i,o)=>{const s=e.Na.get(o);s&&(Nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Nt(s.va):i.removedDocuments.size>0&&(Nt(s.va),s.va=!1))}),await Nr(e,r,t)}catch(r){await Sr(r)}}function Fl(n,t,e){const r=Et(n);if(r.isPrimaryClient&&e===0||!r.isPrimaryClient&&e===1){const i=[];r.Fa.forEach((o,s)=>{const l=s.view.Z_(t);l.snapshot&&i.push(l.snapshot)}),function(s,l){const u=Et(s);u.onlineState=l;let c=!1;u.queries.forEach((d,h)=>{for(const f of h.j_)f.Z_(l)&&(c=!0)}),c&&Ls(u)}(r.eventManager,t),i.length&&r.Ca.d_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function t_(n,t,e){const r=Et(n);r.sharedClientState.updateQueryState(t,"rejected",e);const i=r.Na.get(t),o=i&&i.key;if(o){let s=new jt(gt.comparator);s=s.insert(o,ie.newNoDocument(o,bt.min()));const l=Ot().add(o),u=new Li(bt.min(),new Map,new jt(xt),s,l);await cf(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(t),Ms(r)}else await Xo(r.localStore,t,!1).then(()=>Zo(r,t,e)).catch(Sr)}async function e_(n,t){const e=Et(n),r=t.batch.batchId;try{const i=await cv(e.localStore,t);hf(e,r,null),ff(e,r),e.sharedClientState.updateMutationState(r,"acknowledged"),await Nr(e,i)}catch(i){await Sr(i)}}async function n_(n,t,e){const r=Et(n);try{const i=await function(s,l){const u=Et(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(h=>(Nt(h!==null),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,t);hf(r,t,e),ff(r,t),r.sharedClientState.updateMutationState(t,"rejected",e),await Nr(r,i)}catch(i){await Sr(i)}}function ff(n,t){(n.ka.get(t)||[]).forEach(e=>{e.resolve()}),n.ka.delete(t)}function hf(n,t,e){const r=Et(n);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(e?o.reject(e):o.resolve(),i=i.remove(t)),r.Ba[r.currentUser.toKey()]=i}}function Zo(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.Ma.get(t))n.Fa.delete(r),e&&n.Ca.$a(r,e);n.Ma.delete(t),n.isPrimaryClient&&n.La.gr(t).forEach(r=>{n.La.containsKey(r)||df(n,r)})}function df(n,t){n.xa.delete(t.path.canonicalString());const e=n.Oa.get(t);e!==null&&(Ps(n.remoteStore,e),n.Oa=n.Oa.remove(t),n.Na.delete(e),Ms(n))}function ql(n,t,e){for(const r of e)r instanceof af?(n.La.addReference(r.key,t),r_(n,r)):r instanceof lf?(ct("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,t),n.La.containsKey(r.key)||df(n,r.key)):vt()}function r_(n,t){const e=t.key,r=e.path.canonicalString();n.Oa.get(e)||n.xa.has(r)||(ct("SyncEngine","New document in limbo: "+e),n.xa.add(r),Ms(n))}function Ms(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const t=n.xa.values().next().value;n.xa.delete(t);const e=new gt(Mt.fromString(t)),r=n.qa.next();n.Na.set(r,new Kv(e)),n.Oa=n.Oa.insert(e,r),tf(n.remoteStore,new Me(_e(Ic(e.path)),r,"TargetPurposeLimboResolution",ms.oe))}}async function Nr(n,t,e){const r=Et(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{s.push(r.Ka(u,t,e).then(c=>{var d;if((c||e)&&r.isPrimaryClient){const h=c?!c.fromCache:(d=e==null?void 0:e.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){i.push(c);const h=Ss.Wi(u.targetId,c);o.push(h)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(u,c){const d=Et(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>nt.forEach(c,f=>nt.forEach(f.$i,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>nt.forEach(f.Ui,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Pr(h))throw h;ct("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const p=d.os.get(f),m=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(m);d.os=d.os.insert(f,_)}}}(r.localStore,o))}async function i_(n,t){const e=Et(n);if(!e.currentUser.isEqual(t)){ct("SyncEngine","User change. New user:",t.toKey());const r=await Xc(e.localStore,t);e.currentUser=t,function(o,s){o.ka.forEach(l=>{l.forEach(u=>{u.reject(new dt(it.CANCELLED,s))})}),o.ka.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Nr(e,r.hs)}}function o_(n,t){const e=Et(n),r=e.Na.get(t);if(r&&r.va)return Ot().add(r.key);{let i=Ot();const o=e.Ma.get(t);if(!o)return i;for(const s of o){const l=e.Fa.get(s);i=i.unionWith(l.view.Va)}return i}}function pf(n){const t=Et(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=cf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=o_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=t_.bind(null,t),t.Ca.d_=qv.bind(null,t.eventManager),t.Ca.$a=Uv.bind(null,t.eventManager),t}function s_(n){const t=Et(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=e_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=n_.bind(null,t),t}class Ul{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Mi(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return uv(this.persistence,new av,t.initialUser,this.serializer)}createPersistence(t){return new iv(Rs.Zr,this.serializer)}createSharedClientState(t){return new mv}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class a_{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fl(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=i_.bind(null,this.syncEngine),await Mv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new jv}()}createDatastore(t){const e=Mi(t.databaseInfo.databaseId),r=function(o){return new bv(o)}(t.databaseInfo);return function(o,s,l,u){return new wv(o,s,l,u)}(t.authCredentials,t.appCheckCredentials,r,e)}createRemoteStore(t){return function(r,i,o,s,l){return new Ov(r,i,o,s,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Fl(this.syncEngine,e,0),function(){return Ll.D()?new Ll:new yv}())}createSyncEngine(t,e){return function(i,o,s,l,u,c,d){const h=new Gv(i,o,s,l,u,c);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t,e;await async function(i){const o=Et(i);ct("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Cr(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ga(this.observer.next,t)}error(t){this.observer.error?this.Ga(this.observer.error,t):Pe("Uncaught Error in snapshot listener:",t.toString())}za(){this.muted=!0}Ga(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(t,e,r,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=r,this.databaseInfo=i,this.user=re.UNAUTHENTICATED,this.clientId=mc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{ct("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ct("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new dt(it.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Fe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const r=Ds(e,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ao(n,t){n.asyncQueue.verifyOperationInProgress(),ct("FirestoreClient","Initializing OfflineComponentProvider");const e=n.configuration;await t.initialize(e);let r=e.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Xc(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t}async function $l(n,t){n.asyncQueue.verifyOperationInProgress();const e=await f_(n);ct("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,n.configuration),n.setCredentialChangeListener(r=>Ml(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ml(t.remoteStore,i)),n._onlineComponents=t}function c_(n){return n.name==="FirebaseError"?n.code===it.FAILED_PRECONDITION||n.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}async function f_(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ct("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ao(n,n._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!c_(e))throw e;Tn("Error using user provided cache. Falling back to memory cache: "+e),await Ao(n,new Ul)}}else ct("FirestoreClient","Using default OfflineComponentProvider"),await Ao(n,new Ul);return n._offlineComponents}async function gf(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ct("FirestoreClient","Using user provided OnlineComponentProvider"),await $l(n,n._uninitializedComponentsProvider._online)):(ct("FirestoreClient","Using default OnlineComponentProvider"),await $l(n,new a_))),n._onlineComponents}function h_(n){return gf(n).then(t=>t.syncEngine)}async function d_(n){const t=await gf(n),e=t.eventManager;return e.onListen=Wv.bind(null,t.syncEngine),e.onUnlisten=Yv.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Qv.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Zv.bind(null,t.syncEngine),e}function p_(n,t,e={}){const r=new Fe;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,l,u,c){const d=new l_({next:f=>{s.enqueueAndForget(()=>Fv(o,h)),f.fromCache&&u.source==="server"?c.reject(new dt(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new $v(l,d,{includeMetadataChanges:!0,_a:!0});return Bv(o,h)}(await d_(n),n.asyncQueue,t,e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(n){const t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zl=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(n,t,e){if(!e)throw new dt(it.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function g_(n,t,e,r){if(t===!0&&r===!0)throw new dt(it.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Hl(n){if(!gt.isDocumentKey(n))throw new dt(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Kl(n){if(gt.isDocumentKey(n))throw new dt(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Vs(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":vt()}function Or(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new dt(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Vs(n);throw new dt(it.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t){var e,r;if(t.host===void 0){if(t.ssl!==void 0)throw new dt(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new dt(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}g_("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mf((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new dt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new dt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new dt(it.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Bi{constructor(t,e,r,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new dt(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new dt(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gl(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Im;switch(r.type){case"firstParty":return new xm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new dt(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=zl.get(e);r&&(ct("ComponentProvider","Removing Datastore"),zl.delete(e),r.terminate())}(this),Promise.resolve()}}function m_(n,t,e,r={}){var i;const o=(n=Or(n,Bi))._getSettings(),s=`${t}:${e}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Tn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=re.MOCK_USER;else{l=Yu(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new dt(it.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new re(c)}n._authCredentials=new Rm(new gc(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t,e,r){this.converter=e,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Fi(this.firestore,t,this._query)}}class fe{constructor(t,e,r){this.converter=e,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qe(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new fe(this.firestore,t,this._key)}}class qe extends Fi{constructor(t,e,r){super(t,e,Ic(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new fe(this.firestore,null,new gt(t))}withConverter(t){return new qe(this.firestore,t,this._path)}}function y_(n,t,...e){if(n=Re(n),yf("collection","path",t),n instanceof Bi){const r=Mt.fromString(t,...e);return Kl(r),new qe(n,null,r)}{if(!(n instanceof fe||n instanceof qe))throw new dt(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(t,...e));return Kl(r),new qe(n.firestore,null,r)}}function v_(n,t,...e){if(n=Re(n),arguments.length===1&&(t=mc.newId()),yf("doc","path",t),n instanceof Bi){const r=Mt.fromString(t,...e);return Hl(r),new fe(n,null,new gt(r))}{if(!(n instanceof fe||n instanceof qe))throw new dt(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Mt.fromString(t,...e));return Hl(r),new fe(n.firestore,n instanceof qe?n.converter:null,new gt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Zc(this,"async_queue_retry"),this.Eu=()=>{const e=wo();e&&ct("AsyncQueue","Visibility state changed to "+e.visibilityState),this.t_.jo()};const t=wo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.du(),this.Au(t)}enterRestrictedMode(t){if(!this.cu){this.cu=!0,this.Iu=t||!1;const e=wo();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Eu)}}enqueue(t){if(this.du(),this.cu)return new Promise(()=>{});const e=new Fe;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.uu.push(t),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(t){if(!Pr(t))throw t;ct("AsyncQueue","Operation failed with retryable error: "+t)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(t){const e=this.au.then(()=>(this.Pu=!0,t().catch(r=>{this.hu=r,this.Pu=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw Pe("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=e,e}enqueueAfterDelay(t,e,r){this.du(),this.Tu.indexOf(t)>-1&&(e=0);const i=Ns.createAndSchedule(this,t,e,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&vt()}verifyOperationInProgress(){}async mu(){let t;do t=this.au,await t;while(t!==this.au)}fu(t){for(const e of this.lu)if(e.timerId===t)return!0;return!1}gu(t){return this.mu().then(()=>{this.lu.sort((e,r)=>e.targetTimeMs-r.targetTimeMs);for(const e of this.lu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.mu()})}pu(t){this.Tu.push(t)}Vu(t){const e=this.lu.indexOf(t);this.lu.splice(e,1)}}class js extends Bi{constructor(t,e,r,i){super(t,e,r,i),this.type="firestore",this._queue=function(){return new __}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_f(this),this._firestoreClient.terminate()}}function b_(n,t){const e=typeof n=="object"?n:oc(),r=typeof n=="string"?n:t||"(default)",i=nc(e,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Qu("firestore");o&&m_(i,...o)}return i}function vf(n){return n._firestoreClient||_f(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _f(n){var t,e,r;const i=n._freezeSettings(),o=function(l,u,c,d){return new $m(l,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,mf(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new u_(n._authCredentials,n._appCheckCredentials,n._queue,o),!((e=i.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Sn(Jt.fromBase64String(t))}catch(e){throw new dt(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Sn(Jt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new dt(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new dt(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new dt(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=/^__.*__$/;class T_{constructor(t,e,r){this.data=t,this.fieldMask=e,this.fieldTransforms=r}toMutation(t,e){return this.fieldMask!==null?new ln(t,this.data,this.fieldMask,e,this.fieldTransforms):new xr(t,this.data,e,this.fieldTransforms)}}function Ef(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class Us{constructor(t,e,r,i,o,s){this.settings=t,this.databaseId=e,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(t){return new Us(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Su({path:r,Du:!1});return i.vu(t),i}Cu(t){var e;const r=(e=this.path)===null||e===void 0?void 0:e.child(t),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(t){return this.Su({path:void 0,Du:!0})}Mu(t){return bi(t,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}yu(){if(this.path)for(let t=0;t<this.path.length;t++)this.vu(this.path.get(t))}vu(t){if(t.length===0)throw this.Mu("Document fields must not be empty");if(Ef(this.wu)&&E_.test(t))throw this.Mu('Document fields cannot begin and end with "__"')}}class w_{constructor(t,e,r){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=r||Mi(t)}Nu(t,e,r,i=!1){return new Us({wu:t,methodName:e,Ou:r,path:Yt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function A_(n){const t=n._freezeSettings(),e=Mi(n._databaseId);return new w_(n._databaseId,!!t.ignoreUndefinedProperties,e)}function O_(n,t,e,r,i,o={}){const s=n.Nu(o.merge||o.mergeFields?2:0,t,e,i);Of("Data must be an object, but it was:",s,r);const l=wf(r,s);let u,c;if(o.merge)u=new pe(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const f=I_(t,h,e);if(!s.contains(f))throw new dt(it.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);S_(d,f)||d.push(f)}u=new pe(d),c=s.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=s.fieldTransforms;return new T_(new ce(l),u,c)}function Tf(n,t){if(Af(n=Re(n)))return Of("Unsupported field value:",t,n),wf(n,t);if(n instanceof bf)return function(r,i){if(!Ef(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Du&&t.wu!==4)throw t.Mu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let u=Tf(l,i.Fu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,t)}return function(r,i){if((r=Re(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hy(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Kt.fromDate(r);return{timestampValue:vi(i.serializer,o)}}if(r instanceof Kt){const o=new Kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vi(i.serializer,o)}}if(r instanceof Fs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sn)return{bytesValue:$c(i.serializer,r._byteString)};if(r instanceof fe){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Mu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Os(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qs)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw l.Mu("VectorValues must only contain numeric values.");return Ts(l.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Vs(r)}`)}(n,t)}function wf(n,t){const e={};return yc(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Dn(n,(r,i)=>{const o=Tf(i,t.bu(r));o!=null&&(e[r]=o)}),{mapValue:{fields:e}}}function Af(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kt||n instanceof Fs||n instanceof Sn||n instanceof fe||n instanceof bf||n instanceof qs)}function Of(n,t,e){if(!Af(e)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(e)){const r=Vs(e);throw r==="an object"?t.Mu(n+" a custom object"):t.Mu(n+" "+r)}}function I_(n,t,e){if((t=Re(t))instanceof Bs)return t._internalPath;if(typeof t=="string")return If(n,t);throw bi("Field path arguments must be of type string or ",n,!1,void 0,e)}const R_=new RegExp("[~\\*/\\[\\]]");function If(n,t,e){if(t.search(R_)>=0)throw bi(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Bs(...t.split("."))._internalPath}catch{throw bi(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function bi(n,t,e,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new dt(it.INVALID_ARGUMENT,l+n+u)}function S_(n,t){return n.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(t,e,r,i,o){this._firestore=t,this._userDataWriter=e,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new P_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Sf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class P_ extends Rf{data(){return super.data()}}function Sf(n,t){return typeof t=="string"?If(n,t):t instanceof Bs?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new dt(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k_{convertValue(t,e="none"){switch(on(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $t(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(rn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw vt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const r={};return Dn(t,(i,o)=>{r[i]=this.convertValue(o,e)}),r}convertVectorValue(t){var e,r,i;const o=(i=(r=(e=t.fields)===null||e===void 0?void 0:e.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>$t(s.doubleValue));return new qs(o)}convertGeoPoint(t){return new Fs($t(t.latitude),$t(t.longitude))}convertArray(t,e){return(t.values||[]).map(r=>this.convertValue(r,e))}convertServerTimestamp(t,e){switch(e){case"previous":const r=vs(t);return r==null?null:this.convertValue(r,e);case"estimate":return this.convertTimestamp(br(t));default:return null}}convertTimestamp(t){const e=$e(t);return new Kt(e.seconds,e.nanos)}convertDocumentKey(t,e){const r=Mt.fromString(t);Nt(Qc(r));const i=new Er(r.get(1),r.get(3)),o=new gt(r.popFirst(5));return i.isEqual(e)||Pe(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(n,t,e){let r;return r=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class N_ extends Rf{constructor(t,e,r,i,o,s){super(t,e,r,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new ui(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const r=this._document.data.field(Sf("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,e.serverTimestamps)}}}class ui extends N_{data(t={}){return super.data(t)}}class D_{constructor(t,e,r,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new ti(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(r=>{t.call(e,new ui(this._firestore,this._userDataWriter,r.key,r,new ti(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new dt(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(l=>{const u=new ui(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ti(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new ui(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ti(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return l.type!==0&&(c=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),d=s.indexOf(l.doc.key)),{type:L_(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function L_(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}class M_ extends k_{constructor(t){super(),this.firestore=t}convertBytes(t){return new Sn(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new fe(this.firestore,null,e)}}function GO(n){n=Or(n,Fi);const t=Or(n.firestore,js),e=vf(t),r=new M_(t);return x_(n._query),p_(e,n._query).then(i=>new D_(t,r,n,i))}function V_(n,t,e){n=Or(n,fe);const r=Or(n.firestore,js),i=C_(n.converter,t,e);return j_(r,[O_(A_(r),"setDoc",n._key,i,n.converter!==null,e).toMutation(n._key,Oe.none())])}function j_(n,t){return function(r,i){const o=new Fe;return r.asyncQueue.enqueueAndForget(async()=>Jv(await h_(r),i,o)),o.promise}(vf(n),t)}(function(t,e=!0){(function(i){Nn=i})(rc),yr(new En("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new js(new Sm(r.getProvider("auth-internal")),new Cm(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new dt(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Er(c.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Be(hl,"4.7.1",t),Be(hl,"4.7.1","esm2017")})();var B_="firebase",F_="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Be(B_,F_,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="firebasestorage.googleapis.com",xf="storageBucket",q_=2*60*1e3,U_=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut extends an{constructor(t,e,r=0){super(Oo(t),`Firebase Storage: ${e} (${Oo(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ut.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Oo(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qt||(qt={}));function Oo(n){return"storage/"+n}function $s(){const n="An unknown error occurred, please check the error payload for server response.";return new Ut(qt.UNKNOWN,n)}function $_(n){return new Ut(qt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function z_(n){return new Ut(qt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H_(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ut(qt.UNAUTHENTICATED,n)}function K_(){return new Ut(qt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function G_(n){return new Ut(qt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function W_(){return new Ut(qt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Q_(){return new Ut(qt.CANCELED,"User canceled the upload/download.")}function X_(n){return new Ut(qt.INVALID_URL,"Invalid URL '"+n+"'.")}function Y_(n){return new Ut(qt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Z_(){return new Ut(qt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+xf+"' property when initializing the app?")}function J_(){return new Ut(qt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function t1(){return new Ut(qt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function e1(n){return new Ut(qt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Jo(n){return new Ut(qt.INVALID_ARGUMENT,n)}function kf(){return new Ut(qt.APP_DELETED,"The Firebase app was deleted.")}function n1(n){return new Ut(qt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function gr(n,t){return new Ut(qt.INVALID_FORMAT,"String does not match format '"+n+"': "+t)}function ir(n){throw new Ut(qt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let r;try{r=ue.makeFromUrl(t,e)}catch{return new ue(t,"")}if(r.path==="")return r;throw Y_(t)}static makeFromUrl(t,e){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(y){y.path.charAt(y.path.length-1)==="/"&&(y.path_=y.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function c(y){y.path_=decodeURIComponent(y.path)}const d="v[A-Za-z0-9_]+",h=e.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${d}/b/${i}/o${f}`,"i"),m={bucket:1,path:3},_=e===Pf?"(?:storage.googleapis.com|storage.cloud.google.com)":e,g="([^?#]*)",v=new RegExp(`^https?://${_}/${i}/${g}`,"i"),A=[{regex:l,indices:u,postModify:o},{regex:p,indices:m,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let y=0;y<A.length;y++){const P=A[y],C=P.regex.exec(t);if(C){const I=C[P.indices.bucket];let E=C[P.indices.path];E||(E=""),r=new ue(I,E),P.postModify(r);break}}if(r==null)throw X_(t);return r}}class r1{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(n,t,e){let r=1,i=null,o=null,s=!1,l=0;function u(){return l===2}let c=!1;function d(...g){c||(c=!0,t.apply(null,g))}function h(g){i=setTimeout(()=>{i=null,n(p,u())},g)}function f(){o&&clearTimeout(o)}function p(g,...v){if(c){f();return}if(g){f(),d.call(null,g,...v);return}if(u()||s){f(),d.call(null,g,...v);return}r<64&&(r*=2);let A;l===1?(l=2,A=0):A=(r+Math.random())*1e3,h(A)}let m=!1;function _(g){m||(m=!0,f(),!c&&(i!==null?(g||(l=2),clearTimeout(i),h(0)):g||(l=1)))}return h(0),o=setTimeout(()=>{s=!0,_(!0)},e),_}function o1(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n){return n!==void 0}function a1(n){return typeof n=="object"&&!Array.isArray(n)}function zs(n){return typeof n=="string"||n instanceof String}function Wl(n){return Hs()&&n instanceof Blob}function Hs(){return typeof Blob<"u"}function Ql(n,t,e,r){if(r<t)throw Jo(`Invalid value for '${n}'. Expected ${t} or greater.`);if(r>e)throw Jo(`Invalid value for '${n}'. Expected ${e} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(n,t,e){let r=t;return e==null&&(r=`https://${t}`),`${e}://${r}/v0${n}`}function Cf(n){const t=encodeURIComponent;let e="?";for(const r in n)if(n.hasOwnProperty(r)){const i=t(r)+"="+t(n[r]);e=e+i+"&"}return e=e.slice(0,-1),e}var tn;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(tn||(tn={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(n,t){const e=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=t.indexOf(n)!==-1;return e||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(t,e,r,i,o,s,l,u,c,d,h,f=!0){this.url_=t,this.method_=e,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new ei(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===tn.NO_ERROR,u=o.getStatus();if(!l||l1(u,this.additionalRetryCodes_)&&this.retry){const d=o.getErrorCode()===tn.ABORT;r(!1,new ei(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new ei(c,o))})},e=(r,i)=>{const o=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());s1(u)?o(u):o()}catch(u){s(u)}else if(l!==null){const u=$s();u.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,u)):s(u)}else if(i.canceled){const u=this.appDelete_?kf():Q_();s(u)}else{const u=W_();s(u)}};this.canceled_?e(!1,new ei(!1,null,!0)):this.backoffId_=i1(t,e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&o1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ei{constructor(t,e,r){this.wasSuccessCode=t,this.connection=e,this.canceled=!!r}}function c1(n,t){t!==null&&t.length>0&&(n.Authorization="Firebase "+t)}function f1(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function h1(n,t){t&&(n["X-Firebase-GMPID"]=t)}function d1(n,t){t!==null&&(n["X-Firebase-AppCheck"]=t)}function p1(n,t,e,r,i,o,s=!0){const l=Cf(n.urlParams),u=n.url+l,c=Object.assign({},n.headers);return h1(c,t),c1(c,e),f1(c,o),d1(c,r),new u1(u,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function m1(...n){const t=g1();if(t!==void 0){const e=new t;for(let r=0;r<n.length;r++)e.append(n[r]);return e.getBlob()}else{if(Hs())return new Blob(n);throw new Ut(qt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function y1(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(n){if(typeof atob>"u")throw e1("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Io{constructor(t,e){this.data=t,this.contentType=e||null}}function _1(n,t){switch(n){case ve.RAW:return new Io(Nf(t));case ve.BASE64:case ve.BASE64URL:return new Io(Df(n,t));case ve.DATA_URL:return new Io(E1(t),T1(t))}throw $s()}function Nf(n){const t=[];for(let e=0;e<n.length;e++){let r=n.charCodeAt(e);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(e<n.length-1&&(n.charCodeAt(e+1)&64512)===56320))t.push(239,191,189);else{const o=r,s=n.charCodeAt(++e);r=65536|(o&1023)<<10|s&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function b1(n){let t;try{t=decodeURIComponent(n)}catch{throw gr(ve.DATA_URL,"Malformed data URL.")}return Nf(t)}function Df(n,t){switch(n){case ve.BASE64:{const i=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(i||o)throw gr(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ve.BASE64URL:{const i=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(i||o)throw gr(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=v1(t)}catch(i){throw i.message.includes("polyfill")?i:gr(n,"Invalid character found")}const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}class Lf{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(e===null)throw gr(ve.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=e[1]||null;r!=null&&(this.base64=w1(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function E1(n){const t=new Lf(n);return t.base64?Df(ve.BASE64,t.rest):b1(t.rest)}function T1(n){return new Lf(n).contentType}function w1(n,t){return n.length>=t.length?n.substring(n.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t,e){let r=0,i="";Wl(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,e){if(Wl(this.data_)){const r=this.data_,i=y1(r,t,e);return i===null?null:new Le(i)}else{const r=new Uint8Array(this.data_.buffer,t,e-t);return new Le(r,!0)}}static getBlob(...t){if(Hs()){const e=t.map(r=>r instanceof Le?r.data_:r);return new Le(m1.apply(null,e))}else{const e=t.map(s=>zs(s)?_1(ve.RAW,s).data:s.data_);let r=0;e.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return e.forEach(s=>{for(let l=0;l<s.length;l++)i[o++]=s[l]}),new Le(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n){let t;try{t=JSON.parse(n)}catch{return null}return a1(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n){if(n.length===0)return null;const t=n.lastIndexOf("/");return t===-1?"":n.slice(0,t)}function O1(n,t){const e=t.split("/").filter(r=>r.length>0).join("/");return n.length===0?e:n+"/"+e}function Vf(n){const t=n.lastIndexOf("/",n.length-2);return t===-1?n:n.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(n,t){return t}class se{constructor(t,e,r,i){this.server=t,this.local=e||t,this.writable=!!r,this.xform=i||I1}}let ni=null;function R1(n){return!zs(n)||n.length<2?n:Vf(n)}function jf(){if(ni)return ni;const n=[];n.push(new se("bucket")),n.push(new se("generation")),n.push(new se("metageneration")),n.push(new se("name","fullPath",!0));function t(o,s){return R1(s)}const e=new se("name");e.xform=t,n.push(e);function r(o,s){return s!==void 0?Number(s):s}const i=new se("size");return i.xform=r,n.push(i),n.push(new se("timeCreated")),n.push(new se("updated")),n.push(new se("md5Hash",null,!0)),n.push(new se("cacheControl",null,!0)),n.push(new se("contentDisposition",null,!0)),n.push(new se("contentEncoding",null,!0)),n.push(new se("contentLanguage",null,!0)),n.push(new se("contentType",null,!0)),n.push(new se("metadata","customMetadata",!0)),ni=n,ni}function S1(n,t){function e(){const r=n.bucket,i=n.fullPath,o=new ue(r,i);return t._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:e})}function P1(n,t,e){const r={};r.type="file";const i=e.length;for(let o=0;o<i;o++){const s=e[o];r[s.local]=s.xform(r,t[s.server])}return S1(r,n),r}function Bf(n,t,e){const r=Mf(t);return r===null?null:P1(n,r,e)}function x1(n,t,e,r){const i=Mf(t);if(i===null||!zs(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(c=>{const d=n.bucket,h=n.fullPath,f="/b/"+s(d)+"/o/"+s(h),p=Ks(f,e,r),m=Cf({alt:"media",token:c});return p+m})[0]}function k1(n,t){const e={},r=t.length;for(let i=0;i<r;i++){const o=t[i];o.writable&&(e[o.server]=n[o.local])}return JSON.stringify(e)}class Ff{constructor(t,e,r,i){this.url=t,this.method=e,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n){if(!n)throw $s()}function C1(n,t){function e(r,i){const o=Bf(n,i,t);return qf(o!==null),o}return e}function N1(n,t){function e(r,i){const o=Bf(n,i,t);return qf(o!==null),x1(o,i,n.host,n._protocol)}return e}function Uf(n){function t(e,r){let i;return e.getStatus()===401?e.getErrorText().includes("Firebase App Check token is invalid")?i=K_():i=H_():e.getStatus()===402?i=z_(n.bucket):e.getStatus()===403?i=G_(n.path):i=r,i.status=e.getStatus(),i.serverResponse=r.serverResponse,i}return t}function D1(n){const t=Uf(n);function e(r,i){let o=t(r,i);return r.getStatus()===404&&(o=$_(n.path)),o.serverResponse=i.serverResponse,o}return e}function L1(n,t,e){const r=t.fullServerUrl(),i=Ks(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,l=new Ff(i,o,N1(n,e),s);return l.errorHandler=D1(t),l}function M1(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}function V1(n,t,e){const r=Object.assign({},e);return r.fullPath=n.path,r.size=t.size(),r.contentType||(r.contentType=M1(null,t)),r}function j1(n,t,e,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let A="";for(let y=0;y<2;y++)A=A+Math.random().toString().slice(2);return A}const u=l();s["Content-Type"]="multipart/related; boundary="+u;const c=V1(t,r,i),d=k1(c,e),h="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,f=`\r
--`+u+"--",p=Le.getBlob(h,r,f);if(p===null)throw J_();const m={name:c.fullPath},_=Ks(o,n.host,n._protocol),g="POST",v=n.maxUploadRetryTime,b=new Ff(_,g,C1(n,e),v);return b.urlParams=m,b.headers=s,b.body=p.uploadData(),b.errorHandler=Uf(t),b}class B1{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=tn.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=tn.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=tn.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,r,i){if(this.sent_)throw ir("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ir("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ir("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ir("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ir("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class F1 extends B1{initXhr(){this.xhr_.responseType="text"}}function $f(){return new F1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(t,e){this._service=t,e instanceof ue?this._location=e:this._location=ue.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new sn(t,e)}get root(){const t=new ue(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Vf(this._location.path)}get storage(){return this._service}get parent(){const t=A1(this._location.path);if(t===null)return null;const e=new ue(this._location.bucket,t);return new sn(this._service,e)}_throwIfRoot(t){if(this._location.path==="")throw n1(t)}}function q1(n,t,e){n._throwIfRoot("uploadBytes");const r=j1(n.storage,n._location,jf(),new Le(t,!0),e);return n.storage.makeRequestWithTokens(r,$f).then(i=>({metadata:i,ref:n}))}function U1(n){n._throwIfRoot("getDownloadURL");const t=L1(n.storage,n._location,jf());return n.storage.makeRequestWithTokens(t,$f).then(e=>{if(e===null)throw t1();return e})}function $1(n,t){const e=O1(n._location.path,t),r=new ue(n._location.bucket,e);return new sn(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(n){return/^[A-Za-z]+:\/\//.test(n)}function H1(n,t){return new sn(n,t)}function zf(n,t){if(n instanceof Gs){const e=n;if(e._bucket==null)throw Z_();const r=new sn(e,e._bucket);return t!=null?zf(r,t):r}else return t!==void 0?$1(n,t):n}function K1(n,t){if(t&&z1(t)){if(n instanceof Gs)return H1(n,t);throw Jo("To use ref(service, url), the first argument must be a Storage instance.")}else return zf(n,t)}function Xl(n,t){const e=t==null?void 0:t[xf];return e==null?null:ue.makeFromBucketSpec(e,n)}function G1(n,t,e,r={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Yu(i,n.app.options.projectId))}class Gs{constructor(t,e,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Pf,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=q_,this._maxUploadRetryTime=U_,this._requests=new Set,i!=null?this._bucket=ue.makeFromBucketSpec(i,this._host):this._bucket=Xl(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ue.makeFromBucketSpec(this._url,t):this._bucket=Xl(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Ql("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Ql("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const e=await t.getToken();if(e!==null)return e.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new sn(this,t)}_makeRequest(t,e,r,i,o=!0){if(this._deleted)return new r1(kf());{const s=p1(t,this._appId,r,i,e,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(t,e){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,e,r,i).getPromise()}}const Yl="@firebase/storage",Zl="0.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="storage";function W1(n,t,e){return n=Re(n),q1(n,t,e)}function Q1(n){return n=Re(n),U1(n)}function X1(n,t){return n=Re(n),K1(n,t)}function Kf(n=oc(),t){n=Re(n);const r=nc(n,Hf).getImmediate({identifier:t}),i=Qu("storage");return i&&Y1(r,...i),r}function Y1(n,t,e,r={}){G1(n,t,e,r)}function Z1(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Gs(e,r,i,t,rc)}function J1(){yr(new En(Hf,Z1,"PUBLIC").setMultipleInstances(!0)),Be(Yl,Zl,""),Be(Yl,Zl,"esm2017")}J1();const t0={apiKey:"AIzaSyAZZTNhFBecgOoLszv3q_82iYr2M5aBB3Q",authDomain:"bridge-of-hope-7f2e4.firebaseapp.com",projectId:"bridge-of-hope-7f2e4",storageBucket:"bridge-of-hope-7f2e4.appspot.com",messagingSenderId:"414317058098",appId:"1:414317058098:web:cddaa96194cf403edc042b",measurementId:"G-P637M0NXSY"},e0=ic(t0),n0=b_(e0);Kf();function r0(){this.__data__=[],this.size=0}var i0=r0;function o0(n,t){return n===t||n!==n&&t!==t}var Gf=o0,s0=Gf;function a0(n,t){for(var e=n.length;e--;)if(s0(n[e][0],t))return e;return-1}var qi=a0,l0=qi,u0=Array.prototype,c0=u0.splice;function f0(n){var t=this.__data__,e=l0(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():c0.call(t,e,1),--this.size,!0}var h0=f0,d0=qi;function p0(n){var t=this.__data__,e=d0(t,n);return e<0?void 0:t[e][1]}var g0=p0,m0=qi;function y0(n){return m0(this.__data__,n)>-1}var v0=y0,_0=qi;function b0(n,t){var e=this.__data__,r=_0(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}var E0=b0,T0=i0,w0=h0,A0=g0,O0=v0,I0=E0;function Vn(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Vn.prototype.clear=T0;Vn.prototype.delete=w0;Vn.prototype.get=A0;Vn.prototype.has=O0;Vn.prototype.set=I0;var Ui=Vn,R0=Ui;function S0(){this.__data__=new R0,this.size=0}var P0=S0;function x0(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var k0=x0;function C0(n){return this.__data__.get(n)}var N0=C0;function D0(n){return this.__data__.has(n)}var L0=D0,M0=typeof ae=="object"&&ae&&ae.Object===Object&&ae,Wf=M0,V0=Wf,j0=typeof self=="object"&&self&&self.Object===Object&&self,B0=V0||j0||Function("return this")(),ke=B0,F0=ke,q0=F0.Symbol,Ws=q0,Jl=Ws,Qf=Object.prototype,U0=Qf.hasOwnProperty,$0=Qf.toString,or=Jl?Jl.toStringTag:void 0;function z0(n){var t=U0.call(n,or),e=n[or];try{n[or]=void 0;var r=!0}catch{}var i=$0.call(n);return r&&(t?n[or]=e:delete n[or]),i}var H0=z0,K0=Object.prototype,G0=K0.toString;function W0(n){return G0.call(n)}var Q0=W0,tu=Ws,X0=H0,Y0=Q0,Z0="[object Null]",J0="[object Undefined]",eu=tu?tu.toStringTag:void 0;function tb(n){return n==null?n===void 0?J0:Z0:eu&&eu in Object(n)?X0(n):Y0(n)}var $i=tb;function eb(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Xf=eb,nb=$i,rb=Xf,ib="[object AsyncFunction]",ob="[object Function]",sb="[object GeneratorFunction]",ab="[object Proxy]";function lb(n){if(!rb(n))return!1;var t=nb(n);return t==ob||t==sb||t==ib||t==ab}var Yf=lb,ub=ke,cb=ub["__core-js_shared__"],fb=cb,Ro=fb,nu=function(){var n=/[^.]+$/.exec(Ro&&Ro.keys&&Ro.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function hb(n){return!!nu&&nu in n}var db=hb,pb=Function.prototype,gb=pb.toString;function mb(n){if(n!=null){try{return gb.call(n)}catch{}try{return n+""}catch{}}return""}var Zf=mb,yb=Yf,vb=db,_b=Xf,bb=Zf,Eb=/[\\^$.*+?()[\]{}|]/g,Tb=/^\[object .+?Constructor\]$/,wb=Function.prototype,Ab=Object.prototype,Ob=wb.toString,Ib=Ab.hasOwnProperty,Rb=RegExp("^"+Ob.call(Ib).replace(Eb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sb(n){if(!_b(n)||vb(n))return!1;var t=yb(n)?Rb:Tb;return t.test(bb(n))}var Pb=Sb;function xb(n,t){return n==null?void 0:n[t]}var kb=xb,Cb=Pb,Nb=kb;function Db(n,t){var e=Nb(n,t);return Cb(e)?e:void 0}var jn=Db,Lb=jn,Mb=ke,Vb=Lb(Mb,"Map"),Qs=Vb,jb=jn,Bb=jb(Object,"create"),zi=Bb,ru=zi;function Fb(){this.__data__=ru?ru(null):{},this.size=0}var qb=Fb;function Ub(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var $b=Ub,zb=zi,Hb="__lodash_hash_undefined__",Kb=Object.prototype,Gb=Kb.hasOwnProperty;function Wb(n){var t=this.__data__;if(zb){var e=t[n];return e===Hb?void 0:e}return Gb.call(t,n)?t[n]:void 0}var Qb=Wb,Xb=zi,Yb=Object.prototype,Zb=Yb.hasOwnProperty;function Jb(n){var t=this.__data__;return Xb?t[n]!==void 0:Zb.call(t,n)}var tE=Jb,eE=zi,nE="__lodash_hash_undefined__";function rE(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=eE&&t===void 0?nE:t,this}var iE=rE,oE=qb,sE=$b,aE=Qb,lE=tE,uE=iE;function Bn(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Bn.prototype.clear=oE;Bn.prototype.delete=sE;Bn.prototype.get=aE;Bn.prototype.has=lE;Bn.prototype.set=uE;var cE=Bn,iu=cE,fE=Ui,hE=Qs;function dE(){this.size=0,this.__data__={hash:new iu,map:new(hE||fE),string:new iu}}var pE=dE;function gE(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var mE=gE,yE=mE;function vE(n,t){var e=n.__data__;return yE(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Hi=vE,_E=Hi;function bE(n){var t=_E(this,n).delete(n);return this.size-=t?1:0,t}var EE=bE,TE=Hi;function wE(n){return TE(this,n).get(n)}var AE=wE,OE=Hi;function IE(n){return OE(this,n).has(n)}var RE=IE,SE=Hi;function PE(n,t){var e=SE(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}var xE=PE,kE=pE,CE=EE,NE=AE,DE=RE,LE=xE;function Fn(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Fn.prototype.clear=kE;Fn.prototype.delete=CE;Fn.prototype.get=NE;Fn.prototype.has=DE;Fn.prototype.set=LE;var Jf=Fn,ME=Ui,VE=Qs,jE=Jf,BE=200;function FE(n,t){var e=this.__data__;if(e instanceof ME){var r=e.__data__;if(!VE||r.length<BE-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new jE(r)}return e.set(n,t),this.size=e.size,this}var qE=FE,UE=Ui,$E=P0,zE=k0,HE=N0,KE=L0,GE=qE;function qn(n){var t=this.__data__=new UE(n);this.size=t.size}qn.prototype.clear=$E;qn.prototype.delete=zE;qn.prototype.get=HE;qn.prototype.has=KE;qn.prototype.set=GE;var WE=qn,QE="__lodash_hash_undefined__";function XE(n){return this.__data__.set(n,QE),this}var YE=XE;function ZE(n){return this.__data__.has(n)}var JE=ZE,tT=Jf,eT=YE,nT=JE;function Ei(n){var t=-1,e=n==null?0:n.length;for(this.__data__=new tT;++t<e;)this.add(n[t])}Ei.prototype.add=Ei.prototype.push=eT;Ei.prototype.has=nT;var rT=Ei;function iT(n,t){for(var e=-1,r=n==null?0:n.length;++e<r;)if(t(n[e],e,n))return!0;return!1}var oT=iT;function sT(n,t){return n.has(t)}var aT=sT,lT=rT,uT=oT,cT=aT,fT=1,hT=2;function dT(n,t,e,r,i,o){var s=e&fT,l=n.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;var c=o.get(n),d=o.get(t);if(c&&d)return c==t&&d==n;var h=-1,f=!0,p=e&hT?new lT:void 0;for(o.set(n,t),o.set(t,n);++h<l;){var m=n[h],_=t[h];if(r)var g=s?r(_,m,h,t,n,o):r(m,_,h,n,t,o);if(g!==void 0){if(g)continue;f=!1;break}if(p){if(!uT(t,function(v,b){if(!cT(p,b)&&(m===v||i(m,v,e,r,o)))return p.push(b)})){f=!1;break}}else if(!(m===_||i(m,_,e,r,o))){f=!1;break}}return o.delete(n),o.delete(t),f}var th=dT,pT=ke,gT=pT.Uint8Array,mT=gT;function yT(n){var t=-1,e=Array(n.size);return n.forEach(function(r,i){e[++t]=[i,r]}),e}var vT=yT;function _T(n){var t=-1,e=Array(n.size);return n.forEach(function(r){e[++t]=r}),e}var bT=_T,ou=Ws,su=mT,ET=Gf,TT=th,wT=vT,AT=bT,OT=1,IT=2,RT="[object Boolean]",ST="[object Date]",PT="[object Error]",xT="[object Map]",kT="[object Number]",CT="[object RegExp]",NT="[object Set]",DT="[object String]",LT="[object Symbol]",MT="[object ArrayBuffer]",VT="[object DataView]",au=ou?ou.prototype:void 0,So=au?au.valueOf:void 0;function jT(n,t,e,r,i,o,s){switch(e){case VT:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case MT:return!(n.byteLength!=t.byteLength||!o(new su(n),new su(t)));case RT:case ST:case kT:return ET(+n,+t);case PT:return n.name==t.name&&n.message==t.message;case CT:case DT:return n==t+"";case xT:var l=wT;case NT:var u=r&OT;if(l||(l=AT),n.size!=t.size&&!u)return!1;var c=s.get(n);if(c)return c==t;r|=IT,s.set(n,t);var d=TT(l(n),l(t),r,i,o,s);return s.delete(n),d;case LT:if(So)return So.call(n)==So.call(t)}return!1}var BT=jT;function FT(n,t){for(var e=-1,r=t.length,i=n.length;++e<r;)n[i+e]=t[e];return n}var qT=FT,UT=Array.isArray,Xs=UT,$T=qT,zT=Xs;function HT(n,t,e){var r=t(n);return zT(n)?r:$T(r,e(n))}var KT=HT;function GT(n,t){for(var e=-1,r=n==null?0:n.length,i=0,o=[];++e<r;){var s=n[e];t(s,e,n)&&(o[i++]=s)}return o}var WT=GT;function QT(){return[]}var XT=QT,YT=WT,ZT=XT,JT=Object.prototype,tw=JT.propertyIsEnumerable,lu=Object.getOwnPropertySymbols,ew=lu?function(n){return n==null?[]:(n=Object(n),YT(lu(n),function(t){return tw.call(n,t)}))}:ZT,nw=ew;function rw(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}var iw=rw;function ow(n){return n!=null&&typeof n=="object"}var Ki=ow,sw=$i,aw=Ki,lw="[object Arguments]";function uw(n){return aw(n)&&sw(n)==lw}var cw=uw,uu=cw,fw=Ki,eh=Object.prototype,hw=eh.hasOwnProperty,dw=eh.propertyIsEnumerable,pw=uu(function(){return arguments}())?uu:function(n){return fw(n)&&hw.call(n,"callee")&&!dw.call(n,"callee")},gw=pw,Ti={exports:{}};function mw(){return!1}var yw=mw;Ti.exports;(function(n,t){var e=ke,r=yw,i=t&&!t.nodeType&&t,o=i&&!0&&n&&!n.nodeType&&n,s=o&&o.exports===i,l=s?e.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||r;n.exports=c})(Ti,Ti.exports);var nh=Ti.exports,vw=9007199254740991,_w=/^(?:0|[1-9]\d*)$/;function bw(n,t){var e=typeof n;return t=t??vw,!!t&&(e=="number"||e!="symbol"&&_w.test(n))&&n>-1&&n%1==0&&n<t}var Ew=bw,Tw=9007199254740991;function ww(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Tw}var rh=ww,Aw=$i,Ow=rh,Iw=Ki,Rw="[object Arguments]",Sw="[object Array]",Pw="[object Boolean]",xw="[object Date]",kw="[object Error]",Cw="[object Function]",Nw="[object Map]",Dw="[object Number]",Lw="[object Object]",Mw="[object RegExp]",Vw="[object Set]",jw="[object String]",Bw="[object WeakMap]",Fw="[object ArrayBuffer]",qw="[object DataView]",Uw="[object Float32Array]",$w="[object Float64Array]",zw="[object Int8Array]",Hw="[object Int16Array]",Kw="[object Int32Array]",Gw="[object Uint8Array]",Ww="[object Uint8ClampedArray]",Qw="[object Uint16Array]",Xw="[object Uint32Array]",Lt={};Lt[Uw]=Lt[$w]=Lt[zw]=Lt[Hw]=Lt[Kw]=Lt[Gw]=Lt[Ww]=Lt[Qw]=Lt[Xw]=!0;Lt[Rw]=Lt[Sw]=Lt[Fw]=Lt[Pw]=Lt[qw]=Lt[xw]=Lt[kw]=Lt[Cw]=Lt[Nw]=Lt[Dw]=Lt[Lw]=Lt[Mw]=Lt[Vw]=Lt[jw]=Lt[Bw]=!1;function Yw(n){return Iw(n)&&Ow(n.length)&&!!Lt[Aw(n)]}var Zw=Yw;function Jw(n){return function(t){return n(t)}}var tA=Jw,wi={exports:{}};wi.exports;(function(n,t){var e=Wf,r=t&&!t.nodeType&&t,i=r&&!0&&n&&!n.nodeType&&n,o=i&&i.exports===r,s=o&&e.process,l=function(){try{var u=i&&i.require&&i.require("util").types;return u||s&&s.binding&&s.binding("util")}catch{}}();n.exports=l})(wi,wi.exports);var eA=wi.exports,nA=Zw,rA=tA,cu=eA,fu=cu&&cu.isTypedArray,iA=fu?rA(fu):nA,ih=iA,oA=iw,sA=gw,aA=Xs,lA=nh,uA=Ew,cA=ih,fA=Object.prototype,hA=fA.hasOwnProperty;function dA(n,t){var e=aA(n),r=!e&&sA(n),i=!e&&!r&&lA(n),o=!e&&!r&&!i&&cA(n),s=e||r||i||o,l=s?oA(n.length,String):[],u=l.length;for(var c in n)(t||hA.call(n,c))&&!(s&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||uA(c,u)))&&l.push(c);return l}var pA=dA,gA=Object.prototype;function mA(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||gA;return n===e}var yA=mA;function vA(n,t){return function(e){return n(t(e))}}var _A=vA,bA=_A,EA=bA(Object.keys,Object),TA=EA,wA=yA,AA=TA,OA=Object.prototype,IA=OA.hasOwnProperty;function RA(n){if(!wA(n))return AA(n);var t=[];for(var e in Object(n))IA.call(n,e)&&e!="constructor"&&t.push(e);return t}var SA=RA,PA=Yf,xA=rh;function kA(n){return n!=null&&xA(n.length)&&!PA(n)}var CA=kA,NA=pA,DA=SA,LA=CA;function MA(n){return LA(n)?NA(n):DA(n)}var VA=MA,jA=KT,BA=nw,FA=VA;function qA(n){return jA(n,FA,BA)}var UA=qA,hu=UA,$A=1,zA=Object.prototype,HA=zA.hasOwnProperty;function KA(n,t,e,r,i,o){var s=e&$A,l=hu(n),u=l.length,c=hu(t),d=c.length;if(u!=d&&!s)return!1;for(var h=u;h--;){var f=l[h];if(!(s?f in t:HA.call(t,f)))return!1}var p=o.get(n),m=o.get(t);if(p&&m)return p==t&&m==n;var _=!0;o.set(n,t),o.set(t,n);for(var g=s;++h<u;){f=l[h];var v=n[f],b=t[f];if(r)var A=s?r(b,v,f,t,n,o):r(v,b,f,n,t,o);if(!(A===void 0?v===b||i(v,b,e,r,o):A)){_=!1;break}g||(g=f=="constructor")}if(_&&!g){var y=n.constructor,P=t.constructor;y!=P&&"constructor"in n&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof P=="function"&&P instanceof P)&&(_=!1)}return o.delete(n),o.delete(t),_}var GA=KA,WA=jn,QA=ke,XA=WA(QA,"DataView"),YA=XA,ZA=jn,JA=ke,tO=ZA(JA,"Promise"),eO=tO,nO=jn,rO=ke,iO=nO(rO,"Set"),oO=iO,sO=jn,aO=ke,lO=sO(aO,"WeakMap"),uO=lO,ts=YA,es=Qs,ns=eO,rs=oO,is=uO,oh=$i,Un=Zf,du="[object Map]",cO="[object Object]",pu="[object Promise]",gu="[object Set]",mu="[object WeakMap]",yu="[object DataView]",fO=Un(ts),hO=Un(es),dO=Un(ns),pO=Un(rs),gO=Un(is),Xe=oh;(ts&&Xe(new ts(new ArrayBuffer(1)))!=yu||es&&Xe(new es)!=du||ns&&Xe(ns.resolve())!=pu||rs&&Xe(new rs)!=gu||is&&Xe(new is)!=mu)&&(Xe=function(n){var t=oh(n),e=t==cO?n.constructor:void 0,r=e?Un(e):"";if(r)switch(r){case fO:return yu;case hO:return du;case dO:return pu;case pO:return gu;case gO:return mu}return t});var mO=Xe,Po=WE,yO=th,vO=BT,_O=GA,vu=mO,_u=Xs,bu=nh,bO=ih,EO=1,Eu="[object Arguments]",Tu="[object Array]",ri="[object Object]",TO=Object.prototype,wu=TO.hasOwnProperty;function wO(n,t,e,r,i,o){var s=_u(n),l=_u(t),u=s?Tu:vu(n),c=l?Tu:vu(t);u=u==Eu?ri:u,c=c==Eu?ri:c;var d=u==ri,h=c==ri,f=u==c;if(f&&bu(n)){if(!bu(t))return!1;s=!0,d=!1}if(f&&!d)return o||(o=new Po),s||bO(n)?yO(n,t,e,r,i,o):vO(n,t,u,e,r,i,o);if(!(e&EO)){var p=d&&wu.call(n,"__wrapped__"),m=h&&wu.call(t,"__wrapped__");if(p||m){var _=p?n.value():n,g=m?t.value():t;return o||(o=new Po),i(_,g,e,r,o)}}return f?(o||(o=new Po),_O(n,t,e,r,i,o)):!1}var AO=wO,OO=AO,Au=Ki;function sh(n,t,e,r,i){return n===t?!0:n==null||t==null||!Au(n)&&!Au(t)?n!==n&&t!==t:OO(n,t,e,r,sh,i)}var IO=sh,RO=IO;function SO(n,t){return RO(n,t)}var PO=SO,ah={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(n,t){(function(r,i){n.exports=i()})(typeof self<"u"?self:ae,function(){return function(e){var r={};function i(o){if(r[o])return r[o].exports;var s=r[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=r,i.d=function(o,s,l){i.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:l})},i.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(s,"a",s),s},i.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},i.p="",i(i.s=109)}([function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(17),s=i(18),l=i(19),u=i(45),c=i(46),d=i(47),h=i(48),f=i(49),p=i(12),m=i(32),_=i(33),g=i(31),v=i(1),b={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:o.default,Format:s.default,Leaf:l.default,Embed:h.default,Scroll:u.default,Block:d.default,Inline:c.default,Text:f.default,Attributor:{Attribute:p.default,Class:m.default,Style:_.default,Store:g.default}};r.default=b},function(e,r,i){var o=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var A in b)b.hasOwnProperty(A)&&(v[A]=b[A])};return function(v,b){g(v,b);function A(){this.constructor=v}v.prototype=b===null?Object.create(b):(A.prototype=b.prototype,new A)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=function(g){o(v,g);function v(b){var A=this;return b="[Parchment] "+b,A=g.call(this,b)||this,A.message=b,A.name=A.constructor.name,A}return v}(Error);r.ParchmentError=s;var l={},u={},c={},d={};r.DATA_KEY="__blot";var h;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(h=r.Scope||(r.Scope={}));function f(g,v){var b=m(g);if(b==null)throw new s("Unable to create "+g+" blot");var A=b,y=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:A.create(v);return new A(y,v)}r.create=f;function p(g,v){return v===void 0&&(v=!1),g==null?null:g[r.DATA_KEY]!=null?g[r.DATA_KEY].blot:v?p(g.parentNode,v):null}r.find=p;function m(g,v){v===void 0&&(v=h.ANY);var b;if(typeof g=="string")b=d[g]||l[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)b=d.text;else if(typeof g=="number")g&h.LEVEL&h.BLOCK?b=d.block:g&h.LEVEL&h.INLINE&&(b=d.inline);else if(g instanceof HTMLElement){var A=(g.getAttribute("class")||"").split(/\s+/);for(var y in A)if(b=u[A[y]],b)break;b=b||c[g.tagName]}return b==null?null:v&h.LEVEL&b.scope&&v&h.TYPE&b.scope?b:null}r.query=m;function _(){for(var g=[],v=0;v<arguments.length;v++)g[v]=arguments[v];if(g.length>1)return g.map(function(y){return _(y)});var b=g[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new s("Invalid definition");if(b.blotName==="abstract")throw new s("Cannot register abstract class");if(d[b.blotName||b.attrName]=b,typeof b.keyName=="string")l[b.keyName]=b;else if(b.className!=null&&(u[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(y){return y.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var A=Array.isArray(b.tagName)?b.tagName:[b.tagName];A.forEach(function(y){(c[y]==null||b.className==null)&&(c[y]=b)})}return b}r.register=_},function(e,r,i){var o=i(51),s=i(11),l=i(3),u=i(20),c=String.fromCharCode(0),d=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};d.prototype.insert=function(h,f){var p={};return h.length===0?this:(p.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p))},d.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},d.prototype.retain=function(h,f){if(h<=0)return this;var p={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(p.attributes=f),this.push(p)},d.prototype.push=function(h){var f=this.ops.length,p=this.ops[f-1];if(h=l(!0,{},h),typeof p=="object"){if(typeof h.delete=="number"&&typeof p.delete=="number")return this.ops[f-1]={delete:p.delete+h.delete},this;if(typeof p.delete=="number"&&h.insert!=null&&(f-=1,p=this.ops[f-1],typeof p!="object"))return this.ops.unshift(h),this;if(s(h.attributes,p.attributes)){if(typeof h.insert=="string"&&typeof p.insert=="string")return this.ops[f-1]={insert:p.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof p.retain=="number")return this.ops[f-1]={retain:p.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},d.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},d.prototype.filter=function(h){return this.ops.filter(h)},d.prototype.forEach=function(h){this.ops.forEach(h)},d.prototype.map=function(h){return this.ops.map(h)},d.prototype.partition=function(h){var f=[],p=[];return this.forEach(function(m){var _=h(m)?f:p;_.push(m)}),[f,p]},d.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},d.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+u.length(f):f.delete?h-f.delete:h},0)},d.prototype.length=function(){return this.reduce(function(h,f){return h+u.length(f)},0)},d.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var p=[],m=u.iterator(this.ops),_=0;_<f&&m.hasNext();){var g;_<h?g=m.next(h-_):(g=m.next(f-_),p.push(g)),_+=u.length(g)}return new d(p)},d.prototype.compose=function(h){var f=u.iterator(this.ops),p=u.iterator(h.ops),m=[],_=p.peek();if(_!=null&&typeof _.retain=="number"&&_.attributes==null){for(var g=_.retain;f.peekType()==="insert"&&f.peekLength()<=g;)g-=f.peekLength(),m.push(f.next());_.retain-g>0&&p.next(_.retain-g)}for(var v=new d(m);f.hasNext()||p.hasNext();)if(p.peekType()==="insert")v.push(p.next());else if(f.peekType()==="delete")v.push(f.next());else{var b=Math.min(f.peekLength(),p.peekLength()),A=f.next(b),y=p.next(b);if(typeof y.retain=="number"){var P={};typeof A.retain=="number"?P.retain=b:P.insert=A.insert;var C=u.attributes.compose(A.attributes,y.attributes,typeof A.retain=="number");if(C&&(P.attributes=C),v.push(P),!p.hasNext()&&s(v.ops[v.ops.length-1],P)){var I=new d(f.rest());return v.concat(I).chop()}}else typeof y.delete=="number"&&typeof A.retain=="number"&&v.push(y)}return v.chop()},d.prototype.concat=function(h){var f=new d(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},d.prototype.diff=function(h,f){if(this.ops===h.ops)return new d;var p=[this,h].map(function(b){return b.map(function(A){if(A.insert!=null)return typeof A.insert=="string"?A.insert:c;var y=b===h?"on":"with";throw new Error("diff() called "+y+" non-document")}).join("")}),m=new d,_=o(p[0],p[1],f),g=u.iterator(this.ops),v=u.iterator(h.ops);return _.forEach(function(b){for(var A=b[1].length;A>0;){var y=0;switch(b[0]){case o.INSERT:y=Math.min(v.peekLength(),A),m.push(v.next(y));break;case o.DELETE:y=Math.min(A,g.peekLength()),g.next(y),m.delete(y);break;case o.EQUAL:y=Math.min(g.peekLength(),v.peekLength(),A);var P=g.next(y),C=v.next(y);s(P.insert,C.insert)?m.retain(y,u.attributes.diff(P.attributes,C.attributes)):m.push(C).delete(y);break}A-=y}}),m.chop()},d.prototype.eachLine=function(h,f){f=f||`
`;for(var p=u.iterator(this.ops),m=new d,_=0;p.hasNext();){if(p.peekType()!=="insert")return;var g=p.peek(),v=u.length(g)-p.peekLength(),b=typeof g.insert=="string"?g.insert.indexOf(f,v)-v:-1;if(b<0)m.push(p.next());else if(b>0)m.push(p.next(b));else{if(h(m,p.next(1).attributes||{},_)===!1)return;_+=1,m=new d}}m.length()>0&&h(m,{},_)},d.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var p=u.iterator(this.ops),m=u.iterator(h.ops),_=new d;p.hasNext()||m.hasNext();)if(p.peekType()==="insert"&&(f||m.peekType()!=="insert"))_.retain(u.length(p.next()));else if(m.peekType()==="insert")_.push(m.next());else{var g=Math.min(p.peekLength(),m.peekLength()),v=p.next(g),b=m.next(g);if(v.delete)continue;b.delete?_.push(b):_.retain(g,u.attributes.transform(v.attributes,b.attributes,f))}return _.chop()},d.prototype.transformPosition=function(h,f){f=!!f;for(var p=u.iterator(this.ops),m=0;p.hasNext()&&m<=h;){var _=p.peekLength(),g=p.peekType();if(p.next(),g==="delete"){h-=Math.min(_,h-m);continue}else g==="insert"&&(m<h||!f)&&(h+=_);m+=_}return h},e.exports=d},function(e,r){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,s=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=function(p){return typeof Array.isArray=="function"?Array.isArray(p):o.call(p)==="[object Array]"},c=function(p){if(!p||o.call(p)!=="[object Object]")return!1;var m=i.call(p,"constructor"),_=p.constructor&&p.constructor.prototype&&i.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!m&&!_)return!1;var g;for(g in p);return typeof g>"u"||i.call(p,g)},d=function(p,m){s&&m.name==="__proto__"?s(p,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):p[m.name]=m.newValue},h=function(p,m){if(m==="__proto__")if(i.call(p,m)){if(l)return l(p,m).value}else return;return p[m]};e.exports=function f(){var p,m,_,g,v,b,A=arguments[0],y=1,P=arguments.length,C=!1;for(typeof A=="boolean"&&(C=A,A=arguments[1]||{},y=2),(A==null||typeof A!="object"&&typeof A!="function")&&(A={});y<P;++y)if(p=arguments[y],p!=null)for(m in p)_=h(A,m),g=h(p,m),A!==g&&(C&&g&&(c(g)||(v=u(g)))?(v?(v=!1,b=_&&u(_)?_:[]):b=_&&c(_)?_:{},d(A,{name:m,newValue:f(C,b,g)})):typeof g<"u"&&d(A,{name:m,newValue:g}));return A}},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BlockEmbed=r.bubbleFormats=void 0;var o=function(){function T(R,S){for(var L=0;L<S.length;L++){var B=S[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(R,B.key,B)}}return function(R,S,L){return S&&T(R.prototype,S),L&&T(R,L),R}}(),s=function T(R,S,L){R===null&&(R=Function.prototype);var B=Object.getOwnPropertyDescriptor(R,S);if(B===void 0){var $=Object.getPrototypeOf(R);return $===null?void 0:T($,S,L)}else{if("value"in B)return B.value;var z=B.get;return z===void 0?void 0:z.call(L)}},l=i(3),u=A(l),c=i(2),d=A(c),h=i(0),f=A(h),p=i(16),m=A(p),_=i(6),g=A(_),v=i(7),b=A(v);function A(T){return T&&T.__esModule?T:{default:T}}function y(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")}function P(T,R){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:T}function C(T,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);T.prototype=Object.create(R&&R.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(T,R):T.__proto__=R)}var I=1,E=function(T){C(R,T);function R(){return y(this,R),P(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}return o(R,[{key:"attach",value:function(){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(L,B){var $=f.default.query(L,f.default.Scope.BLOCK_ATTRIBUTE);$!=null&&this.attributes.attribute($,B)}},{key:"formatAt",value:function(L,B,$,z){this.format($,z)}},{key:"insertAt",value:function(L,B,$){if(typeof B=="string"&&B.endsWith(`
`)){var z=f.default.create(x.blotName);this.parent.insertBefore(z,L===0?this:this.next),z.insertAt(0,B.slice(0,-1))}else s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,L,B,$)}}]),R}(f.default.Embed);E.scope=f.default.Scope.BLOCK_BLOT;var x=function(T){C(R,T);function R(S){y(this,R);var L=P(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,S));return L.cache={},L}return o(R,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(L,B){return B.length()===0?L:L.insert(B.value(),O(B))},new d.default).insert(`
`,O(this))),this.cache.delta}},{key:"deleteAt",value:function(L,B){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"deleteAt",this).call(this,L,B),this.cache={}}},{key:"formatAt",value:function(L,B,$,z){B<=0||(f.default.query($,f.default.Scope.BLOCK)?L+B===this.length()&&this.format($,z):s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"formatAt",this).call(this,L,Math.min(B,this.length()-L-1),$,z),this.cache={})}},{key:"insertAt",value:function(L,B,$){if($!=null)return s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,L,B,$);if(B.length!==0){var z=B.split(`
`),Y=z.shift();Y.length>0&&(L<this.length()-1||this.children.tail==null?s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertAt",this).call(this,Math.min(L,this.length()-1),Y):this.children.tail.insertAt(this.children.tail.length(),Y),this.cache={});var U=this;z.reduce(function(F,N){return U=U.split(F,!0),U.insertAt(0,N),N.length},L+Y.length)}}},{key:"insertBefore",value:function(L,B){var $=this.children.head;s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"insertBefore",this).call(this,L,B),$ instanceof m.default&&$.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"length",this).call(this)+I),this.cache.length}},{key:"moveChildren",value:function(L,B){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"moveChildren",this).call(this,L,B),this.cache={}}},{key:"optimize",value:function(L){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"optimize",this).call(this,L),this.cache={}}},{key:"path",value:function(L){return s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"path",this).call(this,L,!0)}},{key:"removeChild",value:function(L){s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"removeChild",this).call(this,L),this.cache={}}},{key:"split",value:function(L){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(B&&(L===0||L>=this.length()-I)){var $=this.clone();return L===0?(this.parent.insertBefore($,this),this):(this.parent.insertBefore($,this.next),$)}else{var z=s(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"split",this).call(this,L,B);return this.cache={},z}}}]),R}(f.default.Block);x.blotName="block",x.tagName="P",x.defaultChild="break",x.allowedChildren=[g.default,f.default.Embed,b.default];function O(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T==null||(typeof T.formats=="function"&&(R=(0,u.default)(R,T.formats())),T.parent==null||T.parent.blotName=="scroll"||T.parent.statics.scope!==T.statics.scope)?R:O(T.parent,R)}r.bubbleFormats=O,r.BlockEmbed=E,r.default=x},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.overload=r.expandConfig=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},s=function(){function U(F,N){var V=[],j=!0,K=!1,H=void 0;try{for(var M=F[Symbol.iterator](),q;!(j=(q=M.next()).done)&&(V.push(q.value),!(N&&V.length===N));j=!0);}catch(Q){K=!0,H=Q}finally{try{!j&&M.return&&M.return()}finally{if(K)throw H}}return V}return function(F,N){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return U(F,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function U(F,N){for(var V=0;V<N.length;V++){var j=N[V];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,N,V){return N&&U(F.prototype,N),V&&U(F,V),F}}();i(50);var u=i(2),c=O(u),d=i(14),h=O(d),f=i(8),p=O(f),m=i(9),_=O(m),g=i(0),v=O(g),b=i(15),A=O(b),y=i(3),P=O(y),C=i(10),I=O(C),E=i(34),x=O(E);function O(U){return U&&U.__esModule?U:{default:U}}function T(U,F,N){return F in U?Object.defineProperty(U,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):U[F]=N,U}function R(U,F){if(!(U instanceof F))throw new TypeError("Cannot call a class as a function")}var S=(0,I.default)("quill"),L=function(){l(U,null,[{key:"debug",value:function(N){N===!0&&(N="log"),I.default.level(N)}},{key:"find",value:function(N){return N.__quill||v.default.find(N)}},{key:"import",value:function(N){return this.imports[N]==null&&S.error("Cannot import "+N+". Are you sure it was registered?"),this.imports[N]}},{key:"register",value:function(N,V){var j=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof N!="string"){var H=N.attrName||N.blotName;typeof H=="string"?this.register("formats/"+H,N,V):Object.keys(N).forEach(function(M){j.register(M,N[M],V)})}else this.imports[N]!=null&&!K&&S.warn("Overwriting "+N+" with",V),this.imports[N]=V,(N.startsWith("blots/")||N.startsWith("formats/"))&&V.blotName!=="abstract"?v.default.register(V):N.startsWith("modules")&&typeof V.register=="function"&&V.register()}}]);function U(F){var N=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(R(this,U),this.options=B(F,V),this.container=this.options.container,this.container==null)return S.error("Invalid Quill container",F);this.options.debug&&U.debug(this.options.debug);var j=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new A.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(H){H===p.default.events.TEXT_CHANGE&&N.root.classList.toggle("ql-blank",N.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(H,M){var q=N.selection.lastRange,Q=q&&q.length===0?q.index:void 0;$.call(N,function(){return N.editor.update(null,M,Q)},H)});var K=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+j+"<p><br></p></div>");this.setContents(K),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(U,[{key:"addContainer",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof N=="string"){var j=N;N=document.createElement("div"),N.classList.add(j)}return this.container.insertBefore(N,V),N}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(N,V,j){var K=this,H=z(N,V,j),M=s(H,4);return N=M[0],V=M[1],j=M[3],$.call(this,function(){return K.editor.deleteText(N,V)},j,N,-1*V)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(N),this.container.classList.toggle("ql-disabled",!N)}},{key:"focus",value:function(){var N=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=N,this.scrollIntoView()}},{key:"format",value:function(N,V){var j=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return $.call(this,function(){var H=j.getSelection(!0),M=new c.default;if(H==null)return M;if(v.default.query(N,v.default.Scope.BLOCK))M=j.editor.formatLine(H.index,H.length,T({},N,V));else{if(H.length===0)return j.selection.format(N,V),M;M=j.editor.formatText(H.index,H.length,T({},N,V))}return j.setSelection(H,p.default.sources.SILENT),M},K)}},{key:"formatLine",value:function(N,V,j,K,H){var M=this,q=void 0,Q=z(N,V,j,K,H),W=s(Q,4);return N=W[0],V=W[1],q=W[2],H=W[3],$.call(this,function(){return M.editor.formatLine(N,V,q)},H,N,0)}},{key:"formatText",value:function(N,V,j,K,H){var M=this,q=void 0,Q=z(N,V,j,K,H),W=s(Q,4);return N=W[0],V=W[1],q=W[2],H=W[3],$.call(this,function(){return M.editor.formatText(N,V,q)},H,N,0)}},{key:"getBounds",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=void 0;typeof N=="number"?j=this.selection.getBounds(N,V):j=this.selection.getBounds(N.index,N.length);var K=this.container.getBoundingClientRect();return{bottom:j.bottom-K.top,height:j.height,left:j.left-K.left,right:j.right-K.left,top:j.top-K.top,width:j.width}}},{key:"getContents",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,j=z(N,V),K=s(j,2);return N=K[0],V=K[1],this.editor.getContents(N,V)}},{key:"getFormat",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof N=="number"?this.editor.getFormat(N,V):this.editor.getFormat(N.index,N.length)}},{key:"getIndex",value:function(N){return N.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(N){return this.scroll.leaf(N)}},{key:"getLine",value:function(N){return this.scroll.line(N)}},{key:"getLines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof N!="number"?this.scroll.lines(N.index,N.length):this.scroll.lines(N,V)}},{key:"getModule",value:function(N){return this.theme.modules[N]}},{key:"getSelection",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return N&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-N,j=z(N,V),K=s(j,2);return N=K[0],V=K[1],this.editor.getText(N,V)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(N,V,j){var K=this,H=arguments.length>3&&arguments[3]!==void 0?arguments[3]:U.sources.API;return $.call(this,function(){return K.editor.insertEmbed(N,V,j)},H,N)}},{key:"insertText",value:function(N,V,j,K,H){var M=this,q=void 0,Q=z(N,0,j,K,H),W=s(Q,4);return N=W[0],q=W[2],H=W[3],$.call(this,function(){return M.editor.insertText(N,V,q)},H,N,V.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(N,V,j){this.clipboard.dangerouslyPasteHTML(N,V,j)}},{key:"removeFormat",value:function(N,V,j){var K=this,H=z(N,V,j),M=s(H,4);return N=M[0],V=M[1],j=M[3],$.call(this,function(){return K.editor.removeFormat(N,V)},j,N)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(N){var V=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return $.call(this,function(){N=new c.default(N);var K=V.getLength(),H=V.editor.deleteText(0,K),M=V.editor.applyDelta(N),q=M.ops[M.ops.length-1];q!=null&&typeof q.insert=="string"&&q.insert[q.insert.length-1]===`
`&&(V.editor.deleteText(V.getLength()-1,1),M.delete(1));var Q=H.compose(M);return Q},j)}},{key:"setSelection",value:function(N,V,j){if(N==null)this.selection.setRange(null,V||U.sources.API);else{var K=z(N,V,j),H=s(K,4);N=H[0],V=H[1],j=H[3],this.selection.setRange(new b.Range(N,V),j),j!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,j=new c.default().insert(N);return this.setContents(j,V)}},{key:"update",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,V=this.scroll.update(N);return this.selection.update(N),V}},{key:"updateContents",value:function(N){var V=this,j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return $.call(this,function(){return N=new c.default(N),V.editor.applyDelta(N,j)},j,!0)}}]),U}();L.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},L.events=p.default.events,L.sources=p.default.sources,L.version="1.3.7",L.imports={delta:c.default,parchment:v.default,"core/module":_.default,"core/theme":x.default};function B(U,F){if(F=(0,P.default)(!0,{container:U,modules:{clipboard:!0,keyboard:!0,history:!0}},F),!F.theme||F.theme===L.DEFAULTS.theme)F.theme=x.default;else if(F.theme=L.import("themes/"+F.theme),F.theme==null)throw new Error("Invalid theme "+F.theme+". Did you register it?");var N=(0,P.default)(!0,{},F.theme.DEFAULTS);[N,F].forEach(function(K){K.modules=K.modules||{},Object.keys(K.modules).forEach(function(H){K.modules[H]===!0&&(K.modules[H]={})})});var V=Object.keys(N.modules).concat(Object.keys(F.modules)),j=V.reduce(function(K,H){var M=L.import("modules/"+H);return M==null?S.error("Cannot load "+H+" module. Are you sure you registered it?"):K[H]=M.DEFAULTS||{},K},{});return F.modules!=null&&F.modules.toolbar&&F.modules.toolbar.constructor!==Object&&(F.modules.toolbar={container:F.modules.toolbar}),F=(0,P.default)(!0,{},L.DEFAULTS,{modules:j},N,F),["bounds","container","scrollingContainer"].forEach(function(K){typeof F[K]=="string"&&(F[K]=document.querySelector(F[K]))}),F.modules=Object.keys(F.modules).reduce(function(K,H){return F.modules[H]&&(K[H]=F.modules[H]),K},{}),F}function $(U,F,N,V){if(this.options.strict&&!this.isEnabled()&&F===p.default.sources.USER)return new c.default;var j=N==null?null:this.getSelection(),K=this.editor.delta,H=U();if(j!=null&&(N===!0&&(N=j.index),V==null?j=Y(j,H,F):V!==0&&(j=Y(j,N,V,F)),this.setSelection(j,p.default.sources.SILENT)),H.length()>0){var M,q=[p.default.events.TEXT_CHANGE,H,K,F];if((M=this.emitter).emit.apply(M,[p.default.events.EDITOR_CHANGE].concat(q)),F!==p.default.sources.SILENT){var Q;(Q=this.emitter).emit.apply(Q,q)}}return H}function z(U,F,N,V,j){var K={};return typeof U.index=="number"&&typeof U.length=="number"?typeof F!="number"?(j=V,V=N,N=F,F=U.length,U=U.index):(F=U.length,U=U.index):typeof F!="number"&&(j=V,V=N,N=F,F=0),(typeof N>"u"?"undefined":o(N))==="object"?(K=N,j=V):typeof N=="string"&&(V!=null?K[N]=V:j=N),j=j||p.default.sources.API,[U,F,K,j]}function Y(U,F,N,V){if(U==null)return null;var j=void 0,K=void 0;if(F instanceof c.default){var H=[U.index,U.index+U.length].map(function(W){return F.transformPosition(W,V!==p.default.sources.USER)}),M=s(H,2);j=M[0],K=M[1]}else{var q=[U.index,U.index+U.length].map(function(W){return W<F||W===F&&V===p.default.sources.USER?W:N>=0?W+N:Math.max(F,W+N)}),Q=s(q,2);j=Q[0],K=Q[1]}return new b.Range(j,K-j)}r.expandConfig=B,r.overload=z,r.default=L},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(v,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,A){return b&&g(v.prototype,b),A&&g(v,A),v}}(),s=function g(v,b,A){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,b);if(y===void 0){var P=Object.getPrototypeOf(v);return P===null?void 0:g(P,b,A)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(A)}},l=i(7),u=h(l),c=i(0),d=h(c);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function p(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function m(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var _=function(g){m(v,g);function v(){return f(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"formatAt",value:function(A,y,P,C){if(v.compare(this.statics.blotName,P)<0&&d.default.query(P,d.default.Scope.BLOT)){var I=this.isolate(A,y);C&&I.wrap(P,C)}else s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,A,y,P,C)}},{key:"optimize",value:function(A){if(s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,A),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var y=this.parent.isolate(this.offset(),this.length());this.moveChildren(y),y.wrap(this)}}}],[{key:"compare",value:function(A,y){var P=v.order.indexOf(A),C=v.order.indexOf(y);return P>=0||C>=0?P-C:A===y?0:A<y?-1:1}}]),v}(d.default.Inline);_.allowedChildren=[_,d.default.Embed,u.default],_.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],r.default=_},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=l(o);function l(f){return f&&f.__esModule?f:{default:f}}function u(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=function(f){d(p,f);function p(){return u(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default.Text);r.default=h},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function b(A,y){for(var P=0;P<y.length;P++){var C=y[P];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(A,C.key,C)}}return function(A,y,P){return y&&b(A.prototype,y),P&&b(A,P),A}}(),s=function b(A,y,P){A===null&&(A=Function.prototype);var C=Object.getOwnPropertyDescriptor(A,y);if(C===void 0){var I=Object.getPrototypeOf(A);return I===null?void 0:b(I,y,P)}else{if("value"in C)return C.value;var E=C.get;return E===void 0?void 0:E.call(P)}},l=i(54),u=h(l),c=i(10),d=h(c);function h(b){return b&&b.__esModule?b:{default:b}}function f(b,A){if(!(b instanceof A))throw new TypeError("Cannot call a class as a function")}function p(b,A){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:b}function m(b,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);b.prototype=Object.create(A&&A.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(b,A):b.__proto__=A)}var _=(0,d.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(b){document.addEventListener(b,function(){for(var A=arguments.length,y=Array(A),P=0;P<A;P++)y[P]=arguments[P];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(C){if(C.__quill&&C.__quill.emitter){var I;(I=C.__quill.emitter).handleDOM.apply(I,y)}})})});var v=function(b){m(A,b);function A(){f(this,A);var y=p(this,(A.__proto__||Object.getPrototypeOf(A)).call(this));return y.listeners={},y.on("error",_.error),y}return o(A,[{key:"emit",value:function(){_.log.apply(_,arguments),s(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(P){for(var C=arguments.length,I=Array(C>1?C-1:0),E=1;E<C;E++)I[E-1]=arguments[E];(this.listeners[P.type]||[]).forEach(function(x){var O=x.node,T=x.handler;(P.target===O||O.contains(P.target))&&T.apply(void 0,[P].concat(I))})}},{key:"listenDOM",value:function(P,C,I){this.listeners[P]||(this.listeners[P]=[]),this.listeners[P].push({node:C,handler:I})}}]),A}(u.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},r.default=v},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var s=function l(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,l),this.quill=u,this.options=c};s.DEFAULTS={},r.default=s},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=["error","warn","log","info"],s="warn";function l(c){if(o.indexOf(c)<=o.indexOf(s)){for(var d,h=arguments.length,f=Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];(d=console)[c].apply(d,f)}}function u(c){return o.reduce(function(d,h){return d[h]=l.bind(console,h,c),d},{})}l.level=u.level=function(c){s=c},r.default=u},function(e,r,i){var o=Array.prototype.slice,s=i(52),l=i(53),u=e.exports=function(f,p,m){return m||(m={}),f===p?!0:f instanceof Date&&p instanceof Date?f.getTime()===p.getTime():!f||!p||typeof f!="object"&&typeof p!="object"?m.strict?f===p:f==p:h(f,p,m)};function c(f){return f==null}function d(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,p,m){var _,g;if(c(f)||c(p)||f.prototype!==p.prototype)return!1;if(l(f))return l(p)?(f=o.call(f),p=o.call(p),u(f,p,m)):!1;if(d(f)){if(!d(p)||f.length!==p.length)return!1;for(_=0;_<f.length;_++)if(f[_]!==p[_])return!1;return!0}try{var v=s(f),b=s(p)}catch{return!1}if(v.length!=b.length)return!1;for(v.sort(),b.sort(),_=v.length-1;_>=0;_--)if(v[_]!=b[_])return!1;for(_=v.length-1;_>=0;_--)if(g=v[_],!u(f[g],p[g],m))return!1;return typeof f==typeof p}},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function l(u,c,d){d===void 0&&(d={}),this.attrName=u,this.keyName=c;var h=o.Scope.TYPE&o.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&o.Scope.LEVEL|h:this.scope=o.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return l.keys=function(u){return[].map.call(u.attributes,function(c){return c.name})},l.prototype.add=function(u,c){return this.canAdd(u,c)?(u.setAttribute(this.keyName,c),!0):!1},l.prototype.canAdd=function(u,c){var d=o.query(u,o.Scope.BLOT&(this.scope|o.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof c=="string"?this.whitelist.indexOf(c.replace(/["']/g,""))>-1:this.whitelist.indexOf(c)>-1},l.prototype.remove=function(u){u.removeAttribute(this.keyName)},l.prototype.value=function(u){var c=u.getAttribute(this.keyName);return this.canAdd(u,c)&&c?c:""},l}();r.default=s},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Code=void 0;var o=function(){function E(x,O){var T=[],R=!0,S=!1,L=void 0;try{for(var B=x[Symbol.iterator](),$;!(R=($=B.next()).done)&&(T.push($.value),!(O&&T.length===O));R=!0);}catch(z){S=!0,L=z}finally{try{!R&&B.return&&B.return()}finally{if(S)throw L}}return T}return function(x,O){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return E(x,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(x,O){for(var T=0;T<O.length;T++){var R=O[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,R.key,R)}}return function(x,O,T){return O&&E(x.prototype,O),T&&E(x,T),x}}(),l=function E(x,O,T){x===null&&(x=Function.prototype);var R=Object.getOwnPropertyDescriptor(x,O);if(R===void 0){var S=Object.getPrototypeOf(x);return S===null?void 0:E(S,O,T)}else{if("value"in R)return R.value;var L=R.get;return L===void 0?void 0:L.call(T)}},u=i(2),c=b(u),d=i(0),h=b(d),f=i(4),p=b(f),m=i(6),_=b(m),g=i(7),v=b(g);function b(E){return E&&E.__esModule?E:{default:E}}function A(E,x){if(!(E instanceof x))throw new TypeError("Cannot call a class as a function")}function y(E,x){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:E}function P(E,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);E.prototype=Object.create(x&&x.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(E,x):E.__proto__=x)}var C=function(E){P(x,E);function x(){return A(this,x),y(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return x}(_.default);C.blotName="code",C.tagName="CODE";var I=function(E){P(x,E);function x(){return A(this,x),y(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return s(x,[{key:"delta",value:function(){var T=this,R=this.domNode.textContent;return R.endsWith(`
`)&&(R=R.slice(0,-1)),R.split(`
`).reduce(function(S,L){return S.insert(L).insert(`
`,T.formats())},new c.default)}},{key:"format",value:function(T,R){if(!(T===this.statics.blotName&&R)){var S=this.descendant(v.default,this.length()-1),L=o(S,1),B=L[0];B!=null&&B.deleteAt(B.length()-1,1),l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,T,R)}}},{key:"formatAt",value:function(T,R,S,L){if(R!==0&&!(h.default.query(S,h.default.Scope.BLOCK)==null||S===this.statics.blotName&&L===this.statics.formats(this.domNode))){var B=this.newlineIndex(T);if(!(B<0||B>=T+R)){var $=this.newlineIndex(T,!0)+1,z=B-$+1,Y=this.isolate($,z),U=Y.next;Y.format(S,L),U instanceof x&&U.formatAt(0,T-$+R-z,S,L)}}}},{key:"insertAt",value:function(T,R,S){if(S==null){var L=this.descendant(v.default,T),B=o(L,2),$=B[0],z=B[1];$.insertAt(z,R)}}},{key:"length",value:function(){var T=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?T:T+1}},{key:"newlineIndex",value:function(T){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R)return this.domNode.textContent.slice(0,T).lastIndexOf(`
`);var S=this.domNode.textContent.slice(T).indexOf(`
`);return S>-1?T+S:-1}},{key:"optimize",value:function(T){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,T);var R=this.next;R!=null&&R.prev===this&&R.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===R.statics.formats(R.domNode)&&(R.optimize(T),R.moveChildren(this),R.remove())}},{key:"replace",value:function(T){l(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"replace",this).call(this,T),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(R){var S=h.default.find(R);S==null?R.parentNode.removeChild(R):S instanceof h.default.Embed?S.remove():S.unwrap()})}}],[{key:"create",value:function(T){var R=l(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,T);return R.setAttribute("spellcheck",!1),R}},{key:"formats",value:function(){return!0}}]),x}(p.default);I.blotName="code-block",I.tagName="PRE",I.TAB="  ",r.Code=C,r.default=I},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},s=function(){function U(F,N){var V=[],j=!0,K=!1,H=void 0;try{for(var M=F[Symbol.iterator](),q;!(j=(q=M.next()).done)&&(V.push(q.value),!(N&&V.length===N));j=!0);}catch(Q){K=!0,H=Q}finally{try{!j&&M.return&&M.return()}finally{if(K)throw H}}return V}return function(F,N){if(Array.isArray(F))return F;if(Symbol.iterator in Object(F))return U(F,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function U(F,N){for(var V=0;V<N.length;V++){var j=N[V];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(F,j.key,j)}}return function(F,N,V){return N&&U(F.prototype,N),V&&U(F,V),F}}(),u=i(2),c=R(u),d=i(20),h=R(d),f=i(0),p=R(f),m=i(13),_=R(m),g=i(24),v=R(g),b=i(4),A=R(b),y=i(16),P=R(y),C=i(21),I=R(C),E=i(11),x=R(E),O=i(3),T=R(O);function R(U){return U&&U.__esModule?U:{default:U}}function S(U,F,N){return F in U?Object.defineProperty(U,F,{value:N,enumerable:!0,configurable:!0,writable:!0}):U[F]=N,U}function L(U,F){if(!(U instanceof F))throw new TypeError("Cannot call a class as a function")}var B=/^[ -~]*$/,$=function(){function U(F){L(this,U),this.scroll=F,this.delta=this.getDelta()}return l(U,[{key:"applyDelta",value:function(N){var V=this,j=!1;this.scroll.update();var K=this.scroll.length();return this.scroll.batchStart(),N=Y(N),N.reduce(function(H,M){var q=M.retain||M.delete||M.insert.length||1,Q=M.attributes||{};if(M.insert!=null){if(typeof M.insert=="string"){var W=M.insert;W.endsWith(`
`)&&j&&(j=!1,W=W.slice(0,-1)),H>=K&&!W.endsWith(`
`)&&(j=!0),V.scroll.insertAt(H,W);var J=V.scroll.line(H),ot=s(J,2),ut=ot[0],pt=ot[1],yt=(0,T.default)({},(0,b.bubbleFormats)(ut));if(ut instanceof A.default){var ht=ut.descendant(p.default.Leaf,pt),Bt=s(ht,1),kt=Bt[0];yt=(0,T.default)(yt,(0,b.bubbleFormats)(kt))}Q=h.default.attributes.diff(yt,Q)||{}}else if(o(M.insert)==="object"){var Z=Object.keys(M.insert)[0];if(Z==null)return H;V.scroll.insertAt(H,Z,M.insert[Z])}K+=q}return Object.keys(Q).forEach(function(tt){V.scroll.formatAt(H,q,tt,Q[tt])}),H+q},0),N.reduce(function(H,M){return typeof M.delete=="number"?(V.scroll.deleteAt(H,M.delete),H):H+(M.retain||M.insert.length||1)},0),this.scroll.batchEnd(),this.update(N)}},{key:"deleteText",value:function(N,V){return this.scroll.deleteAt(N,V),this.update(new c.default().retain(N).delete(V))}},{key:"formatLine",value:function(N,V){var j=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(K).forEach(function(H){if(!(j.scroll.whitelist!=null&&!j.scroll.whitelist[H])){var M=j.scroll.lines(N,Math.max(V,1)),q=V;M.forEach(function(Q){var W=Q.length();if(!(Q instanceof _.default))Q.format(H,K[H]);else{var J=N-Q.offset(j.scroll),ot=Q.newlineIndex(J+q)-J+1;Q.formatAt(J,ot,H,K[H])}q-=W})}}),this.scroll.optimize(),this.update(new c.default().retain(N).retain(V,(0,I.default)(K)))}},{key:"formatText",value:function(N,V){var j=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(K).forEach(function(H){j.scroll.formatAt(N,V,H,K[H])}),this.update(new c.default().retain(N).retain(V,(0,I.default)(K)))}},{key:"getContents",value:function(N,V){return this.delta.slice(N,N+V)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(N,V){return N.concat(V.delta())},new c.default)}},{key:"getFormat",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,j=[],K=[];V===0?this.scroll.path(N).forEach(function(M){var q=s(M,1),Q=q[0];Q instanceof A.default?j.push(Q):Q instanceof p.default.Leaf&&K.push(Q)}):(j=this.scroll.lines(N,V),K=this.scroll.descendants(p.default.Leaf,N,V));var H=[j,K].map(function(M){if(M.length===0)return{};for(var q=(0,b.bubbleFormats)(M.shift());Object.keys(q).length>0;){var Q=M.shift();if(Q==null)return q;q=z((0,b.bubbleFormats)(Q),q)}return q});return T.default.apply(T.default,H)}},{key:"getText",value:function(N,V){return this.getContents(N,V).filter(function(j){return typeof j.insert=="string"}).map(function(j){return j.insert}).join("")}},{key:"insertEmbed",value:function(N,V,j){return this.scroll.insertAt(N,V,j),this.update(new c.default().retain(N).insert(S({},V,j)))}},{key:"insertText",value:function(N,V){var j=this,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return V=V.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(N,V),Object.keys(K).forEach(function(H){j.scroll.formatAt(N,V.length,H,K[H])}),this.update(new c.default().retain(N).insert(V,(0,I.default)(K)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var N=this.scroll.children.head;return N.statics.blotName!==A.default.blotName||N.children.length>1?!1:N.children.head instanceof P.default}},{key:"removeFormat",value:function(N,V){var j=this.getText(N,V),K=this.scroll.line(N+V),H=s(K,2),M=H[0],q=H[1],Q=0,W=new c.default;M!=null&&(M instanceof _.default?Q=M.newlineIndex(q)-q+1:Q=M.length()-q,W=M.delta().slice(q,q+Q-1).insert(`
`));var J=this.getContents(N,V+Q),ot=J.diff(new c.default().insert(j).concat(W)),ut=new c.default().retain(N).concat(ot);return this.applyDelta(ut)}},{key:"update",value:function(N){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,K=this.delta;if(V.length===1&&V[0].type==="characterData"&&V[0].target.data.match(B)&&p.default.find(V[0].target)){var H=p.default.find(V[0].target),M=(0,b.bubbleFormats)(H),q=H.offset(this.scroll),Q=V[0].oldValue.replace(v.default.CONTENTS,""),W=new c.default().insert(Q),J=new c.default().insert(H.value()),ot=new c.default().retain(q).concat(W.diff(J,j));N=ot.reduce(function(ut,pt){return pt.insert?ut.insert(pt.insert,M):ut.push(pt)},new c.default),this.delta=K.compose(N)}else this.delta=this.getDelta(),(!N||!(0,x.default)(K.compose(N),this.delta))&&(N=K.diff(this.delta,j));return N}}]),U}();function z(U,F){return Object.keys(F).reduce(function(N,V){return U[V]==null||(F[V]===U[V]?N[V]=F[V]:Array.isArray(F[V])?F[V].indexOf(U[V])<0&&(N[V]=F[V].concat([U[V]])):N[V]=[F[V],U[V]]),N},{})}function Y(U){return U.reduce(function(F,N){if(N.insert===1){var V=(0,I.default)(N.attributes);return delete V.image,F.insert({image:N.attributes.image},V)}if(N.attributes!=null&&(N.attributes.list===!0||N.attributes.bullet===!0)&&(N=(0,I.default)(N),N.attributes.list?N.attributes.list="ordered":(N.attributes.list="bullet",delete N.attributes.bullet)),typeof N.insert=="string"){var j=N.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return F.insert(j,N.attributes)}return F.push(N)},new c.default)}r.default=$},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.Range=void 0;var o=function(){function E(x,O){var T=[],R=!0,S=!1,L=void 0;try{for(var B=x[Symbol.iterator](),$;!(R=($=B.next()).done)&&(T.push($.value),!(O&&T.length===O));R=!0);}catch(z){S=!0,L=z}finally{try{!R&&B.return&&B.return()}finally{if(S)throw L}}return T}return function(x,O){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return E(x,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function E(x,O){for(var T=0;T<O.length;T++){var R=O[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(x,R.key,R)}}return function(x,O,T){return O&&E(x.prototype,O),T&&E(x,T),x}}(),l=i(0),u=v(l),c=i(21),d=v(c),h=i(11),f=v(h),p=i(8),m=v(p),_=i(10),g=v(_);function v(E){return E&&E.__esModule?E:{default:E}}function b(E){if(Array.isArray(E)){for(var x=0,O=Array(E.length);x<E.length;x++)O[x]=E[x];return O}else return Array.from(E)}function A(E,x){if(!(E instanceof x))throw new TypeError("Cannot call a class as a function")}var y=(0,g.default)("quill:selection"),P=function E(x){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;A(this,E),this.index=x,this.length=O},C=function(){function E(x,O){var T=this;A(this,E),this.emitter=O,this.scroll=x,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=u.default.create("cursor",this),this.lastRange=this.savedRange=new P(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){T.mouseDown||setTimeout(T.update.bind(T,m.default.sources.USER),1)}),this.emitter.on(m.default.events.EDITOR_CHANGE,function(R,S){R===m.default.events.TEXT_CHANGE&&S.length()>0&&T.update(m.default.sources.SILENT)}),this.emitter.on(m.default.events.SCROLL_BEFORE_UPDATE,function(){if(T.hasFocus()){var R=T.getNativeRange();R!=null&&R.start.node!==T.cursor.textNode&&T.emitter.once(m.default.events.SCROLL_UPDATE,function(){try{T.setNativeRange(R.start.node,R.start.offset,R.end.node,R.end.offset)}catch{}})}}),this.emitter.on(m.default.events.SCROLL_OPTIMIZE,function(R,S){if(S.range){var L=S.range,B=L.startNode,$=L.startOffset,z=L.endNode,Y=L.endOffset;T.setNativeRange(B,$,z,Y)}}),this.update(m.default.sources.SILENT)}return s(E,[{key:"handleComposition",value:function(){var O=this;this.root.addEventListener("compositionstart",function(){O.composing=!0}),this.root.addEventListener("compositionend",function(){if(O.composing=!1,O.cursor.parent){var T=O.cursor.restore();if(!T)return;setTimeout(function(){O.setNativeRange(T.startNode,T.startOffset,T.endNode,T.endOffset)},1)}})}},{key:"handleDragging",value:function(){var O=this;this.emitter.listenDOM("mousedown",document.body,function(){O.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){O.mouseDown=!1,O.update(m.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(O,T){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[O])){this.scroll.update();var R=this.getNativeRange();if(!(R==null||!R.native.collapsed||u.default.query(O,u.default.Scope.BLOCK))){if(R.start.node!==this.cursor.textNode){var S=u.default.find(R.start.node,!1);if(S==null)return;if(S instanceof u.default.Leaf){var L=S.split(R.start.offset);S.parent.insertBefore(this.cursor,L)}else S.insertBefore(this.cursor,R.start.node);this.cursor.attach()}this.cursor.format(O,T),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(O){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=this.scroll.length();O=Math.min(O,R-1),T=Math.min(O+T,R-1)-O;var S=void 0,L=this.scroll.leaf(O),B=o(L,2),$=B[0],z=B[1];if($==null)return null;var Y=$.position(z,!0),U=o(Y,2);S=U[0],z=U[1];var F=document.createRange();if(T>0){F.setStart(S,z);var N=this.scroll.leaf(O+T),V=o(N,2);if($=V[0],z=V[1],$==null)return null;var j=$.position(z,!0),K=o(j,2);return S=K[0],z=K[1],F.setEnd(S,z),F.getBoundingClientRect()}else{var H="left",M=void 0;return S instanceof Text?(z<S.data.length?(F.setStart(S,z),F.setEnd(S,z+1)):(F.setStart(S,z-1),F.setEnd(S,z),H="right"),M=F.getBoundingClientRect()):(M=$.domNode.getBoundingClientRect(),z>0&&(H="right")),{bottom:M.top+M.height,height:M.height,left:M[H],right:M[H],top:M.top,width:0}}}},{key:"getNativeRange",value:function(){var O=document.getSelection();if(O==null||O.rangeCount<=0)return null;var T=O.getRangeAt(0);if(T==null)return null;var R=this.normalizeNative(T);return y.info("getNativeRange",R),R}},{key:"getRange",value:function(){var O=this.getNativeRange();if(O==null)return[null,null];var T=this.normalizedToRange(O);return[T,O]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(O){var T=this,R=[[O.start.node,O.start.offset]];O.native.collapsed||R.push([O.end.node,O.end.offset]);var S=R.map(function($){var z=o($,2),Y=z[0],U=z[1],F=u.default.find(Y,!0),N=F.offset(T.scroll);return U===0?N:F instanceof u.default.Container?N+F.length():N+F.index(Y,U)}),L=Math.min(Math.max.apply(Math,b(S)),this.scroll.length()-1),B=Math.min.apply(Math,[L].concat(b(S)));return new P(B,L-B)}},{key:"normalizeNative",value:function(O){if(!I(this.root,O.startContainer)||!O.collapsed&&!I(this.root,O.endContainer))return null;var T={start:{node:O.startContainer,offset:O.startOffset},end:{node:O.endContainer,offset:O.endOffset},native:O};return[T.start,T.end].forEach(function(R){for(var S=R.node,L=R.offset;!(S instanceof Text)&&S.childNodes.length>0;)if(S.childNodes.length>L)S=S.childNodes[L],L=0;else if(S.childNodes.length===L)S=S.lastChild,L=S instanceof Text?S.data.length:S.childNodes.length+1;else break;R.node=S,R.offset=L}),T}},{key:"rangeToNative",value:function(O){var T=this,R=O.collapsed?[O.index]:[O.index,O.index+O.length],S=[],L=this.scroll.length();return R.forEach(function(B,$){B=Math.min(L-1,B);var z=void 0,Y=T.scroll.leaf(B),U=o(Y,2),F=U[0],N=U[1],V=F.position(N,$!==0),j=o(V,2);z=j[0],N=j[1],S.push(z,N)}),S.length<2&&(S=S.concat(S)),S}},{key:"scrollIntoView",value:function(O){var T=this.lastRange;if(T!=null){var R=this.getBounds(T.index,T.length);if(R!=null){var S=this.scroll.length()-1,L=this.scroll.line(Math.min(T.index,S)),B=o(L,1),$=B[0],z=$;if(T.length>0){var Y=this.scroll.line(Math.min(T.index+T.length,S)),U=o(Y,1);z=U[0]}if(!($==null||z==null)){var F=O.getBoundingClientRect();R.top<F.top?O.scrollTop-=F.top-R.top:R.bottom>F.bottom&&(O.scrollTop+=R.bottom-F.bottom)}}}}},{key:"setNativeRange",value:function(O,T){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:O,S=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T,L=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.info("setNativeRange",O,T,R,S),!(O!=null&&(this.root.parentNode==null||O.parentNode==null||R.parentNode==null))){var B=document.getSelection();if(B!=null)if(O!=null){this.hasFocus()||this.root.focus();var $=(this.getNativeRange()||{}).native;if($==null||L||O!==$.startContainer||T!==$.startOffset||R!==$.endContainer||S!==$.endOffset){O.tagName=="BR"&&(T=[].indexOf.call(O.parentNode.childNodes,O),O=O.parentNode),R.tagName=="BR"&&(S=[].indexOf.call(R.parentNode.childNodes,R),R=R.parentNode);var z=document.createRange();z.setStart(O,T),z.setEnd(R,S),B.removeAllRanges(),B.addRange(z)}}else B.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(O){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;if(typeof T=="string"&&(R=T,T=!1),y.info("setRange",O),O!=null){var S=this.rangeToNative(O);this.setNativeRange.apply(this,b(S).concat([T]))}else this.setNativeRange(null);this.update(R)}},{key:"update",value:function(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,T=this.lastRange,R=this.getRange(),S=o(R,2),L=S[0],B=S[1];if(this.lastRange=L,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(T,this.lastRange)){var $;!this.composing&&B!=null&&B.native.collapsed&&B.start.node!==this.cursor.textNode&&this.cursor.restore();var z=[m.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(T),O];if(($=this.emitter).emit.apply($,[m.default.events.EDITOR_CHANGE].concat(z)),O!==m.default.sources.SILENT){var Y;(Y=this.emitter).emit.apply(Y,z)}}}}]),E}();function I(E,x){try{x.parentNode}catch{return!1}return x instanceof Text&&(x=x.parentNode),E.contains(x)}r.Range=P,r.default=C},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(_,g){for(var v=0;v<g.length;v++){var b=g[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}return function(_,g,v){return g&&m(_.prototype,g),v&&m(_,v),_}}(),s=function m(_,g,v){_===null&&(_=Function.prototype);var b=Object.getOwnPropertyDescriptor(_,g);if(b===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:m(A,g,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=i(0),u=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function h(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:m}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}var p=function(m){f(_,m);function _(){return d(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"insertInto",value:function(v,b){v.children.length===0?s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertInto",this).call(this,v,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),_}(u.default.Embed);p.blotName="break",p.tagName="BR",r.default=p},function(e,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){h(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(44),l=i(30),u=i(1),c=function(h){o(f,h);function f(p){var m=h.call(this,p)||this;return m.build(),m}return f.prototype.appendChild=function(p){this.insertBefore(p)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},f.prototype.build=function(){var p=this;this.children=new s.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(m){try{var _=d(m);p.insertBefore(_,p.children.head||void 0)}catch(g){if(g instanceof u.ParchmentError)return;throw g}})},f.prototype.deleteAt=function(p,m){if(p===0&&m===this.length())return this.remove();this.children.forEachAt(p,m,function(_,g,v){_.deleteAt(g,v)})},f.prototype.descendant=function(p,m){var _=this.children.find(m),g=_[0],v=_[1];return p.blotName==null&&p(g)||p.blotName!=null&&g instanceof p?[g,v]:g instanceof f?g.descendant(p,v):[null,-1]},f.prototype.descendants=function(p,m,_){m===void 0&&(m=0),_===void 0&&(_=Number.MAX_VALUE);var g=[],v=_;return this.children.forEachAt(m,_,function(b,A,y){(p.blotName==null&&p(b)||p.blotName!=null&&b instanceof p)&&g.push(b),b instanceof f&&(g=g.concat(b.descendants(p,A,v))),v-=y}),g},f.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(p,m,_,g){this.children.forEachAt(p,m,function(v,b,A){v.formatAt(b,A,_,g)})},f.prototype.insertAt=function(p,m,_){var g=this.children.find(p),v=g[0],b=g[1];if(v)v.insertAt(b,m,_);else{var A=_==null?u.create("text",m):u.create(m,_);this.appendChild(A)}},f.prototype.insertBefore=function(p,m){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(_){return p instanceof _}))throw new u.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,m)},f.prototype.length=function(){return this.children.reduce(function(p,m){return p+m.length()},0)},f.prototype.moveChildren=function(p,m){this.children.forEach(function(_){p.insertBefore(_,m)})},f.prototype.optimize=function(p){if(h.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var m=u.create(this.statics.defaultChild);this.appendChild(m),m.optimize(p)}else this.remove()},f.prototype.path=function(p,m){m===void 0&&(m=!1);var _=this.children.find(p,m),g=_[0],v=_[1],b=[[this,p]];return g instanceof f?b.concat(g.path(v,m)):(g!=null&&b.push([g,v]),b)},f.prototype.removeChild=function(p){this.children.remove(p)},f.prototype.replace=function(p){p instanceof f&&p.moveChildren(this),h.prototype.replace.call(this,p)},f.prototype.split=function(p,m){if(m===void 0&&(m=!1),!m){if(p===0)return this;if(p===this.length())return this.next}var _=this.clone();return this.parent.insertBefore(_,this.next),this.children.forEachAt(p,this.length(),function(g,v,b){g=g.split(v,m),_.appendChild(g)}),_},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(p,m){var _=this,g=[],v=[];p.forEach(function(b){b.target===_.domNode&&b.type==="childList"&&(g.push.apply(g,b.addedNodes),v.push.apply(v,b.removedNodes))}),v.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var A=u.find(b);A!=null&&(A.domNode.parentNode==null||A.domNode.parentNode===_.domNode)&&A.detach()}}),g.filter(function(b){return b.parentNode==_.domNode}).sort(function(b,A){return b===A?0:b.compareDocumentPosition(A)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var A=null;b.nextSibling!=null&&(A=u.find(b.nextSibling));var y=d(b);(y.next!=A||y.next==null)&&(y.parent!=null&&y.parent.removeChild(_),_.insertBefore(y,A||void 0))})},f}(l.default);function d(h){var f=u.find(h);if(f==null)try{f=u.create(h)}catch{f=u.create(u.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(m){f.domNode.appendChild(m)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}r.default=c},function(e,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){h(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12),l=i(31),u=i(17),c=i(1),d=function(h){o(f,h);function f(p){var m=h.call(this,p)||this;return m.attributes=new l.default(m.domNode),m}return f.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},f.prototype.format=function(p,m){var _=c.query(p);_ instanceof s.default?this.attributes.attribute(_,m):m&&_!=null&&(p!==this.statics.blotName||this.formats()[p]!==m)&&this.replaceWith(p,m)},f.prototype.formats=function(){var p=this.attributes.values(),m=this.statics.formats(this.domNode);return m!=null&&(p[this.statics.blotName]=m),p},f.prototype.replaceWith=function(p,m){var _=h.prototype.replaceWith.call(this,p,m);return this.attributes.copy(_),_},f.prototype.update=function(p,m){var _=this;h.prototype.update.call(this,p,m),p.some(function(g){return g.target===_.domNode&&g.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(p,m){var _=h.prototype.wrap.call(this,p,m);return _ instanceof f&&_.statics.scope===this.statics.scope&&this.attributes.move(_),_},f}(u.default);r.default=d},function(e,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(30),l=i(1),u=function(c){o(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.value=function(h){return!0},d.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},d.prototype.position=function(h,f){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(p+=1),[this.parent.domNode,p]},d.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},d.scope=l.Scope.INLINE_BLOT,d}(s.default);r.default=u},function(e,r,i){var o=i(11),s=i(3),l={attributes:{compose:function(c,d,h){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});var f=s(!0,{},d);h||(f=Object.keys(f).reduce(function(m,_){return f[_]!=null&&(m[_]=f[_]),m},{}));for(var p in c)c[p]!==void 0&&d[p]===void 0&&(f[p]=c[p]);return Object.keys(f).length>0?f:void 0},diff:function(c,d){typeof c!="object"&&(c={}),typeof d!="object"&&(d={});var h=Object.keys(c).concat(Object.keys(d)).reduce(function(f,p){return o(c[p],d[p])||(f[p]=d[p]===void 0?null:d[p]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(c,d,h){if(typeof c!="object")return d;if(typeof d=="object"){if(!h)return d;var f=Object.keys(d).reduce(function(p,m){return c[m]===void 0&&(p[m]=d[m]),p},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(c){return new u(c)},length:function(c){return typeof c.delete=="number"?c.delete:typeof c.retain=="number"?c.retain:typeof c.insert=="string"?c.insert.length:1}};function u(c){this.ops=c,this.index=0,this.offset=0}u.prototype.hasNext=function(){return this.peekLength()<1/0},u.prototype.next=function(c){c||(c=1/0);var d=this.ops[this.index];if(d){var h=this.offset,f=l.length(d);if(c>=f-h?(c=f-h,this.index+=1,this.offset=0):this.offset+=c,typeof d.delete=="number")return{delete:c};var p={};return d.attributes&&(p.attributes=d.attributes),typeof d.retain=="number"?p.retain=c:typeof d.insert=="string"?p.insert=d.insert.substr(h,c):p.insert=d.insert,p}else return{retain:1/0}},u.prototype.peek=function(){return this.ops[this.index]},u.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},u.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},u.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var c=this.offset,d=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=c,this.index=d,[h].concat(f)}else return[]},e.exports=l},function(e,r){var i=function(){function o(_,g){return g!=null&&_ instanceof g}var s;try{s=Map}catch{s=function(){}}var l;try{l=Set}catch{l=function(){}}var u;try{u=Promise}catch{u=function(){}}function c(_,g,v,b,A){typeof g=="object"&&(v=g.depth,b=g.prototype,A=g.includeNonEnumerable,g=g.circular);var y=[],P=[],C=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof v>"u"&&(v=1/0);function I(E,x){if(E===null)return null;if(x===0)return E;var O,T;if(typeof E!="object")return E;if(o(E,s))O=new s;else if(o(E,l))O=new l;else if(o(E,u))O=new u(function(F,N){E.then(function(V){F(I(V,x-1))},function(V){N(I(V,x-1))})});else if(c.__isArray(E))O=[];else if(c.__isRegExp(E))O=new RegExp(E.source,m(E)),E.lastIndex&&(O.lastIndex=E.lastIndex);else if(c.__isDate(E))O=new Date(E.getTime());else{if(C&&Buffer.isBuffer(E))return Buffer.allocUnsafe?O=Buffer.allocUnsafe(E.length):O=new Buffer(E.length),E.copy(O),O;o(E,Error)?O=Object.create(E):typeof b>"u"?(T=Object.getPrototypeOf(E),O=Object.create(T)):(O=Object.create(b),T=b)}if(g){var R=y.indexOf(E);if(R!=-1)return P[R];y.push(E),P.push(O)}o(E,s)&&E.forEach(function(F,N){var V=I(N,x-1),j=I(F,x-1);O.set(V,j)}),o(E,l)&&E.forEach(function(F){var N=I(F,x-1);O.add(N)});for(var S in E){var L;T&&(L=Object.getOwnPropertyDescriptor(T,S)),!(L&&L.set==null)&&(O[S]=I(E[S],x-1))}if(Object.getOwnPropertySymbols)for(var B=Object.getOwnPropertySymbols(E),S=0;S<B.length;S++){var $=B[S],z=Object.getOwnPropertyDescriptor(E,$);z&&!z.enumerable&&!A||(O[$]=I(E[$],x-1),z.enumerable||Object.defineProperty(O,$,{enumerable:!1}))}if(A)for(var Y=Object.getOwnPropertyNames(E),S=0;S<Y.length;S++){var U=Y[S],z=Object.getOwnPropertyDescriptor(E,U);z&&z.enumerable||(O[U]=I(E[U],x-1),Object.defineProperty(O,U,{enumerable:!1}))}return O}return I(_,v)}c.clonePrototype=function(g){if(g===null)return null;var v=function(){};return v.prototype=g,new v};function d(_){return Object.prototype.toString.call(_)}c.__objToStr=d;function h(_){return typeof _=="object"&&d(_)==="[object Date]"}c.__isDate=h;function f(_){return typeof _=="object"&&d(_)==="[object Array]"}c.__isArray=f;function p(_){return typeof _=="object"&&d(_)==="[object RegExp]"}c.__isRegExp=p;function m(_){var g="";return _.global&&(g+="g"),_.ignoreCase&&(g+="i"),_.multiline&&(g+="m"),g}return c.__getRegExpFlags=m,c}();typeof e=="object"&&e.exports&&(e.exports=i)},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function O(T,R){var S=[],L=!0,B=!1,$=void 0;try{for(var z=T[Symbol.iterator](),Y;!(L=(Y=z.next()).done)&&(S.push(Y.value),!(R&&S.length===R));L=!0);}catch(U){B=!0,$=U}finally{try{!L&&z.return&&z.return()}finally{if(B)throw $}}return S}return function(T,R){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return O(T,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function O(T,R){for(var S=0;S<R.length;S++){var L=R[S];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(T,L.key,L)}}return function(T,R,S){return R&&O(T.prototype,R),S&&O(T,S),T}}(),l=function O(T,R,S){T===null&&(T=Function.prototype);var L=Object.getOwnPropertyDescriptor(T,R);if(L===void 0){var B=Object.getPrototypeOf(T);return B===null?void 0:O(B,R,S)}else{if("value"in L)return L.value;var $=L.get;return $===void 0?void 0:$.call(S)}},u=i(0),c=y(u),d=i(8),h=y(d),f=i(4),p=y(f),m=i(16),_=y(m),g=i(13),v=y(g),b=i(25),A=y(b);function y(O){return O&&O.__esModule?O:{default:O}}function P(O,T){if(!(O instanceof T))throw new TypeError("Cannot call a class as a function")}function C(O,T){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:O}function I(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);O.prototype=Object.create(T&&T.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(O,T):O.__proto__=T)}function E(O){return O instanceof p.default||O instanceof f.BlockEmbed}var x=function(O){I(T,O);function T(R,S){P(this,T);var L=C(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,R));return L.emitter=S.emitter,Array.isArray(S.whitelist)&&(L.whitelist=S.whitelist.reduce(function(B,$){return B[$]=!0,B},{})),L.domNode.addEventListener("DOMNodeInserted",function(){}),L.optimize(),L.enable(),L}return s(T,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(S,L){var B=this.line(S),$=o(B,2),z=$[0],Y=$[1],U=this.line(S+L),F=o(U,1),N=F[0];if(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,S,L),N!=null&&z!==N&&Y>0){if(z instanceof f.BlockEmbed||N instanceof f.BlockEmbed){this.optimize();return}if(z instanceof v.default){var V=z.newlineIndex(z.length(),!0);if(V>-1&&(z=z.split(V+1),z===N)){this.optimize();return}}else if(N instanceof v.default){var j=N.newlineIndex(0);j>-1&&N.split(j+1)}var K=N.children.head instanceof _.default?null:N.children.head;z.moveChildren(N,K),z.remove()}this.optimize()}},{key:"enable",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",S)}},{key:"formatAt",value:function(S,L,B,$){this.whitelist!=null&&!this.whitelist[B]||(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,S,L,B,$),this.optimize())}},{key:"insertAt",value:function(S,L,B){if(!(B!=null&&this.whitelist!=null&&!this.whitelist[L])){if(S>=this.length())if(B==null||c.default.query(L,c.default.Scope.BLOCK)==null){var $=c.default.create(this.statics.defaultChild);this.appendChild($),B==null&&L.endsWith(`
`)&&(L=L.slice(0,-1)),$.insertAt(0,L,B)}else{var z=c.default.create(L,B);this.appendChild(z)}else l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,S,L,B);this.optimize()}}},{key:"insertBefore",value:function(S,L){if(S.statics.scope===c.default.Scope.INLINE_BLOT){var B=c.default.create(this.statics.defaultChild);B.appendChild(S),S=B}l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,S,L)}},{key:"leaf",value:function(S){return this.path(S).pop()||[null,-1]}},{key:"line",value:function(S){return S===this.length()?this.line(S-1):this.descendant(E,S)}},{key:"lines",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,B=function $(z,Y,U){var F=[],N=U;return z.children.forEachAt(Y,U,function(V,j,K){E(V)?F.push(V):V instanceof c.default.Container&&(F=F.concat($(V,j,N))),N-=K}),F};return B(this,S,L)}},{key:"optimize",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,S,L),S.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,S,L))}},{key:"path",value:function(S){return l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,S).slice(1)}},{key:"update",value:function(S){if(this.batch!==!0){var L=h.default.sources.USER;typeof S=="string"&&(L=S),Array.isArray(S)||(S=this.observer.takeRecords()),S.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,L,S),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"update",this).call(this,S.concat([])),S.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,L,S)}}}]),T}(c.default.Scroll);x.blotName="scroll",x.className="ql-editor",x.tagName="DIV",x.defaultChild="block",x.allowedChildren=[p.default,f.BlockEmbed,A.default],r.default=x},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SHORTKEY=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},s=function(){function M(q,Q){var W=[],J=!0,ot=!1,ut=void 0;try{for(var pt=q[Symbol.iterator](),yt;!(J=(yt=pt.next()).done)&&(W.push(yt.value),!(Q&&W.length===Q));J=!0);}catch(ht){ot=!0,ut=ht}finally{try{!J&&pt.return&&pt.return()}finally{if(ot)throw ut}}return W}return function(q,Q){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return M(q,Q);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function M(q,Q){for(var W=0;W<Q.length;W++){var J=Q[W];J.enumerable=J.enumerable||!1,J.configurable=!0,"value"in J&&(J.writable=!0),Object.defineProperty(q,J.key,J)}}return function(q,Q,W){return Q&&M(q.prototype,Q),W&&M(q,W),q}}(),u=i(21),c=O(u),d=i(11),h=O(d),f=i(3),p=O(f),m=i(2),_=O(m),g=i(20),v=O(g),b=i(0),A=O(b),y=i(5),P=O(y),C=i(10),I=O(C),E=i(9),x=O(E);function O(M){return M&&M.__esModule?M:{default:M}}function T(M,q,Q){return q in M?Object.defineProperty(M,q,{value:Q,enumerable:!0,configurable:!0,writable:!0}):M[q]=Q,M}function R(M,q){if(!(M instanceof q))throw new TypeError("Cannot call a class as a function")}function S(M,q){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:M}function L(M,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);M.prototype=Object.create(q&&q.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(M,q):M.__proto__=q)}var B=(0,I.default)("quill:keyboard"),$=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",z=function(M){L(q,M),l(q,null,[{key:"match",value:function(W,J){return J=H(J),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ot){return!!J[ot]!==W[ot]&&J[ot]!==null})?!1:J.key===(W.which||W.keyCode)}}]);function q(Q,W){R(this,q);var J=S(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,Q,W));return J.bindings={},Object.keys(J.options.bindings).forEach(function(ot){ot==="list autofill"&&Q.scroll.whitelist!=null&&!Q.scroll.whitelist.list||J.options.bindings[ot]&&J.addBinding(J.options.bindings[ot])}),J.addBinding({key:q.keys.ENTER,shiftKey:null},V),J.addBinding({key:q.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(J.addBinding({key:q.keys.BACKSPACE},{collapsed:!0},U),J.addBinding({key:q.keys.DELETE},{collapsed:!0},F)):(J.addBinding({key:q.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},U),J.addBinding({key:q.keys.DELETE},{collapsed:!0,suffix:/^.?$/},F)),J.addBinding({key:q.keys.BACKSPACE},{collapsed:!1},N),J.addBinding({key:q.keys.DELETE},{collapsed:!1},N),J.addBinding({key:q.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},U),J.listen(),J}return l(q,[{key:"addBinding",value:function(W){var J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ut=H(W);if(ut==null||ut.key==null)return B.warn("Attempted to add invalid keyboard binding",ut);typeof J=="function"&&(J={handler:J}),typeof ot=="function"&&(ot={handler:ot}),ut=(0,p.default)(ut,J,ot),this.bindings[ut.key]=this.bindings[ut.key]||[],this.bindings[ut.key].push(ut)}},{key:"listen",value:function(){var W=this;this.quill.root.addEventListener("keydown",function(J){if(!J.defaultPrevented){var ot=J.which||J.keyCode,ut=(W.bindings[ot]||[]).filter(function(Vt){return q.match(J,Vt)});if(ut.length!==0){var pt=W.quill.getSelection();if(!(pt==null||!W.quill.hasFocus())){var yt=W.quill.getLine(pt.index),ht=s(yt,2),Bt=ht[0],kt=ht[1],Z=W.quill.getLeaf(pt.index),tt=s(Z,2),at=tt[0],lt=tt[1],et=pt.length===0?[at,lt]:W.quill.getLeaf(pt.index+pt.length),wt=s(et,2),_t=wt[0],Tt=wt[1],mt=at instanceof A.default.Text?at.value().slice(0,lt):"",Rt=_t instanceof A.default.Text?_t.value().slice(Tt):"",At={collapsed:pt.length===0,empty:pt.length===0&&Bt.length()<=1,format:W.quill.getFormat(pt),offset:kt,prefix:mt,suffix:Rt},cn=ut.some(function(Vt){if(Vt.collapsed!=null&&Vt.collapsed!==At.collapsed||Vt.empty!=null&&Vt.empty!==At.empty||Vt.offset!=null&&Vt.offset!==At.offset)return!1;if(Array.isArray(Vt.format)){if(Vt.format.every(function(he){return At.format[he]==null}))return!1}else if(o(Vt.format)==="object"&&!Object.keys(Vt.format).every(function(he){return Vt.format[he]===!0?At.format[he]!=null:Vt.format[he]===!1?At.format[he]==null:(0,h.default)(Vt.format[he],At.format[he])}))return!1;return Vt.prefix!=null&&!Vt.prefix.test(At.prefix)||Vt.suffix!=null&&!Vt.suffix.test(At.suffix)?!1:Vt.handler.call(W,pt,At)!==!0});cn&&J.preventDefault()}}}})}}]),q}(x.default);z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},z.DEFAULTS={bindings:{bold:K("bold"),italic:K("italic"),underline:K("underline"),indent:{key:z.keys.TAB,format:["blockquote","indent","list"],handler:function(q,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","+1",P.default.sources.USER)}},outdent:{key:z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(q,Q){if(Q.collapsed&&Q.offset!==0)return!0;this.quill.format("indent","-1",P.default.sources.USER)}},"outdent backspace":{key:z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(q,Q){Q.format.indent!=null?this.quill.format("indent","-1",P.default.sources.USER):Q.format.list!=null&&this.quill.format("list",!1,P.default.sources.USER)}},"indent code-block":j(!0),"outdent code-block":j(!1),"remove tab":{key:z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(q){this.quill.deleteText(q.index-1,1,P.default.sources.USER)}},tab:{key:z.keys.TAB,handler:function(q){this.quill.history.cutoff();var Q=new _.default().retain(q.index).delete(q.length).insert("	");this.quill.updateContents(Q,P.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(q.index+1,P.default.sources.SILENT)}},"list empty enter":{key:z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(q,Q){this.quill.format("list",!1,P.default.sources.USER),Q.format.indent&&this.quill.format("indent",!1,P.default.sources.USER)}},"checklist enter":{key:z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(q){var Q=this.quill.getLine(q.index),W=s(Q,2),J=W[0],ot=W[1],ut=(0,p.default)({},J.formats(),{list:"checked"}),pt=new _.default().retain(q.index).insert(`
`,ut).retain(J.length()-ot-1).retain(1,{list:"unchecked"});this.quill.updateContents(pt,P.default.sources.USER),this.quill.setSelection(q.index+1,P.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(q,Q){var W=this.quill.getLine(q.index),J=s(W,2),ot=J[0],ut=J[1],pt=new _.default().retain(q.index).insert(`
`,Q.format).retain(ot.length()-ut-1).retain(1,{header:null});this.quill.updateContents(pt,P.default.sources.USER),this.quill.setSelection(q.index+1,P.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(q,Q){var W=Q.prefix.length,J=this.quill.getLine(q.index),ot=s(J,2),ut=ot[0],pt=ot[1];if(pt>W)return!0;var yt=void 0;switch(Q.prefix.trim()){case"[]":case"[ ]":yt="unchecked";break;case"[x]":yt="checked";break;case"-":case"*":yt="bullet";break;default:yt="ordered"}this.quill.insertText(q.index," ",P.default.sources.USER),this.quill.history.cutoff();var ht=new _.default().retain(q.index-pt).delete(W+1).retain(ut.length()-2-pt).retain(1,{list:yt});this.quill.updateContents(ht,P.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(q.index-W,P.default.sources.SILENT)}},"code exit":{key:z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(q){var Q=this.quill.getLine(q.index),W=s(Q,2),J=W[0],ot=W[1],ut=new _.default().retain(q.index+J.length()-ot-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ut,P.default.sources.USER)}},"embed left":Y(z.keys.LEFT,!1),"embed left shift":Y(z.keys.LEFT,!0),"embed right":Y(z.keys.RIGHT,!1),"embed right shift":Y(z.keys.RIGHT,!0)}};function Y(M,q){var Q,W=M===z.keys.LEFT?"prefix":"suffix";return Q={key:M,shiftKey:q,altKey:null},T(Q,W,/^$/),T(Q,"handler",function(ot){var ut=ot.index;M===z.keys.RIGHT&&(ut+=ot.length+1);var pt=this.quill.getLeaf(ut),yt=s(pt,1),ht=yt[0];return ht instanceof A.default.Embed?(M===z.keys.LEFT?q?this.quill.setSelection(ot.index-1,ot.length+1,P.default.sources.USER):this.quill.setSelection(ot.index-1,P.default.sources.USER):q?this.quill.setSelection(ot.index,ot.length+1,P.default.sources.USER):this.quill.setSelection(ot.index+ot.length+1,P.default.sources.USER),!1):!0}),Q}function U(M,q){if(!(M.index===0||this.quill.getLength()<=1)){var Q=this.quill.getLine(M.index),W=s(Q,1),J=W[0],ot={};if(q.offset===0){var ut=this.quill.getLine(M.index-1),pt=s(ut,1),yt=pt[0];if(yt!=null&&yt.length()>1){var ht=J.formats(),Bt=this.quill.getFormat(M.index-1,1);ot=v.default.attributes.diff(ht,Bt)||{}}}var kt=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(q.prefix)?2:1;this.quill.deleteText(M.index-kt,kt,P.default.sources.USER),Object.keys(ot).length>0&&this.quill.formatLine(M.index-kt,kt,ot,P.default.sources.USER),this.quill.focus()}}function F(M,q){var Q=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(q.suffix)?2:1;if(!(M.index>=this.quill.getLength()-Q)){var W={},J=0,ot=this.quill.getLine(M.index),ut=s(ot,1),pt=ut[0];if(q.offset>=pt.length()-1){var yt=this.quill.getLine(M.index+1),ht=s(yt,1),Bt=ht[0];if(Bt){var kt=pt.formats(),Z=this.quill.getFormat(M.index,1);W=v.default.attributes.diff(kt,Z)||{},J=Bt.length()}}this.quill.deleteText(M.index,Q,P.default.sources.USER),Object.keys(W).length>0&&this.quill.formatLine(M.index+J-1,Q,W,P.default.sources.USER)}}function N(M){var q=this.quill.getLines(M),Q={};if(q.length>1){var W=q[0].formats(),J=q[q.length-1].formats();Q=v.default.attributes.diff(J,W)||{}}this.quill.deleteText(M,P.default.sources.USER),Object.keys(Q).length>0&&this.quill.formatLine(M.index,1,Q,P.default.sources.USER),this.quill.setSelection(M.index,P.default.sources.SILENT),this.quill.focus()}function V(M,q){var Q=this;M.length>0&&this.quill.scroll.deleteAt(M.index,M.length);var W=Object.keys(q.format).reduce(function(J,ot){return A.default.query(ot,A.default.Scope.BLOCK)&&!Array.isArray(q.format[ot])&&(J[ot]=q.format[ot]),J},{});this.quill.insertText(M.index,`
`,W,P.default.sources.USER),this.quill.setSelection(M.index+1,P.default.sources.SILENT),this.quill.focus(),Object.keys(q.format).forEach(function(J){W[J]==null&&(Array.isArray(q.format[J])||J!=="link"&&Q.quill.format(J,q.format[J],P.default.sources.USER))})}function j(M){return{key:z.keys.TAB,shiftKey:!M,format:{"code-block":!0},handler:function(Q){var W=A.default.query("code-block"),J=Q.index,ot=Q.length,ut=this.quill.scroll.descendant(W,J),pt=s(ut,2),yt=pt[0],ht=pt[1];if(yt!=null){var Bt=this.quill.getIndex(yt),kt=yt.newlineIndex(ht,!0)+1,Z=yt.newlineIndex(Bt+ht+ot),tt=yt.domNode.textContent.slice(kt,Z).split(`
`);ht=0,tt.forEach(function(at,lt){M?(yt.insertAt(kt+ht,W.TAB),ht+=W.TAB.length,lt===0?J+=W.TAB.length:ot+=W.TAB.length):at.startsWith(W.TAB)&&(yt.deleteAt(kt+ht,W.TAB.length),ht-=W.TAB.length,lt===0?J-=W.TAB.length:ot-=W.TAB.length),ht+=at.length+1}),this.quill.update(P.default.sources.USER),this.quill.setSelection(J,ot,P.default.sources.SILENT)}}}}function K(M){return{key:M[0].toUpperCase(),shortKey:!0,handler:function(Q,W){this.quill.format(M,!W.format[M],P.default.sources.USER)}}}function H(M){if(typeof M=="string"||typeof M=="number")return H({key:M});if((typeof M>"u"?"undefined":o(M))==="object"&&(M=(0,c.default)(M,!1)),typeof M.key=="string")if(z.keys[M.key.toUpperCase()]!=null)M.key=z.keys[M.key.toUpperCase()];else if(M.key.length===1)M.key=M.key.toUpperCase().charCodeAt(0);else return null;return M.shortKey&&(M[$]=M.shortKey,delete M.shortKey),M}r.default=z,r.SHORTKEY=$},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function v(b,A){var y=[],P=!0,C=!1,I=void 0;try{for(var E=b[Symbol.iterator](),x;!(P=(x=E.next()).done)&&(y.push(x.value),!(A&&y.length===A));P=!0);}catch(O){C=!0,I=O}finally{try{!P&&E.return&&E.return()}finally{if(C)throw I}}return y}return function(b,A){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return v(b,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function v(b,A,y){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,A);if(P===void 0){var C=Object.getPrototypeOf(b);return C===null?void 0:v(C,A,y)}else{if("value"in P)return P.value;var I=P.get;return I===void 0?void 0:I.call(y)}},l=function(){function v(b,A){for(var y=0;y<A.length;y++){var P=A[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,A,y){return A&&v(b.prototype,A),y&&v(b,y),b}}(),u=i(0),c=f(u),d=i(7),h=f(d);function f(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function m(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function _(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var g=function(v){_(b,v),l(b,null,[{key:"value",value:function(){}}]);function b(A,y){p(this,b);var P=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,A));return P.selection=y,P.textNode=document.createTextNode(b.CONTENTS),P.domNode.appendChild(P.textNode),P._length=0,P}return l(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(y,P){if(this._length!==0)return s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,y,P);for(var C=this,I=0;C!=null&&C.statics.scope!==c.default.Scope.BLOCK_BLOT;)I+=C.offset(C.parent),C=C.parent;C!=null&&(this._length=b.CONTENTS.length,C.optimize(),C.formatAt(I,b.CONTENTS.length,y,P),this._length=0)}},{key:"index",value:function(y,P){return y===this.textNode?0:s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,y,P)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var y=this.textNode,P=this.selection.getNativeRange(),C=void 0,I=void 0,E=void 0;if(P!=null&&P.start.node===y&&P.end.node===y){var x=[y,P.start.offset,P.end.offset];C=x[0],I=x[1],E=x[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var O=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof h.default?(C=this.next.domNode,this.next.insertAt(0,O),this.textNode.data=b.CONTENTS):(this.textNode.data=O,this.parent.insertBefore(c.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),I!=null){var T=[I,E].map(function(S){return Math.max(0,Math.min(C.data.length,S-1))}),R=o(T,2);return I=R[0],E=R[1],{startNode:C,startOffset:I,endNode:C,endOffset:E}}}}},{key:"update",value:function(y,P){var C=this;if(y.some(function(E){return E.type==="characterData"&&E.target===C.textNode})){var I=this.restore();I&&(P.range=I)}}},{key:"value",value:function(){return""}}]),b}(c.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",r.default=g},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=c(o),l=i(4),u=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function h(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:m}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}var p=function(m){f(_,m);function _(){return d(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return _}(s.default.Container);p.allowedChildren=[u.default,l.BlockEmbed,p],r.default=p},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.ColorStyle=r.ColorClass=r.ColorAttributor=void 0;var o=function(){function g(v,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,A){return b&&g(v.prototype,b),A&&g(v,A),v}}(),s=function g(v,b,A){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,b);if(y===void 0){var P=Object.getPrototypeOf(v);return P===null?void 0:g(P,b,A)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(A)}},l=i(0),u=c(l);function c(g){return g&&g.__esModule?g:{default:g}}function d(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function h(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function f(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var p=function(g){f(v,g);function v(){return d(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"value",value:function(A){var y=s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,A);return y.startsWith("rgb(")?(y=y.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+y.split(",").map(function(P){return("00"+parseInt(P).toString(16)).slice(-2)}).join("")):y}}]),v}(u.default.Attributor.Style),m=new u.default.Attributor.Class("color","ql-color",{scope:u.default.Scope.INLINE}),_=new p("color","color",{scope:u.default.Scope.INLINE});r.ColorAttributor=p,r.ColorClass=m,r.ColorStyle=_},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.sanitize=r.default=void 0;var o=function(){function _(g,v){for(var b=0;b<v.length;b++){var A=v[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(g,A.key,A)}}return function(g,v,b){return v&&_(g.prototype,v),b&&_(g,b),g}}(),s=function _(g,v,b){g===null&&(g=Function.prototype);var A=Object.getOwnPropertyDescriptor(g,v);if(A===void 0){var y=Object.getPrototypeOf(g);return y===null?void 0:_(y,v,b)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(b)}},l=i(6),u=c(l);function c(_){return _&&_.__esModule?_:{default:_}}function d(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function h(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function f(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var p=function(_){f(g,_);function g(){return d(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"format",value:function(b,A){if(b!==this.statics.blotName||!A)return s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,b,A);A=this.constructor.sanitize(A),this.domNode.setAttribute("href",A)}}],[{key:"create",value:function(b){var A=s(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,b);return b=this.sanitize(b),A.setAttribute("href",b),A.setAttribute("rel","noopener noreferrer"),A.setAttribute("target","_blank"),A}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return m(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),g}(u.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function m(_,g){var v=document.createElement("a");v.href=_;var b=v.href.slice(0,v.href.indexOf(":"));return g.indexOf(b)>-1}r.default=p,r.sanitize=m},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},s=function(){function g(v,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,A){return b&&g(v.prototype,b),A&&g(v,A),v}}(),l=i(23),u=h(l),c=i(107),d=h(c);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}var p=0;function m(g,v){g.setAttribute(v,g.getAttribute(v)!=="true")}var _=function(){function g(v){var b=this;f(this,g),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(A){switch(A.keyCode){case u.default.keys.ENTER:b.togglePicker();break;case u.default.keys.ESCAPE:b.escape(),A.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return s(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),m(this.label,"aria-expanded"),m(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var A=this,y=document.createElement("span");return y.tabIndex="0",y.setAttribute("role","button"),y.classList.add("ql-picker-item"),b.hasAttribute("value")&&y.setAttribute("data-value",b.getAttribute("value")),b.textContent&&y.setAttribute("data-label",b.textContent),y.addEventListener("click",function(){A.selectItem(y,!0)}),y.addEventListener("keydown",function(P){switch(P.keyCode){case u.default.keys.ENTER:A.selectItem(y,!0),P.preventDefault();break;case u.default.keys.ESCAPE:A.escape(),P.preventDefault();break}}),y}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=d.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,A=document.createElement("span");A.classList.add("ql-picker-options"),A.setAttribute("aria-hidden","true"),A.tabIndex="-1",A.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",A.id),this.options=A,[].slice.call(this.select.options).forEach(function(y){var P=b.buildItem(y);A.appendChild(P),y.selected===!0&&b.selectItem(P)}),this.container.appendChild(A)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(A){b.container.setAttribute(A.name,A.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=this.container.querySelector(".ql-selected");if(b!==y&&(y!=null&&y.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),A))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":o(Event))==="object"){var P=document.createEvent("Event");P.initEvent("change",!0,!0),this.select.dispatchEvent(P)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var A=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(A)}else this.selectItem(null);var y=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",y)}}]),g}();r.default=_},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(0),s=B(o),l=i(5),u=B(l),c=i(4),d=B(c),h=i(16),f=B(h),p=i(25),m=B(p),_=i(24),g=B(_),v=i(35),b=B(v),A=i(6),y=B(A),P=i(22),C=B(P),I=i(7),E=B(I),x=i(55),O=B(x),T=i(42),R=B(T),S=i(23),L=B(S);function B($){return $&&$.__esModule?$:{default:$}}u.default.register({"blots/block":d.default,"blots/block/embed":c.BlockEmbed,"blots/break":f.default,"blots/container":m.default,"blots/cursor":g.default,"blots/embed":b.default,"blots/inline":y.default,"blots/scroll":C.default,"blots/text":E.default,"modules/clipboard":O.default,"modules/history":R.default,"modules/keyboard":L.default}),s.default.register(d.default,f.default,g.default,y.default,C.default,E.default),r.default=u.default},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(1),s=function(){function l(u){this.domNode=u,this.domNode[o.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(u){if(this.tagName==null)throw new o.ParchmentError("Blot definition missing tagName");var c;return Array.isArray(this.tagName)?(typeof u=="string"&&(u=u.toUpperCase(),parseInt(u).toString()===u&&(u=parseInt(u))),typeof u=="number"?c=document.createElement(this.tagName[u-1]):this.tagName.indexOf(u)>-1?c=document.createElement(u):c=document.createElement(this.tagName[0])):c=document.createElement(this.tagName),this.className&&c.classList.add(this.className),c},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var u=this.domNode.cloneNode(!1);return o.create(u)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[o.DATA_KEY]},l.prototype.deleteAt=function(u,c){var d=this.isolate(u,c);d.remove()},l.prototype.formatAt=function(u,c,d,h){var f=this.isolate(u,c);if(o.query(d,o.Scope.BLOT)!=null&&h)f.wrap(d,h);else if(o.query(d,o.Scope.ATTRIBUTE)!=null){var p=o.create(this.statics.scope);f.wrap(p),p.format(d,h)}},l.prototype.insertAt=function(u,c,d){var h=d==null?o.create("text",c):o.create(c,d),f=this.split(u);this.parent.insertBefore(h,f)},l.prototype.insertInto=function(u,c){c===void 0&&(c=null),this.parent!=null&&this.parent.children.remove(this);var d=null;u.children.insertBefore(this,c),c!=null&&(d=c.domNode),(this.domNode.parentNode!=u.domNode||this.domNode.nextSibling!=d)&&u.domNode.insertBefore(this.domNode,d),this.parent=u,this.attach()},l.prototype.isolate=function(u,c){var d=this.split(u);return d.split(c),d},l.prototype.length=function(){return 1},l.prototype.offset=function(u){return u===void 0&&(u=this.parent),this.parent==null||this==u?0:this.parent.children.offset(this)+this.parent.offset(u)},l.prototype.optimize=function(u){this.domNode[o.DATA_KEY]!=null&&delete this.domNode[o.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(u){u.parent!=null&&(u.parent.insertBefore(this,u.next),u.remove())},l.prototype.replaceWith=function(u,c){var d=typeof u=="string"?o.create(u,c):u;return d.replace(this),d},l.prototype.split=function(u,c){return u===0?this:this.next},l.prototype.update=function(u,c){},l.prototype.wrap=function(u,c){var d=typeof u=="string"?o.create(u,c):u;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},l.blotName="abstract",l}();r.default=s},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(12),s=i(32),l=i(33),u=i(1),c=function(){function d(h){this.attributes={},this.domNode=h,this.build()}return d.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},d.prototype.build=function(){var h=this;this.attributes={};var f=o.default.keys(this.domNode),p=s.default.keys(this.domNode),m=l.default.keys(this.domNode);f.concat(p).concat(m).forEach(function(_){var g=u.query(_,u.Scope.ATTRIBUTE);g instanceof o.default&&(h.attributes[g.attrName]=g)})},d.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(p){var m=f.attributes[p].value(f.domNode);h.format(p,m)})},d.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(p){f.attributes[p].remove(f.domNode)}),this.attributes={}},d.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,p){return f[p]=h.attributes[p].value(h.domNode),f},{})},d}();r.default=c},function(e,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function l(c,d){var h=c.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(d+"-")===0})}var u=function(c){o(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},d.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},d.prototype.remove=function(h){var f=l(h,this.keyName);f.forEach(function(p){h.classList.remove(p)}),h.classList.length===0&&h.removeAttribute("class")},d.prototype.value=function(h){var f=l(h,this.keyName)[0]||"",p=f.slice(this.keyName.length+1);return this.canAdd(h,p)?p:""},d}(s.default);r.default=u},function(e,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(12);function l(c){var d=c.split("-"),h=d.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return d[0]+h}var u=function(c){o(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var p=f.split(":");return p[0].trim()})},d.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[l(this.keyName)]=f,!0):!1},d.prototype.remove=function(h){h.style[l(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},d.prototype.value=function(h){var f=h.style[l(this.keyName)];return this.canAdd(h,f)?f:""},d}(s.default);r.default=u},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function u(c,d){for(var h=0;h<d.length;h++){var f=d[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,d,h){return d&&u(c.prototype,d),h&&u(c,h),c}}();function s(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}var l=function(){function u(c,d){s(this,u),this.quill=c,this.options=d,this.modules={}}return o(u,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(h){d.modules[h]==null&&d.addModule(h)})}},{key:"addModule",value:function(d){var h=this.quill.constructor.import("modules/"+d);return this.modules[d]=new h(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),u}();l.DEFAULTS={modules:{}},l.themes={default:l},r.default=l},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function v(b,A){for(var y=0;y<A.length;y++){var P=A[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,A,y){return A&&v(b.prototype,A),y&&v(b,y),b}}(),s=function v(b,A,y){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,A);if(P===void 0){var C=Object.getPrototypeOf(b);return C===null?void 0:v(C,A,y)}else{if("value"in P)return P.value;var I=P.get;return I===void 0?void 0:I.call(y)}},l=i(0),u=h(l),c=i(7),d=h(c);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function p(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var _="\uFEFF",g=function(v){m(b,v);function b(A){f(this,b);var y=p(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,A));return y.contentNode=document.createElement("span"),y.contentNode.setAttribute("contenteditable",!1),[].slice.call(y.domNode.childNodes).forEach(function(P){y.contentNode.appendChild(P)}),y.leftGuard=document.createTextNode(_),y.rightGuard=document.createTextNode(_),y.domNode.appendChild(y.leftGuard),y.domNode.appendChild(y.contentNode),y.domNode.appendChild(y.rightGuard),y}return o(b,[{key:"index",value:function(y,P){return y===this.leftGuard?0:y===this.rightGuard?1:s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,y,P)}},{key:"restore",value:function(y){var P=void 0,C=void 0,I=y.data.split(_).join("");if(y===this.leftGuard)if(this.prev instanceof d.default){var E=this.prev.length();this.prev.insertAt(E,I),P={startNode:this.prev.domNode,startOffset:E+I.length}}else C=document.createTextNode(I),this.parent.insertBefore(u.default.create(C),this),P={startNode:C,startOffset:I.length};else y===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,I),P={startNode:this.next.domNode,startOffset:I.length}):(C=document.createTextNode(I),this.parent.insertBefore(u.default.create(C),this.next),P={startNode:C,startOffset:I.length}));return y.data=_,P}},{key:"update",value:function(y,P){var C=this;y.forEach(function(I){if(I.type==="characterData"&&(I.target===C.leftGuard||I.target===C.rightGuard)){var E=C.restore(I.target);E&&(P.range=E)}})}}]),b}(u.default.Embed);r.default=g},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.AlignStyle=r.AlignClass=r.AlignAttribute=void 0;var o=i(0),s=l(o);function l(f){return f&&f.__esModule?f:{default:f}}var u={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},c=new s.default.Attributor.Attribute("align","align",u),d=new s.default.Attributor.Class("align","ql-align",u),h=new s.default.Attributor.Style("align","text-align",u);r.AlignAttribute=c,r.AlignClass=d,r.AlignStyle=h},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.BackgroundStyle=r.BackgroundClass=void 0;var o=i(0),s=u(o),l=i(26);function u(h){return h&&h.__esModule?h:{default:h}}var c=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),d=new l.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});r.BackgroundClass=c,r.BackgroundStyle=d},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.DirectionStyle=r.DirectionClass=r.DirectionAttribute=void 0;var o=i(0),s=l(o);function l(f){return f&&f.__esModule?f:{default:f}}var u={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},c=new s.default.Attributor.Attribute("direction","dir",u),d=new s.default.Attributor.Class("direction","ql-direction",u),h=new s.default.Attributor.Style("direction","direction",u);r.DirectionAttribute=c,r.DirectionClass=d,r.DirectionStyle=h},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.FontClass=r.FontStyle=void 0;var o=function(){function v(b,A){for(var y=0;y<A.length;y++){var P=A[y];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(b,P.key,P)}}return function(b,A,y){return A&&v(b.prototype,A),y&&v(b,y),b}}(),s=function v(b,A,y){b===null&&(b=Function.prototype);var P=Object.getOwnPropertyDescriptor(b,A);if(P===void 0){var C=Object.getPrototypeOf(b);return C===null?void 0:v(C,A,y)}else{if("value"in P)return P.value;var I=P.get;return I===void 0?void 0:I.call(y)}},l=i(0),u=c(l);function c(v){return v&&v.__esModule?v:{default:v}}function d(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function h(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function f(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var p={scope:u.default.Scope.INLINE,whitelist:["serif","monospace"]},m=new u.default.Attributor.Class("font","ql-font",p),_=function(v){f(b,v);function b(){return d(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return o(b,[{key:"value",value:function(y){return s(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,y).replace(/["']/g,"")}}]),b}(u.default.Attributor.Style),g=new _("font","font-family",p);r.FontStyle=g,r.FontClass=m},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.SizeStyle=r.SizeClass=void 0;var o=i(0),s=l(o);function l(d){return d&&d.__esModule?d:{default:d}}var u=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),c=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});r.SizeClass=u,r.SizeStyle=c},function(e,r,i){e.exports={align:{"":i(76),center:i(77),right:i(78),justify:i(79)},background:i(80),blockquote:i(81),bold:i(82),clean:i(83),code:i(58),"code-block":i(58),color:i(84),direction:{"":i(85),rtl:i(86)},float:{center:i(87),full:i(88),left:i(89),right:i(90)},formula:i(91),header:{1:i(92),2:i(93)},italic:i(94),image:i(95),indent:{"+1":i(96),"-1":i(97)},link:i(98),list:{ordered:i(99),bullet:i(100),check:i(101)},script:{sub:i(102),super:i(103)},strike:i(104),underline:i(105),video:i(106)}},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.getLastChangeIndex=r.default=void 0;var o=function(){function A(y,P){for(var C=0;C<P.length;C++){var I=P[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(y,I.key,I)}}return function(y,P,C){return P&&A(y.prototype,P),C&&A(y,C),y}}(),s=i(0),l=f(s),u=i(5),c=f(u),d=i(9),h=f(d);function f(A){return A&&A.__esModule?A:{default:A}}function p(A,y){if(!(A instanceof y))throw new TypeError("Cannot call a class as a function")}function m(A,y){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:A}function _(A,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);A.prototype=Object.create(y&&y.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(A,y):A.__proto__=y)}var g=function(A){_(y,A);function y(P,C){p(this,y);var I=m(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,P,C));return I.lastRecorded=0,I.ignoreChange=!1,I.clear(),I.quill.on(c.default.events.EDITOR_CHANGE,function(E,x,O,T){E!==c.default.events.TEXT_CHANGE||I.ignoreChange||(!I.options.userOnly||T===c.default.sources.USER?I.record(x,O):I.transform(x))}),I.quill.keyboard.addBinding({key:"Z",shortKey:!0},I.undo.bind(I)),I.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},I.redo.bind(I)),/Win/i.test(navigator.platform)&&I.quill.keyboard.addBinding({key:"Y",shortKey:!0},I.redo.bind(I)),I}return o(y,[{key:"change",value:function(C,I){if(this.stack[C].length!==0){var E=this.stack[C].pop();this.stack[I].push(E),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(E[C],c.default.sources.USER),this.ignoreChange=!1;var x=b(E[C]);this.quill.setSelection(x)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(C,I){if(C.ops.length!==0){this.stack.redo=[];var E=this.quill.getContents().diff(I),x=Date.now();if(this.lastRecorded+this.options.delay>x&&this.stack.undo.length>0){var O=this.stack.undo.pop();E=E.compose(O.undo),C=O.redo.compose(C)}else this.lastRecorded=x;this.stack.undo.push({redo:C,undo:E}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(C){this.stack.undo.forEach(function(I){I.undo=C.transform(I.undo,!0),I.redo=C.transform(I.redo,!0)}),this.stack.redo.forEach(function(I){I.undo=C.transform(I.undo,!0),I.redo=C.transform(I.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),y}(h.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(A){var y=A.ops[A.ops.length-1];return y==null?!1:y.insert!=null?typeof y.insert=="string"&&y.insert.endsWith(`
`):y.attributes!=null?Object.keys(y.attributes).some(function(P){return l.default.query(P,l.default.Scope.BLOCK)!=null}):!1}function b(A){var y=A.reduce(function(C,I){return C+=I.delete||0,C},0),P=A.length()-y;return v(A)&&(P-=1),P}r.default=g,r.getLastChangeIndex=b},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BaseTooltip=void 0;var o=function(){function V(j,K){for(var H=0;H<K.length;H++){var M=K[H];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(j,M.key,M)}}return function(j,K,H){return K&&V(j.prototype,K),H&&V(j,H),j}}(),s=function V(j,K,H){j===null&&(j=Function.prototype);var M=Object.getOwnPropertyDescriptor(j,K);if(M===void 0){var q=Object.getPrototypeOf(j);return q===null?void 0:V(q,K,H)}else{if("value"in M)return M.value;var Q=M.get;return Q===void 0?void 0:Q.call(H)}},l=i(3),u=x(l),c=i(2),d=x(c),h=i(8),f=x(h),p=i(23),m=x(p),_=i(34),g=x(_),v=i(59),b=x(v),A=i(60),y=x(A),P=i(28),C=x(P),I=i(61),E=x(I);function x(V){return V&&V.__esModule?V:{default:V}}function O(V,j){if(!(V instanceof j))throw new TypeError("Cannot call a class as a function")}function T(V,j){if(!V)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:V}function R(V,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);V.prototype=Object.create(j&&j.prototype,{constructor:{value:V,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(V,j):V.__proto__=j)}var S=[!1,"center","right","justify"],L=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],B=[!1,"serif","monospace"],$=["1","2","3",!1],z=["small",!1,"large","huge"],Y=function(V){R(j,V);function j(K,H){O(this,j);var M=T(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,K,H)),q=function Q(W){if(!document.body.contains(K.root))return document.body.removeEventListener("click",Q);M.tooltip!=null&&!M.tooltip.root.contains(W.target)&&document.activeElement!==M.tooltip.textbox&&!M.quill.hasFocus()&&M.tooltip.hide(),M.pickers!=null&&M.pickers.forEach(function(J){J.container.contains(W.target)||J.close()})};return K.emitter.listenDOM("click",document.body,q),M}return o(j,[{key:"addModule",value:function(H){var M=s(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"addModule",this).call(this,H);return H==="toolbar"&&this.extendToolbar(M),M}},{key:"buildButtons",value:function(H,M){H.forEach(function(q){var Q=q.getAttribute("class")||"";Q.split(/\s+/).forEach(function(W){if(W.startsWith("ql-")&&(W=W.slice(3),M[W]!=null))if(W==="direction")q.innerHTML=M[W][""]+M[W].rtl;else if(typeof M[W]=="string")q.innerHTML=M[W];else{var J=q.value||"";J!=null&&M[W][J]&&(q.innerHTML=M[W][J])}})})}},{key:"buildPickers",value:function(H,M){var q=this;this.pickers=H.map(function(W){if(W.classList.contains("ql-align"))return W.querySelector("option")==null&&N(W,S),new y.default(W,M.align);if(W.classList.contains("ql-background")||W.classList.contains("ql-color")){var J=W.classList.contains("ql-background")?"background":"color";return W.querySelector("option")==null&&N(W,L,J==="background"?"#ffffff":"#000000"),new b.default(W,M[J])}else return W.querySelector("option")==null&&(W.classList.contains("ql-font")?N(W,B):W.classList.contains("ql-header")?N(W,$):W.classList.contains("ql-size")&&N(W,z)),new C.default(W)});var Q=function(){q.pickers.forEach(function(J){J.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,Q)}}]),j}(g.default);Y.DEFAULTS=(0,u.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var j=this,K=this.container.querySelector("input.ql-image[type=file]");K==null&&(K=document.createElement("input"),K.setAttribute("type","file"),K.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),K.classList.add("ql-image"),K.addEventListener("change",function(){if(K.files!=null&&K.files[0]!=null){var H=new FileReader;H.onload=function(M){var q=j.quill.getSelection(!0);j.quill.updateContents(new d.default().retain(q.index).delete(q.length).insert({image:M.target.result}),f.default.sources.USER),j.quill.setSelection(q.index+1,f.default.sources.SILENT),K.value=""},H.readAsDataURL(K.files[0])}}),this.container.appendChild(K)),K.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var U=function(V){R(j,V);function j(K,H){O(this,j);var M=T(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,K,H));return M.textbox=M.root.querySelector('input[type="text"]'),M.listen(),M}return o(j,[{key:"listen",value:function(){var H=this;this.textbox.addEventListener("keydown",function(M){m.default.match(M,"enter")?(H.save(),M.preventDefault()):m.default.match(M,"escape")&&(H.cancel(),M.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),M!=null?this.textbox.value=M:H!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+H)||""),this.root.setAttribute("data-mode",H)}},{key:"restoreFocus",value:function(){var H=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=H}},{key:"save",value:function(){var H=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var M=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",H,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",H,f.default.sources.USER)),this.quill.root.scrollTop=M;break}case"video":H=F(H);case"formula":{if(!H)break;var q=this.quill.getSelection(!0);if(q!=null){var Q=q.index+q.length;this.quill.insertEmbed(Q,this.root.getAttribute("data-mode"),H,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(Q+1," ",f.default.sources.USER),this.quill.setSelection(Q+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),j}(E.default);function F(V){var j=V.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||V.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return j?(j[1]||"https")+"://www.youtube.com/embed/"+j[2]+"?showinfo=0":(j=V.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(j[1]||"https")+"://player.vimeo.com/video/"+j[2]+"/":V}function N(V,j){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;j.forEach(function(H){var M=document.createElement("option");H===K?M.setAttribute("selected","selected"):M.setAttribute("value",H),V.appendChild(M)})}r.BaseTooltip=U,r.default=Y},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function s(){this.head=this.tail=null,this.length=0}return s.prototype.append=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},s.prototype.contains=function(l){for(var u,c=this.iterator();u=c();)if(u===l)return!0;return!1},s.prototype.insertBefore=function(l,u){l&&(l.next=u,u!=null?(l.prev=u.prev,u.prev!=null&&(u.prev.next=l),u.prev=l,u===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},s.prototype.offset=function(l){for(var u=0,c=this.head;c!=null;){if(c===l)return u;u+=c.length(),c=c.next}return-1},s.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},s.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var u=l;return l!=null&&(l=l.next),u}},s.prototype.find=function(l,u){u===void 0&&(u=!1);for(var c,d=this.iterator();c=d();){var h=c.length();if(l<h||u&&l===h&&(c.next==null||c.next.length()!==0))return[c,l];l-=h}return[null,0]},s.prototype.forEach=function(l){for(var u,c=this.iterator();u=c();)l(u)},s.prototype.forEachAt=function(l,u,c){if(!(u<=0))for(var d=this.find(l),h=d[0],f=d[1],p,m=l-f,_=this.iterator(h);(p=_())&&m<l+u;){var g=p.length();l>m?c(p,l-m,Math.min(u,m+g-l)):c(p,0,Math.min(g,l+u-m)),m+=g}},s.prototype.map=function(l){return this.reduce(function(u,c){return u.push(l(c)),u},[])},s.prototype.reduce=function(l,u){for(var c,d=this.iterator();c=d();)u=l(u,c);return u},s}();r.default=o},function(e,r,i){var o=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){h(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(17),l=i(1),u={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},c=100,d=function(h){o(f,h);function f(p){var m=h.call(this,p)||this;return m.scroll=m,m.observer=new MutationObserver(function(_){m.update(_)}),m.observer.observe(m.domNode,u),m.attach(),m}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(p,m){this.update(),p===0&&m===this.length()?this.children.forEach(function(_){_.remove()}):h.prototype.deleteAt.call(this,p,m)},f.prototype.formatAt=function(p,m,_,g){this.update(),h.prototype.formatAt.call(this,p,m,_,g)},f.prototype.insertAt=function(p,m,_){this.update(),h.prototype.insertAt.call(this,p,m,_)},f.prototype.optimize=function(p,m){var _=this;p===void 0&&(p=[]),m===void 0&&(m={}),h.prototype.optimize.call(this,m);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)p.push(g.pop());for(var v=function(P,C){C===void 0&&(C=!0),!(P==null||P===_)&&P.domNode.parentNode!=null&&(P.domNode[l.DATA_KEY].mutations==null&&(P.domNode[l.DATA_KEY].mutations=[]),C&&v(P.parent))},b=function(P){P.domNode[l.DATA_KEY]==null||P.domNode[l.DATA_KEY].mutations==null||(P instanceof s.default&&P.children.forEach(b),P.optimize(m))},A=p,y=0;A.length>0;y+=1){if(y>=c)throw new Error("[Parchment] Maximum optimize iterations reached");for(A.forEach(function(P){var C=l.find(P.target,!0);C!=null&&(C.domNode===P.target&&(P.type==="childList"?(v(l.find(P.previousSibling,!1)),[].forEach.call(P.addedNodes,function(I){var E=l.find(I,!1);v(E,!1),E instanceof s.default&&E.children.forEach(function(x){v(x,!1)})})):P.type==="attributes"&&v(C.prev)),v(C))}),this.children.forEach(b),A=[].slice.call(this.observer.takeRecords()),g=A.slice();g.length>0;)p.push(g.pop())}},f.prototype.update=function(p,m){var _=this;m===void 0&&(m={}),p=p||this.observer.takeRecords(),p.map(function(g){var v=l.find(g.target,!0);return v==null?null:v.domNode[l.DATA_KEY].mutations==null?(v.domNode[l.DATA_KEY].mutations=[g],v):(v.domNode[l.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===_||g.domNode[l.DATA_KEY]==null||g.update(g.domNode[l.DATA_KEY].mutations||[],m)}),this.domNode[l.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,m),this.optimize(p,m)},f.blotName="scroll",f.defaultChild="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="DIV",f}(s.default);r.default=d},function(e,r,i){var o=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var p in f)f.hasOwnProperty(p)&&(h[p]=f[p])};return function(h,f){d(h,f);function p(){this.constructor=h}h.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),l=i(1);function u(d,h){if(Object.keys(d).length!==Object.keys(h).length)return!1;for(var f in d)if(d[f]!==h[f])return!1;return!0}var c=function(d){o(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return d.formats.call(this,f)},h.prototype.format=function(f,p){var m=this;f===this.statics.blotName&&!p?(this.children.forEach(function(_){_ instanceof s.default||(_=_.wrap(h.blotName,!0)),m.attributes.copy(_)}),this.unwrap()):d.prototype.format.call(this,f,p)},h.prototype.formatAt=function(f,p,m,_){if(this.formats()[m]!=null||l.query(m,l.Scope.ATTRIBUTE)){var g=this.isolate(f,p);g.format(m,_)}else d.prototype.formatAt.call(this,f,p,m,_)},h.prototype.optimize=function(f){d.prototype.optimize.call(this,f);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var m=this.next;m instanceof h&&m.prev===this&&u(p,m.formats())&&(m.moveChildren(this),m.remove())},h.blotName="inline",h.scope=l.Scope.INLINE_BLOT,h.tagName="SPAN",h}(s.default);r.default=c},function(e,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(18),l=i(1),u=function(c){o(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(h){var f=l.query(d.blotName).tagName;if(h.tagName!==f)return c.formats.call(this,h)},d.prototype.format=function(h,f){l.query(h,l.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(d.blotName):c.prototype.format.call(this,h,f))},d.prototype.formatAt=function(h,f,p,m){l.query(p,l.Scope.BLOCK)!=null?this.format(p,m):c.prototype.formatAt.call(this,h,f,p,m)},d.prototype.insertAt=function(h,f,p){if(p==null||l.query(f,l.Scope.INLINE)!=null)c.prototype.insertAt.call(this,h,f,p);else{var m=this.split(h),_=l.create(f,p);m.parent.insertBefore(_,m)}},d.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():c.prototype.update.call(this,h,f)},d.blotName="block",d.scope=l.Scope.BLOCK_BLOT,d.tagName="P",d}(s.default);r.default=u},function(e,r,i){var o=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var h in d)d.hasOwnProperty(h)&&(c[h]=d[h])};return function(c,d){u(c,d);function h(){this.constructor=c}c.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),l=function(u){o(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.formats=function(d){},c.prototype.format=function(d,h){u.prototype.formatAt.call(this,0,this.length(),d,h)},c.prototype.formatAt=function(d,h,f,p){d===0&&h===this.length()?this.format(f,p):u.prototype.formatAt.call(this,d,h,f,p)},c.prototype.formats=function(){return this.statics.formats(this.domNode)},c}(s.default);r.default=l},function(e,r,i){var o=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var f in h)h.hasOwnProperty(f)&&(d[f]=h[f])};return function(d,h){c(d,h);function f(){this.constructor=d}d.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(r,"__esModule",{value:!0});var s=i(19),l=i(1),u=function(c){o(d,c);function d(h){var f=c.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return d.create=function(h){return document.createTextNode(h)},d.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},d.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},d.prototype.index=function(h,f){return this.domNode===h?f:-1},d.prototype.insertAt=function(h,f,p){p==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):c.prototype.insertAt.call(this,h,f,p)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(h){c.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(h,f){return[this.domNode,h]},d.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var p=l.create(this.domNode.splitText(h));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},d.prototype.update=function(h,f){var p=this;h.some(function(m){return m.type==="characterData"&&m.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=l.Scope.INLINE_BLOT,d}(s.default);r.default=u},function(e,r,i){var o=document.createElement("div");if(o.classList.toggle("test-class",!1),o.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,u){return arguments.length>1&&!this.contains(l)==!u?u:s.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,u){return u=u||0,this.substr(u,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,u){var c=this.toString();(typeof u!="number"||!isFinite(u)||Math.floor(u)!==u||u>c.length)&&(u=c.length),u-=l.length;var d=c.indexOf(l,u);return d!==-1&&d===u}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("predicate must be a function");for(var c=Object(this),d=c.length>>>0,h=arguments[1],f,p=0;p<d;p++)if(f=c[p],u.call(h,f,p,c))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,r){var i=-1,o=1,s=0;function l(y,P,C){if(y==P)return y?[[s,y]]:[];(C<0||y.length<C)&&(C=null);var I=h(y,P),E=y.substring(0,I);y=y.substring(I),P=P.substring(I),I=f(y,P);var x=y.substring(y.length-I);y=y.substring(0,y.length-I),P=P.substring(0,P.length-I);var O=u(y,P);return E&&O.unshift([s,E]),x&&O.push([s,x]),m(O),C!=null&&(O=v(O,C)),O=b(O),O}function u(y,P){var C;if(!y)return[[o,P]];if(!P)return[[i,y]];var I=y.length>P.length?y:P,E=y.length>P.length?P:y,x=I.indexOf(E);if(x!=-1)return C=[[o,I.substring(0,x)],[s,E],[o,I.substring(x+E.length)]],y.length>P.length&&(C[0][0]=C[2][0]=i),C;if(E.length==1)return[[i,y],[o,P]];var O=p(y,P);if(O){var T=O[0],R=O[1],S=O[2],L=O[3],B=O[4],$=l(T,S),z=l(R,L);return $.concat([[s,B]],z)}return c(y,P)}function c(y,P){for(var C=y.length,I=P.length,E=Math.ceil((C+I)/2),x=E,O=2*E,T=new Array(O),R=new Array(O),S=0;S<O;S++)T[S]=-1,R[S]=-1;T[x+1]=0,R[x+1]=0;for(var L=C-I,B=L%2!=0,$=0,z=0,Y=0,U=0,F=0;F<E;F++){for(var N=-F+$;N<=F-z;N+=2){var V=x+N,j;N==-F||N!=F&&T[V-1]<T[V+1]?j=T[V+1]:j=T[V-1]+1;for(var K=j-N;j<C&&K<I&&y.charAt(j)==P.charAt(K);)j++,K++;if(T[V]=j,j>C)z+=2;else if(K>I)$+=2;else if(B){var H=x+L-N;if(H>=0&&H<O&&R[H]!=-1){var M=C-R[H];if(j>=M)return d(y,P,j,K)}}}for(var q=-F+Y;q<=F-U;q+=2){var H=x+q,M;q==-F||q!=F&&R[H-1]<R[H+1]?M=R[H+1]:M=R[H-1]+1;for(var Q=M-q;M<C&&Q<I&&y.charAt(C-M-1)==P.charAt(I-Q-1);)M++,Q++;if(R[H]=M,M>C)U+=2;else if(Q>I)Y+=2;else if(!B){var V=x+L-q;if(V>=0&&V<O&&T[V]!=-1){var j=T[V],K=x+j-V;if(M=C-M,j>=M)return d(y,P,j,K)}}}}return[[i,y],[o,P]]}function d(y,P,C,I){var E=y.substring(0,C),x=P.substring(0,I),O=y.substring(C),T=P.substring(I),R=l(E,x),S=l(O,T);return R.concat(S)}function h(y,P){if(!y||!P||y.charAt(0)!=P.charAt(0))return 0;for(var C=0,I=Math.min(y.length,P.length),E=I,x=0;C<E;)y.substring(x,E)==P.substring(x,E)?(C=E,x=C):I=E,E=Math.floor((I-C)/2+C);return E}function f(y,P){if(!y||!P||y.charAt(y.length-1)!=P.charAt(P.length-1))return 0;for(var C=0,I=Math.min(y.length,P.length),E=I,x=0;C<E;)y.substring(y.length-E,y.length-x)==P.substring(P.length-E,P.length-x)?(C=E,x=C):I=E,E=Math.floor((I-C)/2+C);return E}function p(y,P){var C=y.length>P.length?y:P,I=y.length>P.length?P:y;if(C.length<4||I.length*2<C.length)return null;function E(z,Y,U){for(var F=z.substring(U,U+Math.floor(z.length/4)),N=-1,V="",j,K,H,M;(N=Y.indexOf(F,N+1))!=-1;){var q=h(z.substring(U),Y.substring(N)),Q=f(z.substring(0,U),Y.substring(0,N));V.length<Q+q&&(V=Y.substring(N-Q,N)+Y.substring(N,N+q),j=z.substring(0,U-Q),K=z.substring(U+q),H=Y.substring(0,N-Q),M=Y.substring(N+q))}return V.length*2>=z.length?[j,K,H,M,V]:null}var x=E(C,I,Math.ceil(C.length/4)),O=E(C,I,Math.ceil(C.length/2)),T;if(!x&&!O)return null;O?x?T=x[4].length>O[4].length?x:O:T=O:T=x;var R,S,L,B;y.length>P.length?(R=T[0],S=T[1],L=T[2],B=T[3]):(L=T[0],B=T[1],R=T[2],S=T[3]);var $=T[4];return[R,S,L,B,$]}function m(y){y.push([s,""]);for(var P=0,C=0,I=0,E="",x="",O;P<y.length;)switch(y[P][0]){case o:I++,x+=y[P][1],P++;break;case i:C++,E+=y[P][1],P++;break;case s:C+I>1?(C!==0&&I!==0&&(O=h(x,E),O!==0&&(P-C-I>0&&y[P-C-I-1][0]==s?y[P-C-I-1][1]+=x.substring(0,O):(y.splice(0,0,[s,x.substring(0,O)]),P++),x=x.substring(O),E=E.substring(O)),O=f(x,E),O!==0&&(y[P][1]=x.substring(x.length-O)+y[P][1],x=x.substring(0,x.length-O),E=E.substring(0,E.length-O))),C===0?y.splice(P-I,C+I,[o,x]):I===0?y.splice(P-C,C+I,[i,E]):y.splice(P-C-I,C+I,[i,E],[o,x]),P=P-C-I+(C?1:0)+(I?1:0)+1):P!==0&&y[P-1][0]==s?(y[P-1][1]+=y[P][1],y.splice(P,1)):P++,I=0,C=0,E="",x="";break}y[y.length-1][1]===""&&y.pop();var T=!1;for(P=1;P<y.length-1;)y[P-1][0]==s&&y[P+1][0]==s&&(y[P][1].substring(y[P][1].length-y[P-1][1].length)==y[P-1][1]?(y[P][1]=y[P-1][1]+y[P][1].substring(0,y[P][1].length-y[P-1][1].length),y[P+1][1]=y[P-1][1]+y[P+1][1],y.splice(P-1,1),T=!0):y[P][1].substring(0,y[P+1][1].length)==y[P+1][1]&&(y[P-1][1]+=y[P+1][1],y[P][1]=y[P][1].substring(y[P+1][1].length)+y[P+1][1],y.splice(P+1,1),T=!0)),P++;T&&m(y)}var _=l;_.INSERT=o,_.DELETE=i,_.EQUAL=s,e.exports=_;function g(y,P){if(P===0)return[s,y];for(var C=0,I=0;I<y.length;I++){var E=y[I];if(E[0]===i||E[0]===s){var x=C+E[1].length;if(P===x)return[I+1,y];if(P<x){y=y.slice();var O=P-C,T=[E[0],E[1].slice(0,O)],R=[E[0],E[1].slice(O)];return y.splice(I,1,T,R),[I+1,y]}else C=x}}throw new Error("cursor_pos is out of bounds!")}function v(y,P){var C=g(y,P),I=C[1],E=C[0],x=I[E],O=I[E+1];if(x==null)return y;if(x[0]!==s)return y;if(O!=null&&x[1]+O[1]===O[1]+x[1])return I.splice(E,2,O,x),A(I,E,2);if(O!=null&&O[1].indexOf(x[1])===0){I.splice(E,2,[O[0],x[1]],[0,x[1]]);var T=O[1].slice(x[1].length);return T.length>0&&I.splice(E+2,0,[O[0],T]),A(I,E,3)}else return y}function b(y){for(var P=!1,C=function(O){return O.charCodeAt(0)>=56320&&O.charCodeAt(0)<=57343},I=function(O){return O.charCodeAt(O.length-1)>=55296&&O.charCodeAt(O.length-1)<=56319},E=2;E<y.length;E+=1)y[E-2][0]===s&&I(y[E-2][1])&&y[E-1][0]===i&&C(y[E-1][1])&&y[E][0]===o&&C(y[E][1])&&(P=!0,y[E-1][1]=y[E-2][1].slice(-1)+y[E-1][1],y[E][1]=y[E-2][1].slice(-1)+y[E][1],y[E-2][1]=y[E-2][1].slice(0,-1));if(!P)return y;for(var x=[],E=0;E<y.length;E+=1)y[E][1].length>0&&x.push(y[E]);return x}function A(y,P,C){for(var I=P+C-1;I>=0&&I>=P-1;I--)if(I+1<y.length){var E=y[I],x=y[I+1];E[0]===x[1]&&y.splice(I,2,[E[0],E[1]+x[1]])}return y}},function(e,r){r=e.exports=typeof Object.keys=="function"?Object.keys:i,r.shim=i;function i(o){var s=[];for(var l in o)s.push(l);return s}},function(e,r){var i=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";r=e.exports=i?o:s,r.supported=o;function o(l){return Object.prototype.toString.call(l)=="[object Arguments]"}r.unsupported=s;function s(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(e,r){var i=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function l(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function u(){this._events=new s,this._eventsCount=0}u.prototype.eventNames=function(){var d=[],h,f;if(this._eventsCount===0)return d;for(f in h=this._events)i.call(h,f)&&d.push(o?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},u.prototype.listeners=function(d,h){var f=o?o+d:d,p=this._events[f];if(h)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var m=0,_=p.length,g=new Array(_);m<_;m++)g[m]=p[m].fn;return g},u.prototype.emit=function(d,h,f,p,m,_){var g=o?o+d:d;if(!this._events[g])return!1;var v=this._events[g],b=arguments.length,A,y;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,h),!0;case 3:return v.fn.call(v.context,h,f),!0;case 4:return v.fn.call(v.context,h,f,p),!0;case 5:return v.fn.call(v.context,h,f,p,m),!0;case 6:return v.fn.call(v.context,h,f,p,m,_),!0}for(y=1,A=new Array(b-1);y<b;y++)A[y-1]=arguments[y];v.fn.apply(v.context,A)}else{var P=v.length,C;for(y=0;y<P;y++)switch(v[y].once&&this.removeListener(d,v[y].fn,void 0,!0),b){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,h);break;case 3:v[y].fn.call(v[y].context,h,f);break;case 4:v[y].fn.call(v[y].context,h,f,p);break;default:if(!A)for(C=1,A=new Array(b-1);C<b;C++)A[C-1]=arguments[C];v[y].fn.apply(v[y].context,A)}}return!0},u.prototype.on=function(d,h,f){var p=new l(h,f||this),m=o?o+d:d;return this._events[m]?this._events[m].fn?this._events[m]=[this._events[m],p]:this._events[m].push(p):(this._events[m]=p,this._eventsCount++),this},u.prototype.once=function(d,h,f){var p=new l(h,f||this,!0),m=o?o+d:d;return this._events[m]?this._events[m].fn?this._events[m]=[this._events[m],p]:this._events[m].push(p):(this._events[m]=p,this._eventsCount++),this},u.prototype.removeListener=function(d,h,f,p){var m=o?o+d:d;if(!this._events[m])return this;if(!h)return--this._eventsCount===0?this._events=new s:delete this._events[m],this;var _=this._events[m];if(_.fn)_.fn===h&&(!p||_.once)&&(!f||_.context===f)&&(--this._eventsCount===0?this._events=new s:delete this._events[m]);else{for(var g=0,v=[],b=_.length;g<b;g++)(_[g].fn!==h||p&&!_[g].once||f&&_[g].context!==f)&&v.push(_[g]);v.length?this._events[m]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new s:delete this._events[m]}return this},u.prototype.removeAllListeners=function(d){var h;return d?(h=o?o+d:d,this._events[h]&&(--this._eventsCount===0?this._events=new s:delete this._events[h])):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prototype.setMaxListeners=function(){return this},u.prefixed=o,u.EventEmitter=u,typeof e<"u"&&(e.exports=u)},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.matchText=r.matchSpacing=r.matchNewline=r.matchBlot=r.matchAttributor=r.default=void 0;var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Z){return typeof Z}:function(Z){return Z&&typeof Symbol=="function"&&Z.constructor===Symbol&&Z!==Symbol.prototype?"symbol":typeof Z},s=function(){function Z(tt,at){var lt=[],et=!0,wt=!1,_t=void 0;try{for(var Tt=tt[Symbol.iterator](),mt;!(et=(mt=Tt.next()).done)&&(lt.push(mt.value),!(at&&lt.length===at));et=!0);}catch(Rt){wt=!0,_t=Rt}finally{try{!et&&Tt.return&&Tt.return()}finally{if(wt)throw _t}}return lt}return function(tt,at){if(Array.isArray(tt))return tt;if(Symbol.iterator in Object(tt))return Z(tt,at);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function Z(tt,at){for(var lt=0;lt<at.length;lt++){var et=at[lt];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(tt,et.key,et)}}return function(tt,at,lt){return at&&Z(tt.prototype,at),lt&&Z(tt,lt),tt}}(),u=i(3),c=R(u),d=i(2),h=R(d),f=i(0),p=R(f),m=i(5),_=R(m),g=i(10),v=R(g),b=i(9),A=R(b),y=i(36),P=i(37),C=i(13),I=R(C),E=i(26),x=i(38),O=i(39),T=i(40);function R(Z){return Z&&Z.__esModule?Z:{default:Z}}function S(Z,tt,at){return tt in Z?Object.defineProperty(Z,tt,{value:at,enumerable:!0,configurable:!0,writable:!0}):Z[tt]=at,Z}function L(Z,tt){if(!(Z instanceof tt))throw new TypeError("Cannot call a class as a function")}function B(Z,tt){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tt&&(typeof tt=="object"||typeof tt=="function")?tt:Z}function $(Z,tt){if(typeof tt!="function"&&tt!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof tt);Z.prototype=Object.create(tt&&tt.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),tt&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,tt):Z.__proto__=tt)}var z=(0,v.default)("quill:clipboard"),Y="__ql-matcher",U=[[Node.TEXT_NODE,kt],[Node.TEXT_NODE,yt],["br",ot],[Node.ELEMENT_NODE,yt],[Node.ELEMENT_NODE,J],[Node.ELEMENT_NODE,ht],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,Bt],["li",pt],["b",Q.bind(Q,"bold")],["i",Q.bind(Q,"italic")],["style",ut]],F=[y.AlignAttribute,x.DirectionAttribute].reduce(function(Z,tt){return Z[tt.keyName]=tt,Z},{}),N=[y.AlignStyle,P.BackgroundStyle,E.ColorStyle,x.DirectionStyle,O.FontStyle,T.SizeStyle].reduce(function(Z,tt){return Z[tt.keyName]=tt,Z},{}),V=function(Z){$(tt,Z);function tt(at,lt){L(this,tt);var et=B(this,(tt.__proto__||Object.getPrototypeOf(tt)).call(this,at,lt));return et.quill.root.addEventListener("paste",et.onPaste.bind(et)),et.container=et.quill.addContainer("ql-clipboard"),et.container.setAttribute("contenteditable",!0),et.container.setAttribute("tabindex",-1),et.matchers=[],U.concat(et.options.matchers).forEach(function(wt){var _t=s(wt,2),Tt=_t[0],mt=_t[1];!lt.matchVisual&&mt===ht||et.addMatcher(Tt,mt)}),et}return l(tt,[{key:"addMatcher",value:function(lt,et){this.matchers.push([lt,et])}},{key:"convert",value:function(lt){if(typeof lt=="string")return this.container.innerHTML=lt.replace(/\>\r?\n +\</g,"><"),this.convert();var et=this.quill.getFormat(this.quill.selection.savedRange.index);if(et[I.default.blotName]){var wt=this.container.innerText;return this.container.innerHTML="",new h.default().insert(wt,S({},I.default.blotName,et[I.default.blotName]))}var _t=this.prepareMatching(),Tt=s(_t,2),mt=Tt[0],Rt=Tt[1],At=q(this.container,mt,Rt);return H(At,`
`)&&At.ops[At.ops.length-1].attributes==null&&(At=At.compose(new h.default().retain(At.length()-1).delete(1))),z.log("convert",this.container.innerHTML,At),this.container.innerHTML="",At}},{key:"dangerouslyPasteHTML",value:function(lt,et){var wt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_.default.sources.API;if(typeof lt=="string")this.quill.setContents(this.convert(lt),et),this.quill.setSelection(0,_.default.sources.SILENT);else{var _t=this.convert(et);this.quill.updateContents(new h.default().retain(lt).concat(_t),wt),this.quill.setSelection(lt+_t.length(),_.default.sources.SILENT)}}},{key:"onPaste",value:function(lt){var et=this;if(!(lt.defaultPrevented||!this.quill.isEnabled())){var wt=this.quill.getSelection(),_t=new h.default().retain(wt.index),Tt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(_.default.sources.SILENT),setTimeout(function(){_t=_t.concat(et.convert()).delete(wt.length),et.quill.updateContents(_t,_.default.sources.USER),et.quill.setSelection(_t.length()-wt.length,_.default.sources.SILENT),et.quill.scrollingContainer.scrollTop=Tt,et.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var lt=this,et=[],wt=[];return this.matchers.forEach(function(_t){var Tt=s(_t,2),mt=Tt[0],Rt=Tt[1];switch(mt){case Node.TEXT_NODE:wt.push(Rt);break;case Node.ELEMENT_NODE:et.push(Rt);break;default:[].forEach.call(lt.container.querySelectorAll(mt),function(At){At[Y]=At[Y]||[],At[Y].push(Rt)});break}}),[et,wt]}}]),tt}(A.default);V.DEFAULTS={matchers:[],matchVisual:!0};function j(Z,tt,at){return(typeof tt>"u"?"undefined":o(tt))==="object"?Object.keys(tt).reduce(function(lt,et){return j(lt,et,tt[et])},Z):Z.reduce(function(lt,et){return et.attributes&&et.attributes[tt]?lt.push(et):lt.insert(et.insert,(0,c.default)({},S({},tt,at),et.attributes))},new h.default)}function K(Z){if(Z.nodeType!==Node.ELEMENT_NODE)return{};var tt="__ql-computed-style";return Z[tt]||(Z[tt]=window.getComputedStyle(Z))}function H(Z,tt){for(var at="",lt=Z.ops.length-1;lt>=0&&at.length<tt.length;--lt){var et=Z.ops[lt];if(typeof et.insert!="string")break;at=et.insert+at}return at.slice(-1*tt.length)===tt}function M(Z){if(Z.childNodes.length===0)return!1;var tt=K(Z);return["block","list-item"].indexOf(tt.display)>-1}function q(Z,tt,at){return Z.nodeType===Z.TEXT_NODE?at.reduce(function(lt,et){return et(Z,lt)},new h.default):Z.nodeType===Z.ELEMENT_NODE?[].reduce.call(Z.childNodes||[],function(lt,et){var wt=q(et,tt,at);return et.nodeType===Z.ELEMENT_NODE&&(wt=tt.reduce(function(_t,Tt){return Tt(et,_t)},wt),wt=(et[Y]||[]).reduce(function(_t,Tt){return Tt(et,_t)},wt)),lt.concat(wt)},new h.default):new h.default}function Q(Z,tt,at){return j(at,Z,!0)}function W(Z,tt){var at=p.default.Attributor.Attribute.keys(Z),lt=p.default.Attributor.Class.keys(Z),et=p.default.Attributor.Style.keys(Z),wt={};return at.concat(lt).concat(et).forEach(function(_t){var Tt=p.default.query(_t,p.default.Scope.ATTRIBUTE);Tt!=null&&(wt[Tt.attrName]=Tt.value(Z),wt[Tt.attrName])||(Tt=F[_t],Tt!=null&&(Tt.attrName===_t||Tt.keyName===_t)&&(wt[Tt.attrName]=Tt.value(Z)||void 0),Tt=N[_t],Tt!=null&&(Tt.attrName===_t||Tt.keyName===_t)&&(Tt=N[_t],wt[Tt.attrName]=Tt.value(Z)||void 0))}),Object.keys(wt).length>0&&(tt=j(tt,wt)),tt}function J(Z,tt){var at=p.default.query(Z);if(at==null)return tt;if(at.prototype instanceof p.default.Embed){var lt={},et=at.value(Z);et!=null&&(lt[at.blotName]=et,tt=new h.default().insert(lt,at.formats(Z)))}else typeof at.formats=="function"&&(tt=j(tt,at.blotName,at.formats(Z)));return tt}function ot(Z,tt){return H(tt,`
`)||tt.insert(`
`),tt}function ut(){return new h.default}function pt(Z,tt){var at=p.default.query(Z);if(at==null||at.blotName!=="list-item"||!H(tt,`
`))return tt;for(var lt=-1,et=Z.parentNode;!et.classList.contains("ql-clipboard");)(p.default.query(et)||{}).blotName==="list"&&(lt+=1),et=et.parentNode;return lt<=0?tt:tt.compose(new h.default().retain(tt.length()-1).retain(1,{indent:lt}))}function yt(Z,tt){return H(tt,`
`)||(M(Z)||tt.length()>0&&Z.nextSibling&&M(Z.nextSibling))&&tt.insert(`
`),tt}function ht(Z,tt){if(M(Z)&&Z.nextElementSibling!=null&&!H(tt,`

`)){var at=Z.offsetHeight+parseFloat(K(Z).marginTop)+parseFloat(K(Z).marginBottom);Z.nextElementSibling.offsetTop>Z.offsetTop+at*1.5&&tt.insert(`
`)}return tt}function Bt(Z,tt){var at={},lt=Z.style||{};return lt.fontStyle&&K(Z).fontStyle==="italic"&&(at.italic=!0),lt.fontWeight&&(K(Z).fontWeight.startsWith("bold")||parseInt(K(Z).fontWeight)>=700)&&(at.bold=!0),Object.keys(at).length>0&&(tt=j(tt,at)),parseFloat(lt.textIndent||0)>0&&(tt=new h.default().insert("	").concat(tt)),tt}function kt(Z,tt){var at=Z.data;if(Z.parentNode.tagName==="O:P")return tt.insert(at.trim());if(at.trim().length===0&&Z.parentNode.classList.contains("ql-clipboard"))return tt;if(!K(Z.parentNode).whiteSpace.startsWith("pre")){var lt=function(wt,_t){return _t=_t.replace(/[^\u00a0]/g,""),_t.length<1&&wt?" ":_t};at=at.replace(/\r\n/g," ").replace(/\n/g," "),at=at.replace(/\s\s+/g,lt.bind(lt,!0)),(Z.previousSibling==null&&M(Z.parentNode)||Z.previousSibling!=null&&M(Z.previousSibling))&&(at=at.replace(/^\s+/,lt.bind(lt,!1))),(Z.nextSibling==null&&M(Z.parentNode)||Z.nextSibling!=null&&M(Z.nextSibling))&&(at=at.replace(/\s+$/,lt.bind(lt,!1)))}return tt.insert(at)}r.default=V,r.matchAttributor=W,r.matchBlot=J,r.matchNewline=yt,r.matchSpacing=ht,r.matchText=kt},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(_,g){for(var v=0;v<g.length;v++){var b=g[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}return function(_,g,v){return g&&m(_.prototype,g),v&&m(_,v),_}}(),s=function m(_,g,v){_===null&&(_=Function.prototype);var b=Object.getOwnPropertyDescriptor(_,g);if(b===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:m(A,g,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=i(6),u=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function h(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:m}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}var p=function(m){f(_,m);function _(){return d(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,[{key:"optimize",value:function(v){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return s(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),_}(u.default);p.blotName="bold",p.tagName=["STRONG","B"],r.default=p},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.addControls=r.default=void 0;var o=function(){function T(R,S){var L=[],B=!0,$=!1,z=void 0;try{for(var Y=R[Symbol.iterator](),U;!(B=(U=Y.next()).done)&&(L.push(U.value),!(S&&L.length===S));B=!0);}catch(F){$=!0,z=F}finally{try{!B&&Y.return&&Y.return()}finally{if($)throw z}}return L}return function(R,S){if(Array.isArray(R))return R;if(Symbol.iterator in Object(R))return T(R,S);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function T(R,S){for(var L=0;L<S.length;L++){var B=S[L];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(R,B.key,B)}}return function(R,S,L){return S&&T(R.prototype,S),L&&T(R,L),R}}(),l=i(2),u=v(l),c=i(0),d=v(c),h=i(5),f=v(h),p=i(10),m=v(p),_=i(9),g=v(_);function v(T){return T&&T.__esModule?T:{default:T}}function b(T,R,S){return R in T?Object.defineProperty(T,R,{value:S,enumerable:!0,configurable:!0,writable:!0}):T[R]=S,T}function A(T,R){if(!(T instanceof R))throw new TypeError("Cannot call a class as a function")}function y(T,R){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:T}function P(T,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);T.prototype=Object.create(R&&R.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(T,R):T.__proto__=R)}var C=(0,m.default)("quill:toolbar"),I=function(T){P(R,T);function R(S,L){A(this,R);var B=y(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,S,L));if(Array.isArray(B.options.container)){var $=document.createElement("div");x($,B.options.container),S.container.parentNode.insertBefore($,S.container),B.container=$}else typeof B.options.container=="string"?B.container=document.querySelector(B.options.container):B.container=B.options.container;if(!(B.container instanceof HTMLElement)){var z;return z=C.error("Container required for toolbar",B.options),y(B,z)}return B.container.classList.add("ql-toolbar"),B.controls=[],B.handlers={},Object.keys(B.options.handlers).forEach(function(Y){B.addHandler(Y,B.options.handlers[Y])}),[].forEach.call(B.container.querySelectorAll("button, select"),function(Y){B.attach(Y)}),B.quill.on(f.default.events.EDITOR_CHANGE,function(Y,U){Y===f.default.events.SELECTION_CHANGE&&B.update(U)}),B.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var Y=B.quill.selection.getRange(),U=o(Y,1),F=U[0];B.update(F)}),B}return s(R,[{key:"addHandler",value:function(L,B){this.handlers[L]=B}},{key:"attach",value:function(L){var B=this,$=[].find.call(L.classList,function(Y){return Y.indexOf("ql-")===0});if($){if($=$.slice(3),L.tagName==="BUTTON"&&L.setAttribute("type","button"),this.handlers[$]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[$]==null){C.warn("ignoring attaching to disabled format",$,L);return}if(d.default.query($)==null){C.warn("ignoring attaching to nonexistent format",$,L);return}}var z=L.tagName==="SELECT"?"change":"click";L.addEventListener(z,function(Y){var U=void 0;if(L.tagName==="SELECT"){if(L.selectedIndex<0)return;var F=L.options[L.selectedIndex];F.hasAttribute("selected")?U=!1:U=F.value||!1}else L.classList.contains("ql-active")?U=!1:U=L.value||!L.hasAttribute("value"),Y.preventDefault();B.quill.focus();var N=B.quill.selection.getRange(),V=o(N,1),j=V[0];if(B.handlers[$]!=null)B.handlers[$].call(B,U);else if(d.default.query($).prototype instanceof d.default.Embed){if(U=prompt("Enter "+$),!U)return;B.quill.updateContents(new u.default().retain(j.index).delete(j.length).insert(b({},$,U)),f.default.sources.USER)}else B.quill.format($,U,f.default.sources.USER);B.update(j)}),this.controls.push([$,L])}}},{key:"update",value:function(L){var B=L==null?{}:this.quill.getFormat(L);this.controls.forEach(function($){var z=o($,2),Y=z[0],U=z[1];if(U.tagName==="SELECT"){var F=void 0;if(L==null)F=null;else if(B[Y]==null)F=U.querySelector("option[selected]");else if(!Array.isArray(B[Y])){var N=B[Y];typeof N=="string"&&(N=N.replace(/\"/g,'\\"')),F=U.querySelector('option[value="'+N+'"]')}F==null?(U.value="",U.selectedIndex=-1):F.selected=!0}else if(L==null)U.classList.remove("ql-active");else if(U.hasAttribute("value")){var V=B[Y]===U.getAttribute("value")||B[Y]!=null&&B[Y].toString()===U.getAttribute("value")||B[Y]==null&&!U.getAttribute("value");U.classList.toggle("ql-active",V)}else U.classList.toggle("ql-active",B[Y]!=null)})}}]),R}(g.default);I.DEFAULTS={};function E(T,R,S){var L=document.createElement("button");L.setAttribute("type","button"),L.classList.add("ql-"+R),S!=null&&(L.value=S),T.appendChild(L)}function x(T,R){Array.isArray(R[0])||(R=[R]),R.forEach(function(S){var L=document.createElement("span");L.classList.add("ql-formats"),S.forEach(function(B){if(typeof B=="string")E(L,B);else{var $=Object.keys(B)[0],z=B[$];Array.isArray(z)?O(L,$,z):E(L,$,z)}}),T.appendChild(L)})}function O(T,R,S){var L=document.createElement("select");L.classList.add("ql-"+R),S.forEach(function(B){var $=document.createElement("option");B!==!1?$.setAttribute("value",B):$.setAttribute("selected","selected"),L.appendChild($)}),T.appendChild(L)}I.DEFAULTS={container:null,handlers:{clean:function(){var R=this,S=this.quill.getSelection();if(S!=null)if(S.length==0){var L=this.quill.getFormat();Object.keys(L).forEach(function(B){d.default.query(B,d.default.Scope.INLINE)!=null&&R.quill.format(B,!1)})}else this.quill.removeFormat(S,f.default.sources.USER)},direction:function(R){var S=this.quill.getFormat().align;R==="rtl"&&S==null?this.quill.format("align","right",f.default.sources.USER):!R&&S==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",R,f.default.sources.USER)},indent:function(R){var S=this.quill.getSelection(),L=this.quill.getFormat(S),B=parseInt(L.indent||0);if(R==="+1"||R==="-1"){var $=R==="+1"?1:-1;L.direction==="rtl"&&($*=-1),this.quill.format("indent",B+$,f.default.sources.USER)}},link:function(R){R===!0&&(R=prompt("Enter link URL:")),this.quill.format("link",R,f.default.sources.USER)},list:function(R){var S=this.quill.getSelection(),L=this.quill.getFormat(S);R==="check"?L.list==="checked"||L.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",R,f.default.sources.USER)}}},r.default=I,r.addControls=x},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(_,g){for(var v=0;v<g.length;v++){var b=g[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}return function(_,g,v){return g&&m(_.prototype,g),v&&m(_,v),_}}(),s=function m(_,g,v){_===null&&(_=Function.prototype);var b=Object.getOwnPropertyDescriptor(_,g);if(b===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:m(A,g,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=i(28),u=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function h(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:m}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}var p=function(m){f(_,m);function _(g,v){d(this,_);var b=h(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,g));return b.label.innerHTML=v,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(A){A.classList.add("ql-primary")}),b}return o(_,[{key:"buildItem",value:function(v){var b=s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"buildItem",this).call(this,v);return b.style.backgroundColor=v.getAttribute("value")||"",b}},{key:"selectItem",value:function(v,b){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,v,b);var A=this.label.querySelector(".ql-color-label"),y=v&&v.getAttribute("data-value")||"";A&&(A.tagName==="line"?A.style.stroke=y:A.style.fill=y)}}]),_}(u.default);r.default=p},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(_,g){for(var v=0;v<g.length;v++){var b=g[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}return function(_,g,v){return g&&m(_.prototype,g),v&&m(_,v),_}}(),s=function m(_,g,v){_===null&&(_=Function.prototype);var b=Object.getOwnPropertyDescriptor(_,g);if(b===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:m(A,g,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=i(28),u=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function h(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:m}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}var p=function(m){f(_,m);function _(g,v){d(this,_);var b=h(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,g));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(A){A.innerHTML=v[A.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return o(_,[{key:"selectItem",value:function(v,b){s(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"selectItem",this).call(this,v,b),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),_}(u.default);r.default=p},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function u(c,d){for(var h=0;h<d.length;h++){var f=d[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(c,f.key,f)}}return function(c,d,h){return d&&u(c.prototype,d),h&&u(c,h),c}}();function s(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}var l=function(){function u(c,d){var h=this;s(this,u),this.quill=c,this.boundsContainer=d||document.body,this.root=c.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return o(u,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var h=d.left+d.width/2-this.root.offsetWidth/2,f=d.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),m=this.root.getBoundingClientRect(),_=0;if(m.right>p.right&&(_=p.right-m.right,this.root.style.left=h+_+"px"),m.left<p.left&&(_=p.left-m.left,this.root.style.left=h+_+"px"),m.bottom>p.bottom){var g=m.bottom-m.top,v=d.bottom-d.top+g;this.root.style.top=f-v+"px",this.root.classList.add("ql-flip")}return _}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),u}();r.default=l},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function O(T,R){var S=[],L=!0,B=!1,$=void 0;try{for(var z=T[Symbol.iterator](),Y;!(L=(Y=z.next()).done)&&(S.push(Y.value),!(R&&S.length===R));L=!0);}catch(U){B=!0,$=U}finally{try{!L&&z.return&&z.return()}finally{if(B)throw $}}return S}return function(T,R){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return O(T,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function O(T,R,S){T===null&&(T=Function.prototype);var L=Object.getOwnPropertyDescriptor(T,R);if(L===void 0){var B=Object.getPrototypeOf(T);return B===null?void 0:O(B,R,S)}else{if("value"in L)return L.value;var $=L.get;return $===void 0?void 0:$.call(S)}},l=function(){function O(T,R){for(var S=0;S<R.length;S++){var L=R[S];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(T,L.key,L)}}return function(T,R,S){return R&&O(T.prototype,R),S&&O(T,S),T}}(),u=i(3),c=A(u),d=i(8),h=A(d),f=i(43),p=A(f),m=i(27),_=A(m),g=i(15),v=i(41),b=A(v);function A(O){return O&&O.__esModule?O:{default:O}}function y(O,T){if(!(O instanceof T))throw new TypeError("Cannot call a class as a function")}function P(O,T){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:O}function C(O,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);O.prototype=Object.create(T&&T.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(O,T):O.__proto__=T)}var I=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],E=function(O){C(T,O);function T(R,S){y(this,T),S.modules.toolbar!=null&&S.modules.toolbar.container==null&&(S.modules.toolbar.container=I);var L=P(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,R,S));return L.quill.container.classList.add("ql-snow"),L}return l(T,[{key:"extendToolbar",value:function(S){S.container.classList.add("ql-snow"),this.buildButtons([].slice.call(S.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(S.container.querySelectorAll("select")),b.default),this.tooltip=new x(this.quill,this.options.bounds),S.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(L,B){S.handlers.link.call(S,!B.format.link)})}}]),T}(p.default);E.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){if(T){var R=this.quill.getSelection();if(R==null||R.length==0)return;var S=this.quill.getText(R);/^\S+@\S+\.\S+$/.test(S)&&S.indexOf("mailto:")!==0&&(S="mailto:"+S);var L=this.quill.theme.tooltip;L.edit("link",S)}else this.quill.format("link",!1)}}}}});var x=function(O){C(T,O);function T(R,S){y(this,T);var L=P(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,R,S));return L.preview=L.root.querySelector("a.ql-preview"),L}return l(T,[{key:"listen",value:function(){var S=this;s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(L){S.root.classList.contains("ql-editing")?S.save():S.edit("link",S.preview.textContent),L.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(L){if(S.linkRange!=null){var B=S.linkRange;S.restoreFocus(),S.quill.formatText(B,"link",!1,h.default.sources.USER),delete S.linkRange}L.preventDefault(),S.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(L,B,$){if(L!=null){if(L.length===0&&$===h.default.sources.USER){var z=S.quill.scroll.descendant(_.default,L.index),Y=o(z,2),U=Y[0],F=Y[1];if(U!=null){S.linkRange=new g.Range(L.index-F,U.length());var N=_.default.formats(U.domNode);S.preview.textContent=N,S.preview.setAttribute("href",N),S.show(),S.position(S.quill.getBounds(S.linkRange));return}}else delete S.linkRange;S.hide()}})}},{key:"show",value:function(){s(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),T}(f.BaseTooltip);x.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),r.default=E},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(29),s=et(o),l=i(36),u=i(38),c=i(64),d=i(65),h=et(d),f=i(66),p=et(f),m=i(67),_=et(m),g=i(37),v=i(26),b=i(39),A=i(40),y=i(56),P=et(y),C=i(68),I=et(C),E=i(27),x=et(E),O=i(69),T=et(O),R=i(70),S=et(R),L=i(71),B=et(L),$=i(72),z=et($),Y=i(73),U=et(Y),F=i(13),N=et(F),V=i(74),j=et(V),K=i(75),H=et(K),M=i(57),q=et(M),Q=i(41),W=et(Q),J=i(28),ot=et(J),ut=i(59),pt=et(ut),yt=i(60),ht=et(yt),Bt=i(61),kt=et(Bt),Z=i(108),tt=et(Z),at=i(62),lt=et(at);function et(wt){return wt&&wt.__esModule?wt:{default:wt}}s.default.register({"attributors/attribute/direction":u.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":u.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":A.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":u.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":A.SizeStyle},!0),s.default.register({"formats/align":l.AlignClass,"formats/direction":u.DirectionClass,"formats/indent":c.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":b.FontClass,"formats/size":A.SizeClass,"formats/blockquote":h.default,"formats/code-block":N.default,"formats/header":p.default,"formats/list":_.default,"formats/bold":P.default,"formats/code":F.Code,"formats/italic":I.default,"formats/link":x.default,"formats/script":T.default,"formats/strike":S.default,"formats/underline":B.default,"formats/image":z.default,"formats/video":U.default,"formats/list/item":m.ListItem,"modules/formula":j.default,"modules/syntax":H.default,"modules/toolbar":q.default,"themes/bubble":tt.default,"themes/snow":lt.default,"ui/icons":W.default,"ui/picker":ot.default,"ui/icon-picker":ht.default,"ui/color-picker":pt.default,"ui/tooltip":kt.default},!0),r.default=s.default},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.IndentClass=void 0;var o=function(){function _(g,v){for(var b=0;b<v.length;b++){var A=v[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(g,A.key,A)}}return function(g,v,b){return v&&_(g.prototype,v),b&&_(g,b),g}}(),s=function _(g,v,b){g===null&&(g=Function.prototype);var A=Object.getOwnPropertyDescriptor(g,v);if(A===void 0){var y=Object.getPrototypeOf(g);return y===null?void 0:_(y,v,b)}else{if("value"in A)return A.value;var P=A.get;return P===void 0?void 0:P.call(b)}},l=i(0),u=c(l);function c(_){return _&&_.__esModule?_:{default:_}}function d(_,g){if(!(_ instanceof g))throw new TypeError("Cannot call a class as a function")}function h(_,g){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:_}function f(_,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);_.prototype=Object.create(g&&g.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(_,g):_.__proto__=g)}var p=function(_){f(g,_);function g(){return d(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return o(g,[{key:"add",value:function(b,A){if(A==="+1"||A==="-1"){var y=this.value(b)||0;A=A==="+1"?y+1:y-1}return A===0?(this.remove(b),!0):s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,b,A)}},{key:"canAdd",value:function(b,A){return s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,b,A)||s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,b,parseInt(A))}},{key:"value",value:function(b){return parseInt(s(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,b))||void 0}}]),g}(u.default.Attributor.Class),m=new p("indent","ql-indent",{scope:u.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});r.IndentClass=m},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(4),s=l(o);function l(f){return f&&f.__esModule?f:{default:f}}function u(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=function(f){d(p,f);function p(){return u(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);h.blotName="blockquote",h.tagName="blockquote",r.default=h},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function p(m,_){for(var g=0;g<_.length;g++){var v=_[g];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,_,g){return _&&p(m.prototype,_),g&&p(m,g),m}}(),s=i(4),l=u(s);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function h(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=function(p){h(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return o(m,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),m}(l.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],r.default=f},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.ListItem=void 0;var o=function(){function y(P,C){for(var I=0;I<C.length;I++){var E=C[I];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(P,E.key,E)}}return function(P,C,I){return C&&y(P.prototype,C),I&&y(P,I),P}}(),s=function y(P,C,I){P===null&&(P=Function.prototype);var E=Object.getOwnPropertyDescriptor(P,C);if(E===void 0){var x=Object.getPrototypeOf(P);return x===null?void 0:y(x,C,I)}else{if("value"in E)return E.value;var O=E.get;return O===void 0?void 0:O.call(I)}},l=i(0),u=p(l),c=i(4),d=p(c),h=i(25),f=p(h);function p(y){return y&&y.__esModule?y:{default:y}}function m(y,P,C){return P in y?Object.defineProperty(y,P,{value:C,enumerable:!0,configurable:!0,writable:!0}):y[P]=C,y}function _(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")}function g(y,P){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:y}function v(y,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);y.prototype=Object.create(P&&P.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(y,P):y.__proto__=P)}var b=function(y){v(P,y);function P(){return _(this,P),g(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}return o(P,[{key:"format",value:function(I,E){I===A.blotName&&!E?this.replaceWith(u.default.create(this.statics.scope)):s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"format",this).call(this,I,E)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(I,E){return this.parent.isolate(this.offset(this.parent),this.length()),I===this.parent.statics.blotName?(this.parent.replaceWith(I,E),this):(this.parent.unwrap(),s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replaceWith",this).call(this,I,E))}}],[{key:"formats",value:function(I){return I.tagName===this.tagName?void 0:s(P.__proto__||Object.getPrototypeOf(P),"formats",this).call(this,I)}}]),P}(d.default);b.blotName="list-item",b.tagName="LI";var A=function(y){v(P,y),o(P,null,[{key:"create",value:function(I){var E=I==="ordered"?"OL":"UL",x=s(P.__proto__||Object.getPrototypeOf(P),"create",this).call(this,E);return(I==="checked"||I==="unchecked")&&x.setAttribute("data-checked",I==="checked"),x}},{key:"formats",value:function(I){if(I.tagName==="OL")return"ordered";if(I.tagName==="UL")return I.hasAttribute("data-checked")?I.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function P(C){_(this,P);var I=g(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,C)),E=function(O){if(O.target.parentNode===C){var T=I.statics.formats(C),R=u.default.find(O.target);T==="checked"?R.format("list","unchecked"):T==="unchecked"&&R.format("list","checked")}};return C.addEventListener("touchstart",E),C.addEventListener("mousedown",E),I}return o(P,[{key:"format",value:function(I,E){this.children.length>0&&this.children.tail.format(I,E)}},{key:"formats",value:function(){return m({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(I,E){if(I instanceof b)s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"insertBefore",this).call(this,I,E);else{var x=E==null?this.length():E.offset(this),O=this.split(x);O.parent.insertBefore(I,O)}}},{key:"optimize",value:function(I){s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"optimize",this).call(this,I);var E=this.next;E!=null&&E.prev===this&&E.statics.blotName===this.statics.blotName&&E.domNode.tagName===this.domNode.tagName&&E.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(E.moveChildren(this),E.remove())}},{key:"replace",value:function(I){if(I.statics.blotName!==this.statics.blotName){var E=u.default.create(this.statics.defaultChild);I.moveChildren(E),this.appendChild(E)}s(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"replace",this).call(this,I)}}]),P}(f.default);A.blotName="list",A.scope=u.default.Scope.BLOCK_BLOT,A.tagName=["OL","UL"],A.defaultChild="list-item",A.allowedChildren=[b],r.ListItem=b,r.default=A},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(56),s=l(o);function l(f){return f&&f.__esModule?f:{default:f}}function u(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=function(f){d(p,f);function p(){return u(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);h.blotName="italic",h.tagName=["EM","I"],r.default=h},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function m(_,g){for(var v=0;v<g.length;v++){var b=g[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(_,b.key,b)}}return function(_,g,v){return g&&m(_.prototype,g),v&&m(_,v),_}}(),s=function m(_,g,v){_===null&&(_=Function.prototype);var b=Object.getOwnPropertyDescriptor(_,g);if(b===void 0){var A=Object.getPrototypeOf(_);return A===null?void 0:m(A,g,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=i(6),u=c(l);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}function h(m,_){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:m}function f(m,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);m.prototype=Object.create(_&&_.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(m,_):m.__proto__=_)}var p=function(m){f(_,m);function _(){return d(this,_),h(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return o(_,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):s(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),_}(u.default);p.blotName="script",p.tagName=["SUB","SUP"],r.default=p},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=l(o);function l(f){return f&&f.__esModule?f:{default:f}}function u(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=function(f){d(p,f);function p(){return u(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);h.blotName="strike",h.tagName="S",r.default=h},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=i(6),s=l(o);function l(f){return f&&f.__esModule?f:{default:f}}function u(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function c(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function d(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var h=function(f){d(p,f);function p(){return u(this,p),c(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p}(s.default);h.blotName="underline",h.tagName="U",r.default=h},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(v,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,A){return b&&g(v.prototype,b),A&&g(v,A),v}}(),s=function g(v,b,A){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,b);if(y===void 0){var P=Object.getPrototypeOf(v);return P===null?void 0:g(P,b,A)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(A)}},l=i(0),u=d(l),c=i(27);function d(g){return g&&g.__esModule?g:{default:g}}function h(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function p(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var m=["alt","height","width"],_=function(g){p(v,g);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"format",value:function(A,y){m.indexOf(A)>-1?y?this.domNode.setAttribute(A,y):this.domNode.removeAttribute(A):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,A,y)}}],[{key:"create",value:function(A){var y=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,A);return typeof A=="string"&&y.setAttribute("src",this.sanitize(A)),y}},{key:"formats",value:function(A){return m.reduce(function(y,P){return A.hasAttribute(P)&&(y[P]=A.getAttribute(P)),y},{})}},{key:"match",value:function(A){return/\.(jpe?g|gif|png)$/.test(A)||/^data:image\/.+;base64/.test(A)}},{key:"sanitize",value:function(A){return(0,c.sanitize)(A,["http","https","data"])?A:"//:0"}},{key:"value",value:function(A){return A.getAttribute("src")}}]),v}(u.default.Embed);_.blotName="image",_.tagName="IMG",r.default=_},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function g(v,b){for(var A=0;A<b.length;A++){var y=b[A];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,A){return b&&g(v.prototype,b),A&&g(v,A),v}}(),s=function g(v,b,A){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,b);if(y===void 0){var P=Object.getPrototypeOf(v);return P===null?void 0:g(P,b,A)}else{if("value"in y)return y.value;var C=y.get;return C===void 0?void 0:C.call(A)}},l=i(4),u=i(27),c=d(u);function d(g){return g&&g.__esModule?g:{default:g}}function h(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}function f(g,v){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:g}function p(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);g.prototype=Object.create(v&&v.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(g,v):g.__proto__=v)}var m=["height","width"],_=function(g){p(v,g);function v(){return h(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return o(v,[{key:"format",value:function(A,y){m.indexOf(A)>-1?y?this.domNode.setAttribute(A,y):this.domNode.removeAttribute(A):s(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,A,y)}}],[{key:"create",value:function(A){var y=s(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,A);return y.setAttribute("frameborder","0"),y.setAttribute("allowfullscreen",!0),y.setAttribute("src",this.sanitize(A)),y}},{key:"formats",value:function(A){return m.reduce(function(y,P){return A.hasAttribute(P)&&(y[P]=A.getAttribute(P)),y},{})}},{key:"sanitize",value:function(A){return c.default.sanitize(A)}},{key:"value",value:function(A){return A.getAttribute("src")}}]),v}(l.BlockEmbed);_.blotName="video",_.className="ql-video",_.tagName="IFRAME",r.default=_},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.FormulaBlot=void 0;var o=function(){function A(y,P){for(var C=0;C<P.length;C++){var I=P[C];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(y,I.key,I)}}return function(y,P,C){return P&&A(y.prototype,P),C&&A(y,C),y}}(),s=function A(y,P,C){y===null&&(y=Function.prototype);var I=Object.getOwnPropertyDescriptor(y,P);if(I===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:A(E,P,C)}else{if("value"in I)return I.value;var x=I.get;return x===void 0?void 0:x.call(C)}},l=i(35),u=p(l),c=i(5),d=p(c),h=i(9),f=p(h);function p(A){return A&&A.__esModule?A:{default:A}}function m(A,y){if(!(A instanceof y))throw new TypeError("Cannot call a class as a function")}function _(A,y){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:A}function g(A,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);A.prototype=Object.create(y&&y.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(A,y):A.__proto__=y)}var v=function(A){g(y,A);function y(){return m(this,y),_(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return o(y,null,[{key:"create",value:function(C){var I=s(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,C);return typeof C=="string"&&(window.katex.render(C,I,{throwOnError:!1,errorColor:"#f00"}),I.setAttribute("data-value",C)),I}},{key:"value",value:function(C){return C.getAttribute("data-value")}}]),y}(u.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var b=function(A){g(y,A),o(y,null,[{key:"register",value:function(){d.default.register(v,!0)}}]);function y(){m(this,y);var P=_(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return P}return y}(f.default);r.FormulaBlot=v,r.default=b},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.CodeToken=r.CodeBlock=void 0;var o=function(){function C(I,E){for(var x=0;x<E.length;x++){var O=E[x];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(I,O.key,O)}}return function(I,E,x){return E&&C(I.prototype,E),x&&C(I,x),I}}(),s=function C(I,E,x){I===null&&(I=Function.prototype);var O=Object.getOwnPropertyDescriptor(I,E);if(O===void 0){var T=Object.getPrototypeOf(I);return T===null?void 0:C(T,E,x)}else{if("value"in O)return O.value;var R=O.get;return R===void 0?void 0:R.call(x)}},l=i(0),u=_(l),c=i(5),d=_(c),h=i(9),f=_(h),p=i(13),m=_(p);function _(C){return C&&C.__esModule?C:{default:C}}function g(C,I){if(!(C instanceof I))throw new TypeError("Cannot call a class as a function")}function v(C,I){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:C}function b(C,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);C.prototype=Object.create(I&&I.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(C,I):C.__proto__=I)}var A=function(C){b(I,C);function I(){return g(this,I),v(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"replaceWith",value:function(x){this.domNode.textContent=this.domNode.textContent,this.attach(),s(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replaceWith",this).call(this,x)}},{key:"highlight",value:function(x){var O=this.domNode.textContent;this.cachedText!==O&&((O.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=x(O),this.domNode.normalize(),this.attach()),this.cachedText=O)}}]),I}(m.default);A.className="ql-syntax";var y=new u.default.Attributor.Class("token","hljs",{scope:u.default.Scope.INLINE}),P=function(C){b(I,C),o(I,null,[{key:"register",value:function(){d.default.register(y,!0),d.default.register(A,!0)}}]);function I(E,x){g(this,I);var O=v(this,(I.__proto__||Object.getPrototypeOf(I)).call(this,E,x));if(typeof O.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var T=null;return O.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(T),T=setTimeout(function(){O.highlight(),T=null},O.options.interval)}),O.highlight(),O}return o(I,[{key:"highlight",value:function(){var x=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var O=this.quill.getSelection();this.quill.scroll.descendants(A).forEach(function(T){T.highlight(x.options.highlight)}),this.quill.update(d.default.sources.SILENT),O!=null&&this.quill.setSelection(O,d.default.sources.SILENT)}}}]),I}(f.default);P.DEFAULTS={highlight:function(){return window.hljs==null?null:function(C){var I=window.hljs.highlightAuto(C);return I.value}}(),interval:1e3},r.CodeBlock=A,r.CodeToken=y,r.default=P},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,r){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,r){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,r){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,r){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,r){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,r,i){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.BubbleTooltip=void 0;var o=function I(E,x,O){E===null&&(E=Function.prototype);var T=Object.getOwnPropertyDescriptor(E,x);if(T===void 0){var R=Object.getPrototypeOf(E);return R===null?void 0:I(R,x,O)}else{if("value"in T)return T.value;var S=T.get;return S===void 0?void 0:S.call(O)}},s=function(){function I(E,x){for(var O=0;O<x.length;O++){var T=x[O];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(E,T.key,T)}}return function(E,x,O){return x&&I(E.prototype,x),O&&I(E,O),E}}(),l=i(3),u=g(l),c=i(8),d=g(c),h=i(43),f=g(h),p=i(15),m=i(41),_=g(m);function g(I){return I&&I.__esModule?I:{default:I}}function v(I,E){if(!(I instanceof E))throw new TypeError("Cannot call a class as a function")}function b(I,E){if(!I)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:I}function A(I,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);I.prototype=Object.create(E&&E.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(I,E):I.__proto__=E)}var y=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],P=function(I){A(E,I);function E(x,O){v(this,E),O.modules.toolbar!=null&&O.modules.toolbar.container==null&&(O.modules.toolbar.container=y);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,x,O));return T.quill.container.classList.add("ql-bubble"),T}return s(E,[{key:"extendToolbar",value:function(O){this.tooltip=new C(this.quill,this.options.bounds),this.tooltip.root.appendChild(O.container),this.buildButtons([].slice.call(O.container.querySelectorAll("button")),_.default),this.buildPickers([].slice.call(O.container.querySelectorAll("select")),_.default)}}]),E}(f.default);P.DEFAULTS=(0,u.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){E?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var C=function(I){A(E,I);function E(x,O){v(this,E);var T=b(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,x,O));return T.quill.on(d.default.events.EDITOR_CHANGE,function(R,S,L,B){if(R===d.default.events.SELECTION_CHANGE)if(S!=null&&S.length>0&&B===d.default.sources.USER){T.show(),T.root.style.left="0px",T.root.style.width="",T.root.style.width=T.root.offsetWidth+"px";var $=T.quill.getLines(S.index,S.length);if($.length===1)T.position(T.quill.getBounds(S));else{var z=$[$.length-1],Y=T.quill.getIndex(z),U=Math.min(z.length()-1,S.index+S.length-Y),F=T.quill.getBounds(new p.Range(Y,U));T.position(F)}}else document.activeElement!==T.textbox&&T.quill.hasFocus()&&T.hide()}),T}return s(E,[{key:"listen",value:function(){var O=this;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){O.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!O.root.classList.contains("ql-hidden")){var T=O.quill.getSelection();T!=null&&O.position(O.quill.getBounds(T))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(O){var T=o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"position",this).call(this,O),R=this.root.querySelector(".ql-tooltip-arrow");if(R.style.marginLeft="",T===0)return T;R.style.marginLeft=-1*T-R.offsetWidth/2+"px"}}]),E}(h.BaseTooltip);C.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),r.BubbleTooltip=C,r.default=P},function(e,r,i){e.exports=i(63)}]).default})})(ah);var xO=ah.exports,kO=ae&&ae.__extends||function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(t,e)};return function(t,e){n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ai=ae&&ae.__assign||function(){return Ai=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ai.apply(this,arguments)},CO=ae&&ae.__spreadArrays||function(){for(var n=0,t=0,e=arguments.length;t<e;t++)n+=arguments[t].length;for(var r=Array(n),i=0,t=0;t<e;t++)for(var o=arguments[t],s=0,l=o.length;s<l;s++,i++)r[i]=o[s];return r},Gi=ae&&ae.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},me=Gi(rt),NO=Gi(Gh),sr=Gi(PO),Ou=Gi(xO),DO=function(n){kO(t,n);function t(e){var r=n.call(this,e)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(o,s,l,u){var c,d,h,f;o==="text-change"?(d=(c=r).onEditorChangeText)===null||d===void 0||d.call(c,r.editor.root.innerHTML,s,u,r.unprivilegedEditor):o==="selection-change"&&((f=(h=r).onEditorChangeSelection)===null||f===void 0||f.call(h,s,u,r.unprivilegedEditor))};var i=r.isControlled()?e.value:e.defaultValue;return r.value=i??"",r}return t.prototype.validateProps=function(e){var r;if(me.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(me.default.Children.count(e.children)){var i=me.default.Children.only(e.children);if(((r=i)===null||r===void 0?void 0:r.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,r){var i=this,o;if(this.validateProps(e),!this.editor||this.state.generation!==r.generation)return!0;if("value"in e){var s=this.getEditorContents(),l=(o=e.value,o??"");this.isEqualValue(l,s)||this.setEditorContents(this.editor,l)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),CO(this.cleanProps,this.dirtyProps).some(function(u){return!sr.default(e[u],i.props[u])})},t.prototype.shouldComponentRegenerate=function(e){var r=this;return this.dirtyProps.some(function(i){return!sr.default(e[i],r.props[i])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,r){var i=this;if(this.editor&&this.shouldComponentRegenerate(e)){var o=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:o,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==r.generation){var l=this.regenerationSnapshot,o=l.delta,u=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var c=this.editor;c.setContents(o),Iu(function(){return i.setEditorSelection(c,u)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,r){var i=new Ou.default(e,r);return r.tabIndex!=null&&this.setEditorTabIndex(i,r.tabIndex),this.hookEditor(i),i},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,r){return this.isDelta(e)&&this.isDelta(r)?sr.default(e.ops,r.ops):sr.default(e,r)},t.prototype.setEditorContents=function(e,r){var i=this;this.value=r;var o=this.getEditorSelection();typeof r=="string"?e.setContents(e.clipboard.convert(r)):e.setContents(r),Iu(function(){return i.setEditorSelection(e,o)})},t.prototype.setEditorSelection=function(e,r){if(this.selection=r,r){var i=e.getLength();r.index=Math.max(0,Math.min(r.index,i-1)),r.length=Math.max(0,Math.min(r.length,i-1-r.index)),e.setSelection(r)}},t.prototype.setEditorTabIndex=function(e,r){var i,o;!((o=(i=e)===null||i===void 0?void 0:i.scroll)===null||o===void 0)&&o.domNode&&(e.scroll.domNode.tabIndex=r)},t.prototype.setEditorReadOnly=function(e,r){r?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var r=e;return{getHTML:function(){return r.root.innerHTML},getLength:r.getLength.bind(r),getText:r.getText.bind(r),getContents:r.getContents.bind(r),getSelection:r.getSelection.bind(r),getBounds:r.getBounds.bind(r)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=NO.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(e.nodeType===3)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,r=this.props,i=r.children,o=r.preserveWhitespace,s=this.state.generation,l={key:s,ref:function(u){e.editingArea=u}};return me.default.Children.count(i)?me.default.cloneElement(me.default.Children.only(i),l):o?me.default.createElement("pre",Ai({},l)):me.default.createElement("div",Ai({},l))},t.prototype.render=function(){var e;return me.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,e??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,r,i,o){var s,l;if(this.editor){var u=this.isDelta(this.value)?o.getContents():o.getHTML();u!==this.getEditorContents()&&(this.lastDeltaChangeSet=r,this.value=u,(l=(s=this.props).onChange)===null||l===void 0||l.call(s,e,r,i,o))}},t.prototype.onEditorChangeSelection=function(e,r,i){var o,s,l,u,c,d;if(this.editor){var h=this.getEditorSelection(),f=!h&&e,p=h&&!e;sr.default(e,h)||(this.selection=e,(s=(o=this.props).onChangeSelection)===null||s===void 0||s.call(o,e,r,i),f?(u=(l=this.props).onFocus)===null||u===void 0||u.call(l,e,r,i):p&&((d=(c=this.props).onBlur)===null||d===void 0||d.call(c,h,r,i)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=Ou.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(me.default.Component);function Iu(n){Promise.resolve().then(n)}var Ys=DO;const LO=xu(Ys);var lh={exports:{}};(function(n,t){(function(e,r){n.exports=r()})(ae,function(){return function(e){function r(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}var i={};return r.m=e,r.c=i,r.i=function(o){return o},r.d=function(o,s,l){r.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:l})},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=38)}([function(e,r){function i(o){var s=typeof o;return o!=null&&(s=="object"||s=="function")}e.exports=i},function(e,r,i){var o=i(22),s=typeof self=="object"&&self&&self.Object===Object&&self,l=o||s||Function("return this")();e.exports=l},function(e,r){function i(o){return o!=null&&typeof o=="object"}e.exports=i},function(e,r,i){function o(h){var f=-1,p=h==null?0:h.length;for(this.clear();++f<p;){var m=h[f];this.set(m[0],m[1])}}var s=i(75),l=i(76),u=i(77),c=i(78),d=i(79);o.prototype.clear=s,o.prototype.delete=l,o.prototype.get=u,o.prototype.has=c,o.prototype.set=d,e.exports=o},function(e,r,i){function o(l,u){for(var c=l.length;c--;)if(s(l[c][0],u))return c;return-1}var s=i(8);e.exports=o},function(e,r,i){function o(f){return f==null?f===void 0?d:c:h&&h in Object(f)?l(f):u(f)}var s=i(16),l=i(64),u=i(87),c="[object Null]",d="[object Undefined]",h=s?s.toStringTag:void 0;e.exports=o},function(e,r,i){function o(l,u){var c=l.__data__;return s(u)?c[typeof u=="string"?"string":"hash"]:c.map}var s=i(73);e.exports=o},function(e,r,i){var o=i(11),s=o(Object,"create");e.exports=s},function(e,r){function i(o,s){return o===s||o!==o&&s!==s}e.exports=i},function(e,r,i){function o(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}i.d(r,"a",function(){return s});var s=function l(u){o(this,l),this.onCreate=function(){},this.onDestroy=function(){},this.onUpdate=function(){},this.overlay=u.overlay,this.img=u.img,this.options=u.options,this.requestUpdate=u.onUpdate}},function(e,r,i){function o(l,u,c){u=="__proto__"&&s?s(l,u,{configurable:!0,enumerable:!0,value:c,writable:!0}):l[u]=c}var s=i(21);e.exports=o},function(e,r,i){function o(u,c){var d=l(u,c);return s(d)?d:void 0}var s=i(48),l=i(65);e.exports=o},function(e,r,i){function o(u){return u!=null&&l(u.length)&&!s(u)}var s=i(13),l=i(30);e.exports=o},function(e,r,i){function o(f){if(!l(f))return!1;var p=s(f);return p==c||p==d||p==u||p==h}var s=i(5),l=i(0),u="[object AsyncFunction]",c="[object Function]",d="[object GeneratorFunction]",h="[object Proxy]";e.exports=o},function(e,r){e.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(e,r,i){var o=i(11),s=i(1),l=o(s,"Map");e.exports=l},function(e,r,i){var o=i(1),s=o.Symbol;e.exports=s},function(e,r){function i(o,s,l){switch(l.length){case 0:return o.call(s);case 1:return o.call(s,l[0]);case 2:return o.call(s,l[0],l[1]);case 3:return o.call(s,l[0],l[1],l[2])}return o.apply(s,l)}e.exports=i},function(e,r,i){function o(u,c,d){(d===void 0||l(u[c],d))&&(d!==void 0||c in u)||s(u,c,d)}var s=i(10),l=i(8);e.exports=o},function(e,r,i){function o(f,p,m,_,g){f!==p&&u(p,function(v,b){if(d(v))g||(g=new s),c(f,p,b,m,o,_,g);else{var A=_?_(f[b],v,b+"",f,p,g):void 0;A===void 0&&(A=v),l(f,b,A)}},h)}var s=i(41),l=i(18),u=i(46),c=i(51),d=i(0),h=i(32);e.exports=o},function(e,r,i){function o(c,d){return u(l(c,d,s),c+"")}var s=i(26),l=i(89),u=i(90);e.exports=o},function(e,r,i){var o=i(11),s=function(){try{var l=o(Object,"defineProperty");return l({},"",{}),l}catch{}}();e.exports=s},function(e,r,i){(function(o){var s=typeof o=="object"&&o&&o.Object===Object&&o;e.exports=s}).call(r,i(107))},function(e,r,i){var o=i(88),s=o(Object.getPrototypeOf,Object);e.exports=s},function(e,r){function i(l,u){return!!(u=u??o)&&(typeof l=="number"||s.test(l))&&l>-1&&l%1==0&&l<u}var o=9007199254740991,s=/^(?:0|[1-9]\d*)$/;e.exports=i},function(e,r){function i(s){var l=s&&s.constructor;return s===(typeof l=="function"&&l.prototype||o)}var o=Object.prototype;e.exports=i},function(e,r){function i(o){return o}e.exports=i},function(e,r,i){var o=i(47),s=i(2),l=Object.prototype,u=l.hasOwnProperty,c=l.propertyIsEnumerable,d=o(function(){return arguments}())?o:function(h){return s(h)&&u.call(h,"callee")&&!c.call(h,"callee")};e.exports=d},function(e,r){var i=Array.isArray;e.exports=i},function(e,r,i){(function(o){var s=i(1),l=i(102),u=typeof r=="object"&&r&&!r.nodeType&&r,c=u&&typeof o=="object"&&o&&!o.nodeType&&o,d=c&&c.exports===u,h=d?s.Buffer:void 0,f=h?h.isBuffer:void 0,p=f||l;o.exports=p}).call(r,i(14)(e))},function(e,r){function i(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=o}var o=9007199254740991;e.exports=i},function(e,r,i){var o=i(49),s=i(54),l=i(86),u=l&&l.isTypedArray,c=u?s(u):o;e.exports=c},function(e,r,i){function o(c){return u(c)?s(c,!0):l(c)}var s=i(43),l=i(50),u=i(12);e.exports=o},function(e,r,i){r.a={modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}}},function(e,r,i){function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function s(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||typeof h!="object"&&typeof h!="function"?d:h}function l(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var u=i(9);i.d(r,"a",function(){return c});var c=function(d){function h(){var f,p,m,_;o(this,h);for(var g=arguments.length,v=Array(g),b=0;b<g;b++)v[b]=arguments[b];return p=m=s(this,(f=h.__proto__||Object.getPrototypeOf(h)).call.apply(f,[this].concat(v))),m.onCreate=function(){m.display=document.createElement("div"),Object.assign(m.display.style,m.options.displayStyles),m.overlay.appendChild(m.display)},m.onDestroy=function(){},m.onUpdate=function(){if(m.display&&m.img){var A=m.getCurrentSize();if(m.display.innerHTML=A.join(" &times; "),A[0]>120&&A[1]>30)Object.assign(m.display.style,{right:"4px",bottom:"4px",left:"auto"});else if(m.img.style.float=="right"){var y=m.display.getBoundingClientRect();Object.assign(m.display.style,{right:"auto",bottom:"-"+(y.height+4)+"px",left:"-"+(y.width+4)+"px"})}else{var P=m.display.getBoundingClientRect();Object.assign(m.display.style,{right:"-"+(P.width+4)+"px",bottom:"-"+(P.height+4)+"px",left:"auto"})}}},m.getCurrentSize=function(){return[m.img.width,Math.round(m.img.width/m.img.naturalWidth*m.img.naturalHeight)]},_=p,s(m,_)}return l(h,d),h}(u.a)},function(e,r,i){function o(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")}function s(d,h){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!h||typeof h!="object"&&typeof h!="function"?d:h}function l(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}var u=i(9);i.d(r,"a",function(){return c});var c=function(d){function h(){var f,p,m,_;o(this,h);for(var g=arguments.length,v=Array(g),b=0;b<g;b++)v[b]=arguments[b];return p=m=s(this,(f=h.__proto__||Object.getPrototypeOf(h)).call.apply(f,[this].concat(v))),m.onCreate=function(){m.boxes=[],m.addBox("nwse-resize"),m.addBox("nesw-resize"),m.addBox("nwse-resize"),m.addBox("nesw-resize"),m.positionBoxes()},m.onDestroy=function(){m.setCursor("")},m.positionBoxes=function(){var A=-parseFloat(m.options.handleStyles.width)/2+"px",y=-parseFloat(m.options.handleStyles.height)/2+"px";[{left:A,top:y},{right:A,top:y},{right:A,bottom:y},{left:A,bottom:y}].forEach(function(P,C){Object.assign(m.boxes[C].style,P)})},m.addBox=function(A){var y=document.createElement("div");Object.assign(y.style,m.options.handleStyles),y.style.cursor=A,y.style.width=m.options.handleStyles.width+"px",y.style.height=m.options.handleStyles.height+"px",y.addEventListener("mousedown",m.handleMousedown,!1),m.overlay.appendChild(y),m.boxes.push(y)},m.handleMousedown=function(A){m.dragBox=A.target,m.dragStartX=A.clientX,m.preDragWidth=m.img.width||m.img.naturalWidth,m.setCursor(m.dragBox.style.cursor),document.addEventListener("mousemove",m.handleDrag,!1),document.addEventListener("mouseup",m.handleMouseup,!1)},m.handleMouseup=function(){m.setCursor(""),document.removeEventListener("mousemove",m.handleDrag),document.removeEventListener("mouseup",m.handleMouseup)},m.handleDrag=function(A){if(m.img){var y=A.clientX-m.dragStartX;m.dragBox===m.boxes[0]||m.dragBox===m.boxes[3]?m.img.width=Math.round(m.preDragWidth-y):m.img.width=Math.round(m.preDragWidth+y),m.requestUpdate()}},m.setCursor=function(A){[document.body,m.img].forEach(function(y){y.style.cursor=A})},_=p,s(m,_)}return l(h,d),h}(u.a)},function(e,r,i){function o(y,P){if(!(y instanceof P))throw new TypeError("Cannot call a class as a function")}function s(y,P){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!P||typeof P!="object"&&typeof P!="function"?y:P}function l(y,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);y.prototype=Object.create(P&&P.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(y,P):y.__proto__=P)}var u=i(105),c=i.n(u),d=i(104),h=i.n(d),f=i(106),p=i.n(f),m=i(9);i.d(r,"a",function(){return A});var _={},g={},v={},b={},A=function(y){function P(){var C,I,E,x;o(this,P);for(var O=arguments.length,T=Array(O),R=0;R<O;R++)T[R]=arguments[R];return I=E=s(this,(C=P.__proto__||Object.getPrototypeOf(P)).call.apply(C,[this].concat(T))),E.onCreate=function(S){_=S,g=new _.Attributor.Style("float","float"),v=new _.Attributor.Style("margin","margin"),b=new _.Attributor.Style("display","display"),E.toolbar=document.createElement("div"),Object.assign(E.toolbar.style,E.options.toolbarStyles),E.overlay.appendChild(E.toolbar),E._defineAlignments(),E._addToolbarButtons()},E.onDestroy=function(){},E.onUpdate=function(){},E._defineAlignments=function(){E.alignments=[{icon:c.a,apply:function(){b.add(E.img,"inline"),g.add(E.img,"left"),v.add(E.img,"0 1em 1em 0")},isApplied:function(){return g.value(E.img)=="left"}},{icon:h.a,apply:function(){b.add(E.img,"block"),g.remove(E.img),v.add(E.img,"auto")},isApplied:function(){return v.value(E.img)=="auto"}},{icon:p.a,apply:function(){b.add(E.img,"inline"),g.add(E.img,"right"),v.add(E.img,"0 0 1em 1em")},isApplied:function(){return g.value(E.img)=="right"}}]},E._addToolbarButtons=function(){var S=[];E.alignments.forEach(function(L,B){var $=document.createElement("span");S.push($),$.innerHTML=L.icon,$.addEventListener("click",function(){S.forEach(function(z){return z.style.filter=""}),L.isApplied()?(g.remove(E.img),v.remove(E.img),b.remove(E.img)):(E._selectButton($),L.apply()),E.requestUpdate()}),Object.assign($.style,E.options.toolbarButtonStyles),B>0&&($.style.borderLeftWidth="0"),Object.assign($.children[0].style,E.options.toolbarButtonSvgStyles),L.isApplied()&&E._selectButton($),E.toolbar.appendChild($)})},E._selectButton=function(S){S.style.filter="invert(20%)"},x=I,s(E,x)}return l(P,y),P}(m.a)},function(e,r,i){var o=i(17),s=i(20),l=i(63),u=i(101),c=s(function(d){return d.push(void 0,l),o(u,void 0,d)});e.exports=c},function(e,r,i){function o(m,_){if(!(m instanceof _))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var s=i(37),l=i.n(s),u=i(33),c=i(34),d=i(36),h=i(35),f={DisplaySize:c.a,Toolbar:d.a,Resize:h.a},p=function m(_){var g=this,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o(this,m),this.initializeModules=function(){g.removeModules(),g.modules=g.moduleClasses.map(function(A){return new(f[A]||A)(g)}),g.modules.forEach(function(A){A.onCreate(g.parchment)}),g.onUpdate()},this.onUpdate=function(){g.repositionElements(),g.modules.forEach(function(A){A.onUpdate()})},this.removeModules=function(){g.modules.forEach(function(A){A.onDestroy()}),g.modules=[]},this.handleClick=function(A){if(A.target&&A.target.tagName&&A.target.tagName.toUpperCase()==="IMG"){if(g.img===A.target)return;g.img&&g.hide(),g.show(A.target)}else g.img&&g.hide()},this.show=function(A){g.img=A,g.showOverlay(),g.initializeModules()},this.showOverlay=function(){g.overlay&&g.hideOverlay(),g.quill.setSelection(null),g.setUserSelect("none"),document.addEventListener("keyup",g.checkImage,!0),g.quill.root.addEventListener("input",g.checkImage,!0),g.overlay=document.createElement("div"),Object.assign(g.overlay.style,g.options.overlayStyles),g.quill.root.parentNode.appendChild(g.overlay),g.repositionElements()},this.hideOverlay=function(){g.overlay&&(g.quill.root.parentNode.removeChild(g.overlay),g.overlay=void 0,document.removeEventListener("keyup",g.checkImage),g.quill.root.removeEventListener("input",g.checkImage),g.setUserSelect(""))},this.repositionElements=function(){if(g.overlay&&g.img){var A=g.quill.root.parentNode,y=g.img.getBoundingClientRect(),P=A.getBoundingClientRect();Object.assign(g.overlay.style,{left:y.left-P.left-1+A.scrollLeft+"px",top:y.top-P.top+A.scrollTop+"px",width:y.width+"px",height:y.height+"px"})}},this.hide=function(){g.hideOverlay(),g.removeModules(),g.img=void 0},this.setUserSelect=function(A){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach(function(y){g.quill.root.style[y]=A,document.documentElement.style[y]=A})},this.checkImage=function(A){g.img&&(A.keyCode!=46&&A.keyCode!=8||window.Quill.find(g.img).deleteAt(0),g.hide())},this.quill=_;var b=!1;v.modules&&(b=v.modules.slice()),v.parchment&&(this.parchment=v.parchment),this.options=l()({},v,u.a),b!==!1&&(this.options.modules=b),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]};r.default=p,window.Quill&&window.Quill.register("modules/imageResize",p)},function(e,r,i){function o(h){var f=-1,p=h==null?0:h.length;for(this.clear();++f<p;){var m=h[f];this.set(m[0],m[1])}}var s=i(66),l=i(67),u=i(68),c=i(69),d=i(70);o.prototype.clear=s,o.prototype.delete=l,o.prototype.get=u,o.prototype.has=c,o.prototype.set=d,e.exports=o},function(e,r,i){function o(h){var f=-1,p=h==null?0:h.length;for(this.clear();++f<p;){var m=h[f];this.set(m[0],m[1])}}var s=i(80),l=i(81),u=i(82),c=i(83),d=i(84);o.prototype.clear=s,o.prototype.delete=l,o.prototype.get=u,o.prototype.has=c,o.prototype.set=d,e.exports=o},function(e,r,i){function o(f){var p=this.__data__=new s(f);this.size=p.size}var s=i(3),l=i(92),u=i(93),c=i(94),d=i(95),h=i(96);o.prototype.clear=l,o.prototype.delete=u,o.prototype.get=c,o.prototype.has=d,o.prototype.set=h,e.exports=o},function(e,r,i){var o=i(1),s=o.Uint8Array;e.exports=s},function(e,r,i){function o(m,_){var g=u(m),v=!g&&l(m),b=!g&&!v&&c(m),A=!g&&!v&&!b&&h(m),y=g||v||b||A,P=y?s(m.length,String):[],C=P.length;for(var I in m)!_&&!p.call(m,I)||y&&(I=="length"||b&&(I=="offset"||I=="parent")||A&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||d(I,C))||P.push(I);return P}var s=i(53),l=i(27),u=i(28),c=i(29),d=i(24),h=i(31),f=Object.prototype,p=f.hasOwnProperty;e.exports=o},function(e,r,i){function o(d,h,f){var p=d[h];c.call(d,h)&&l(p,f)&&(f!==void 0||h in d)||s(d,h,f)}var s=i(10),l=i(8),u=Object.prototype,c=u.hasOwnProperty;e.exports=o},function(e,r,i){var o=i(0),s=Object.create,l=function(){function u(){}return function(c){if(!o(c))return{};if(s)return s(c);u.prototype=c;var d=new u;return u.prototype=void 0,d}}();e.exports=l},function(e,r,i){var o=i(62),s=o();e.exports=s},function(e,r,i){function o(c){return l(c)&&s(c)==u}var s=i(5),l=i(2),u="[object Arguments]";e.exports=o},function(e,r,i){function o(g){return!(!u(g)||l(g))&&(s(g)?_:d).test(c(g))}var s=i(13),l=i(74),u=i(0),c=i(97),d=/^\[object .+?Constructor\]$/,h=Function.prototype,f=Object.prototype,p=h.toString,m=f.hasOwnProperty,_=RegExp("^"+p.call(m).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=o},function(e,r,i){function o(d){return u(d)&&l(d.length)&&!!c[s(d)]}var s=i(5),l=i(30),u=i(2),c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c["[object Arguments]"]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c["[object Map]"]=c["[object Number]"]=c["[object Object]"]=c["[object RegExp]"]=c["[object Set]"]=c["[object String]"]=c["[object WeakMap]"]=!1,e.exports=o},function(e,r,i){function o(h){if(!s(h))return u(h);var f=l(h),p=[];for(var m in h)(m!="constructor"||!f&&d.call(h,m))&&p.push(m);return p}var s=i(0),l=i(25),u=i(85),c=Object.prototype,d=c.hasOwnProperty;e.exports=o},function(e,r,i){function o(y,P,C,I,E,x,O){var T=y[C],R=P[C],S=O.get(R);if(S)return void s(y,C,S);var L=x?x(T,R,C+"",y,P,O):void 0,B=L===void 0;if(B){var $=f(R),z=!$&&m(R),Y=!$&&!z&&b(R);L=R,$||z||Y?f(T)?L=T:p(T)?L=c(T):z?(B=!1,L=l(R,!0)):Y?(B=!1,L=u(R,!0)):L=[]:v(R)||h(R)?(L=T,h(T)?L=A(T):(!g(T)||I&&_(T))&&(L=d(R))):B=!1}B&&(O.set(R,L),E(L,R,I,x,O),O.delete(R)),s(y,C,L)}var s=i(18),l=i(56),u=i(57),c=i(58),d=i(71),h=i(27),f=i(28),p=i(99),m=i(29),_=i(13),g=i(0),v=i(100),b=i(31),A=i(103);e.exports=o},function(e,r,i){var o=i(98),s=i(21),l=i(26),u=s?function(c,d){return s(c,"toString",{configurable:!0,enumerable:!1,value:o(d),writable:!0})}:l;e.exports=u},function(e,r){function i(o,s){for(var l=-1,u=Array(o);++l<o;)u[l]=s(l);return u}e.exports=i},function(e,r){function i(o){return function(s){return o(s)}}e.exports=i},function(e,r,i){function o(l){var u=new l.constructor(l.byteLength);return new s(u).set(new s(l)),u}var s=i(42);e.exports=o},function(e,r,i){(function(o){function s(p,m){if(m)return p.slice();var _=p.length,g=f?f(_):new p.constructor(_);return p.copy(g),g}var l=i(1),u=typeof r=="object"&&r&&!r.nodeType&&r,c=u&&typeof o=="object"&&o&&!o.nodeType&&o,d=c&&c.exports===u,h=d?l.Buffer:void 0,f=h?h.allocUnsafe:void 0;o.exports=s}).call(r,i(14)(e))},function(e,r,i){function o(l,u){var c=u?s(l.buffer):l.buffer;return new l.constructor(c,l.byteOffset,l.length)}var s=i(55);e.exports=o},function(e,r){function i(o,s){var l=-1,u=o.length;for(s||(s=Array(u));++l<u;)s[l]=o[l];return s}e.exports=i},function(e,r,i){function o(u,c,d,h){var f=!d;d||(d={});for(var p=-1,m=c.length;++p<m;){var _=c[p],g=h?h(d[_],u[_],_,d,u):void 0;g===void 0&&(g=u[_]),f?l(d,_,g):s(d,_,g)}return d}var s=i(44),l=i(10);e.exports=o},function(e,r,i){var o=i(1),s=o["__core-js_shared__"];e.exports=s},function(e,r,i){function o(u){return s(function(c,d){var h=-1,f=d.length,p=f>1?d[f-1]:void 0,m=f>2?d[2]:void 0;for(p=u.length>3&&typeof p=="function"?(f--,p):void 0,m&&l(d[0],d[1],m)&&(p=f<3?void 0:p,f=1),c=Object(c);++h<f;){var _=d[h];_&&u(c,_,h,p)}return c})}var s=i(20),l=i(72);e.exports=o},function(e,r){function i(o){return function(s,l,u){for(var c=-1,d=Object(s),h=u(s),f=h.length;f--;){var p=h[o?f:++c];if(l(d[p],p,d)===!1)break}return s}}e.exports=i},function(e,r,i){function o(u,c,d,h,f,p){return l(u)&&l(c)&&(p.set(c,u),s(u,c,void 0,o,p),p.delete(c)),u}var s=i(19),l=i(0);e.exports=o},function(e,r,i){function o(h){var f=u.call(h,d),p=h[d];try{h[d]=void 0}catch{}var m=c.call(h);return f?h[d]=p:delete h[d],m}var s=i(16),l=Object.prototype,u=l.hasOwnProperty,c=l.toString,d=s?s.toStringTag:void 0;e.exports=o},function(e,r){function i(o,s){return o==null?void 0:o[s]}e.exports=i},function(e,r,i){function o(){this.__data__=s?s(null):{},this.size=0}var s=i(7);e.exports=o},function(e,r){function i(o){var s=this.has(o)&&delete this.__data__[o];return this.size-=s?1:0,s}e.exports=i},function(e,r,i){function o(d){var h=this.__data__;if(s){var f=h[d];return f===l?void 0:f}return c.call(h,d)?h[d]:void 0}var s=i(7),l="__lodash_hash_undefined__",u=Object.prototype,c=u.hasOwnProperty;e.exports=o},function(e,r,i){function o(c){var d=this.__data__;return s?d[c]!==void 0:u.call(d,c)}var s=i(7),l=Object.prototype,u=l.hasOwnProperty;e.exports=o},function(e,r,i){function o(u,c){var d=this.__data__;return this.size+=this.has(u)?0:1,d[u]=s&&c===void 0?l:c,this}var s=i(7),l="__lodash_hash_undefined__";e.exports=o},function(e,r,i){function o(c){return typeof c.constructor!="function"||u(c)?{}:s(l(c))}var s=i(45),l=i(23),u=i(25);e.exports=o},function(e,r,i){function o(d,h,f){if(!c(f))return!1;var p=typeof h;return!!(p=="number"?l(f)&&u(h,f.length):p=="string"&&h in f)&&s(f[h],d)}var s=i(8),l=i(12),u=i(24),c=i(0);e.exports=o},function(e,r){function i(o){var s=typeof o;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?o!=="__proto__":o===null}e.exports=i},function(e,r,i){function o(u){return!!l&&l in u}var s=i(60),l=function(){var u=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}();e.exports=o},function(e,r){function i(){this.__data__=[],this.size=0}e.exports=i},function(e,r,i){function o(c){var d=this.__data__,h=s(d,c);return!(h<0)&&(h==d.length-1?d.pop():u.call(d,h,1),--this.size,!0)}var s=i(4),l=Array.prototype,u=l.splice;e.exports=o},function(e,r,i){function o(l){var u=this.__data__,c=s(u,l);return c<0?void 0:u[c][1]}var s=i(4);e.exports=o},function(e,r,i){function o(l){return s(this.__data__,l)>-1}var s=i(4);e.exports=o},function(e,r,i){function o(l,u){var c=this.__data__,d=s(c,l);return d<0?(++this.size,c.push([l,u])):c[d][1]=u,this}var s=i(4);e.exports=o},function(e,r,i){function o(){this.size=0,this.__data__={hash:new s,map:new(u||l),string:new s}}var s=i(39),l=i(3),u=i(15);e.exports=o},function(e,r,i){function o(l){var u=s(this,l).delete(l);return this.size-=u?1:0,u}var s=i(6);e.exports=o},function(e,r,i){function o(l){return s(this,l).get(l)}var s=i(6);e.exports=o},function(e,r,i){function o(l){return s(this,l).has(l)}var s=i(6);e.exports=o},function(e,r,i){function o(l,u){var c=s(this,l),d=c.size;return c.set(l,u),this.size+=c.size==d?0:1,this}var s=i(6);e.exports=o},function(e,r){function i(o){var s=[];if(o!=null)for(var l in Object(o))s.push(l);return s}e.exports=i},function(e,r,i){(function(o){var s=i(22),l=typeof r=="object"&&r&&!r.nodeType&&r,u=l&&typeof o=="object"&&o&&!o.nodeType&&o,c=u&&u.exports===l,d=c&&s.process,h=function(){try{return d&&d.binding&&d.binding("util")}catch{}}();o.exports=h}).call(r,i(14)(e))},function(e,r){function i(l){return s.call(l)}var o=Object.prototype,s=o.toString;e.exports=i},function(e,r){function i(o,s){return function(l){return o(s(l))}}e.exports=i},function(e,r,i){function o(u,c,d){return c=l(c===void 0?u.length-1:c,0),function(){for(var h=arguments,f=-1,p=l(h.length-c,0),m=Array(p);++f<p;)m[f]=h[c+f];f=-1;for(var _=Array(c+1);++f<c;)_[f]=h[f];return _[c]=d(m),s(u,this,_)}}var s=i(17),l=Math.max;e.exports=o},function(e,r,i){var o=i(52),s=i(91),l=s(o);e.exports=l},function(e,r){function i(u){var c=0,d=0;return function(){var h=l(),f=s-(h-d);if(d=h,f>0){if(++c>=o)return arguments[0]}else c=0;return u.apply(void 0,arguments)}}var o=800,s=16,l=Date.now;e.exports=i},function(e,r,i){function o(){this.__data__=new s,this.size=0}var s=i(3);e.exports=o},function(e,r){function i(o){var s=this.__data__,l=s.delete(o);return this.size=s.size,l}e.exports=i},function(e,r){function i(o){return this.__data__.get(o)}e.exports=i},function(e,r){function i(o){return this.__data__.has(o)}e.exports=i},function(e,r,i){function o(d,h){var f=this.__data__;if(f instanceof s){var p=f.__data__;if(!l||p.length<c-1)return p.push([d,h]),this.size=++f.size,this;f=this.__data__=new u(p)}return f.set(d,h),this.size=f.size,this}var s=i(3),l=i(15),u=i(40),c=200;e.exports=o},function(e,r){function i(l){if(l!=null){try{return s.call(l)}catch{}try{return l+""}catch{}}return""}var o=Function.prototype,s=o.toString;e.exports=i},function(e,r){function i(o){return function(){return o}}e.exports=i},function(e,r,i){function o(u){return l(u)&&s(u)}var s=i(12),l=i(2);e.exports=o},function(e,r,i){function o(_){if(!u(_)||s(_)!=c)return!1;var g=l(_);if(g===null)return!0;var v=p.call(g,"constructor")&&g.constructor;return typeof v=="function"&&v instanceof v&&f.call(v)==m}var s=i(5),l=i(23),u=i(2),c="[object Object]",d=Function.prototype,h=Object.prototype,f=d.toString,p=h.hasOwnProperty,m=f.call(Object);e.exports=o},function(e,r,i){var o=i(19),s=i(61),l=s(function(u,c,d,h){o(u,c,d,h)});e.exports=l},function(e,r){function i(){return!1}e.exports=i},function(e,r,i){function o(u){return s(u,l(u))}var s=i(59),l=i(32);e.exports=o},function(e,r){e.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"></line>
</svg>`},function(e,r){e.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"></line>
</svg>`},function(e,r){e.exports=`<svg viewbox="0 0 18 18">
  <line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"></line>
  <line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"></line>
  <line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"></line>
</svg>`},function(e,r){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(i=window)}e.exports=i}])})})(lh);var MO=lh.exports;const VO=xu(MO);Ys.Quill.register("modules/imageResize",VO);const uh=({onClose:n})=>{const[t,e]=rt.useState(""),[r,i]=rt.useState(""),[o,s]=rt.useState(null),[l,u]=rt.useState(!1),[c,d]=rt.useState(!1),[h,f]=rt.useState(""),p={height:"300px",width:"100%",overflow:"auto"},m=y=>{i(y)},_=y=>{const P=y.target.files[0];P&&s(P)},g=y=>{d(y.target.checked),y.target.checked||f("")},v=async()=>{u(!0);try{if(!o){alert("Please select an image"),u(!1);return}const y=v_(y_(n0,"projects")),P=Kf(),C=X1(P,`posts/${o.name}`);await W1(C,o);const I=await Q1(C);await V_(y,{id:y.id,cover:I,title:t,content:r,createdAt:Qh(new Date),raisedAmount:0,goalAmount:h}),console.log("Product added with ID:",y.id),n()}catch(y){console.error("Error adding product:",y)}finally{u(!1)}},b={toolbar:[[{header:"1"},{header:"2"},{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],["clean"]],clipboard:{matchVisual:!1},imageResize:{parchment:Ys.Quill.import("parchment"),modules:["Resize","DisplaySize"]}},A=["header","font","size","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image","video"];return ft.jsx("form",{children:ft.jsxs(xo,{spacing:2,children:[ft.jsx(Ga,{label:"Title",value:t,onChange:y=>e(y.target.value),fullWidth:!0,required:!0}),ft.jsx(Kd,{control:ft.jsx(jd,{checked:c,onChange:g}),label:"This project requires funding"}),c&&ft.jsx(Ga,{label:"Goal Amount",type:"number",value:h,onChange:y=>f(y.target.value),fullWidth:!0,required:!0}),ft.jsxs(ft.Fragment,{children:[ft.jsx("style",{children:`
          @media (min-width: 768px) {
            .quill-wrapper {
              height: 400px; // Larger height on larger screens
            }
          }
        `}),ft.jsx("div",{className:"quill-wrapper",style:p,children:ft.jsx(LO,{theme:"snow",value:r,onChange:m,modules:b,formats:A,bounds:".quill-wrapper",placeholder:"Write here",required:!0})})]}),ft.jsxs(xo,{direction:"row",spacing:2,style:{marginTop:"20px"},children:[ft.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:_,required:!0}),ft.jsx(Wh,{onClick:v,variant:"contained",color:"primary",disabled:l,children:l?ft.jsx(Jh,{size:24}):"Add Project"})]})]})})};uh.propTypes={onClose:ii.func.isRequired};const WO=uh;export{UO as G,$O as M,WO as N,y_ as c,n0 as d,GO as g};
